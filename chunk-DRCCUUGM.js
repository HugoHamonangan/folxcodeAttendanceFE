import{a as ji,b as Zi}from"./chunk-CDYYXC32.js";import{b as Me}from"./chunk-HUCDO5O7.js";import{a as xt}from"./chunk-URZCDQJJ.js";import{a as yt}from"./chunk-KRSGJYAG.js";import{a as Re}from"./chunk-6VAWEE5E.js";import{a as Ue}from"./chunk-LUSJALC7.js";import{a as Ut}from"./chunk-Q4GO5ARB.js";import{e as qe}from"./chunk-NFZ6GDEL.js";import{a as Gi}from"./chunk-SYBY7P64.js";import{a as tt}from"./chunk-LSM4Q6XX.js";import{a as Fe}from"./chunk-Z4CE53GY.js";import{h as qi}from"./chunk-BYGHQCG7.js";import{a as Ui,b as Wi,c as Ki}from"./chunk-Y2PXB5NQ.js";import{a as Bi,b as Qi,c as Hi,f as Ae,g as we,i as de,j as qt,k as ze}from"./chunk-ZYGI2F2J.js";import{$ as li,$a as Ce,Aa as gt,Ba as Ye,Ca as Xe,Da as Je,Ea as Nt,H as We,Ha as ve,I as ke,Ja as ue,K as Si,Ka as Ct,L as Ii,La as Li,M as ct,Ma as wt,Na as Qt,O as Vi,Oa as et,R as Ei,S as dt,Sa as Oe,T as oi,Ta as $i,Va as _t,Wa as Ht,X as pt,Xa as Ni,Z as Fi,aa as Di,ba as Rt,ca as ft,da as Lt,ea as Oi,fa as si,ia as Ai,ja as $t,ka as Mi,ma as zi,pa as Ge,qa as K,ra as Pt,sa as jt,t as wi,ta as Bt,ua as ae,v as ni,va as Ri,wa as De,x as Ti,xa as Ke,y as ki,ya as Ze,za as ce}from"./chunk-ZAHCPB2U.js";import{$ as b,$b as Se,$c as Ci,Ab as xe,Bc as Be,Cb as le,Cc as be,Db as se,Dc as rt,E as xi,Eb as s,Ec as Ne,Fb as a,Gb as u,H as yi,Hb as $,Ib as P,Jb as W,Kb as y,Mb as _,Nb as c,Ob as Pe,Pb as je,Qb as O,R as It,Rb as I,Sb as v,Sc as Z,Ta as X,Tb as C,U as Vt,Uc as Mt,V as me,Vc as ee,W as ge,Wa as Ft,Wb as q,Xa as r,Xb as m,Xc as at,Yb as R,Yc as Qe,Zb as k,_b as At,_c as zt,ab as He,ac as Ie,ad as te,bc as Ve,cd as vt,fa as Et,fc as N,ga as h,gc as re,ha as f,hb as V,hc as L,ia as ut,ib as _e,ic as ye,id as Pi,jc as Ee,jd as ri,ka as B,kb as G,ld as ai,mb as g,mc as vi,nc as lt,nd as ci,oc as ii,od as di,p as oe,pc as bt,q as _i,qa as M,qc as J,qd as pi,ra as ht,ta as bi,tb as D,ub as p,vb as Dt,wa as H,wb as Ot,xb as $e,yb as U,yc as E,zb as w,zc as st}from"./chunk-24CHYTPN.js";import{a as j,b as pe,g as mt}from"./chunk-TSRGIXR5.js";var wn=["*"],Tn=({dt:t})=>`
.p-iconfield {
    position: relative;
    display: block;
}

.p-inputicon {
    position: absolute;
    top: 50%;
    margin-top: calc(-1 * (${t("icon.size")} / 2));
    color: ${t("iconfield.icon.color")};
    line-height: 1;
}

.p-iconfield .p-inputicon:first-child {
    inset-inline-start: ${t("form.field.padding.x")};
}

.p-iconfield .p-inputicon:last-child {
    inset-inline-end: ${t("form.field.padding.x")};
}

.p-iconfield .p-inputtext:not(:first-child) {
    padding-inline-start: calc((${t("form.field.padding.x")} * 2) + ${t("icon.size")});
}

.p-iconfield .p-inputtext:not(:last-child) {
    padding-inline-end: calc((${t("form.field.padding.x")} * 2) + ${t("icon.size")});
}

.p-iconfield:has(.p-inputfield-sm) .p-inputicon {
    font-size: ${t("form.field.sm.font.size")};
    width: ${t("form.field.sm.font.size")};
    height: ${t("form.field.sm.font.size")};
    margin-top: calc(-1 * (${t("form.field.sm.font.size")} / 2));
}

.p-iconfield:has(.p-inputfield-lg) .p-inputicon {
    font-size: ${t("form.field.lg.font.size")};
    width: ${t("form.field.lg.font.size")};
    height: ${t("form.field.lg.font.size")};
    margin-top: calc(-1 * (${t("form.field.lg.font.size")} / 2));
}
`,kn={root:"p-iconfield"},Yi=(()=>{class t extends ve{name="iconfield";theme=Tn;classes=kn;static \u0275fac=(()=>{let e;return function(i){return(e||(e=B(t)))(i||t)}})();static \u0275prov=me({token:t,factory:t.\u0275fac})}return t})();var mi=(()=>{class t extends ue{iconPosition="left";get _styleClass(){return this.styleClass}styleClass;_componentStyle=b(Yi);static \u0275fac=(()=>{let e;return function(i){return(e||(e=B(t)))(i||t)}})();static \u0275cmp=V({type:t,selectors:[["p-iconfield"],["p-iconField"],["p-icon-field"]],hostAttrs:[1,"p-iconfield"],hostVars:6,hostBindings:function(n,i){n&2&&(U(i._styleClass),Ot("p-iconfield-left",i.iconPosition==="left")("p-iconfield-right",i.iconPosition==="right"))},inputs:{iconPosition:"iconPosition",styleClass:"styleClass"},features:[N([Yi]),G],ngContentSelectors:wn,decls:1,vars:0,template:function(n,i){n&1&&(Pe(),je(0))},dependencies:[te],encapsulation:2,changeDetection:0})}return t})(),Xi=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=_e({type:t});static \u0275inj=ge({imports:[mi]})}return t})();var Ji=(()=>{class t extends _t{static \u0275fac=(()=>{let e;return function(i){return(e||(e=B(t)))(i||t)}})();static \u0275cmp=V({type:t,selectors:[["BlankIcon"]],features:[G],decls:2,vars:0,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["width","1","height","1","fill","currentColor","fill-opacity","0"]],template:function(n,i){n&1&&(ut(),s(0,"svg",0),u(1,"rect",1),a())},encapsulation:2})}return t})();var en=(()=>{class t extends _t{static \u0275fac=(()=>{let e;return function(i){return(e||(e=B(t)))(i||t)}})();static \u0275cmp=V({type:t,selectors:[["MinusIcon"]],features:[G],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z","fill","currentColor"]],template:function(n,i){n&1&&(ut(),s(0,"svg",0),u(1,"path",1),a()),n&2&&(U(i.getClassNames()),D("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role))},encapsulation:2})}return t})();var tn=(()=>{class t extends _t{pathId;ngOnInit(){this.pathId="url(#"+$t()+")"}static \u0275fac=(()=>{let e;return function(i){return(e||(e=B(t)))(i||t)}})();static \u0275cmp=V({type:t,selectors:[["SearchIcon"]],features:[G],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M2.67602 11.0265C3.6661 11.688 4.83011 12.0411 6.02086 12.0411C6.81149 12.0411 7.59438 11.8854 8.32483 11.5828C8.87005 11.357 9.37808 11.0526 9.83317 10.6803L12.9769 13.8241C13.0323 13.8801 13.0983 13.9245 13.171 13.9548C13.2438 13.985 13.3219 14.0003 13.4007 14C13.4795 14.0003 13.5575 13.985 13.6303 13.9548C13.7031 13.9245 13.7691 13.8801 13.8244 13.8241C13.9367 13.7116 13.9998 13.5592 13.9998 13.4003C13.9998 13.2414 13.9367 13.089 13.8244 12.9765L10.6807 9.8328C11.053 9.37773 11.3573 8.86972 11.5831 8.32452C11.8857 7.59408 12.0414 6.81119 12.0414 6.02056C12.0414 4.8298 11.6883 3.66579 11.0268 2.67572C10.3652 1.68564 9.42494 0.913972 8.32483 0.45829C7.22472 0.00260857 6.01418 -0.116618 4.84631 0.115686C3.67844 0.34799 2.60568 0.921393 1.76369 1.76338C0.921698 2.60537 0.348296 3.67813 0.115991 4.84601C-0.116313 6.01388 0.00291375 7.22441 0.458595 8.32452C0.914277 9.42464 1.68595 10.3649 2.67602 11.0265ZM3.35565 2.0158C4.14456 1.48867 5.07206 1.20731 6.02086 1.20731C7.29317 1.20731 8.51338 1.71274 9.41304 2.6124C10.3127 3.51206 10.8181 4.73226 10.8181 6.00457C10.8181 6.95337 10.5368 7.88088 10.0096 8.66978C9.48251 9.45868 8.73328 10.0736 7.85669 10.4367C6.98011 10.7997 6.01554 10.8947 5.08496 10.7096C4.15439 10.5245 3.2996 10.0676 2.62869 9.39674C1.95778 8.72583 1.50089 7.87104 1.31579 6.94046C1.13068 6.00989 1.22568 5.04532 1.58878 4.16874C1.95187 3.29215 2.56675 2.54292 3.35565 2.0158Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(n,i){n&1&&(ut(),s(0,"svg",0)(1,"g"),u(2,"path",1),a(),s(3,"defs")(4,"clipPath",2),u(5,"rect",3),a()()()),n&2&&(U(i.getClassNames()),D("aria-label",i.ariaLabel)("aria-hidden",i.ariaHidden)("role",i.role),r(),D("clip-path",i.pathId),r(3),p("id",i.pathId))},encapsulation:2})}return t})();var Sn=["*"],In={root:"p-inputicon"},nn=(()=>{class t extends ve{name="inputicon";classes=In;static \u0275fac=(()=>{let e;return function(i){return(e||(e=B(t)))(i||t)}})();static \u0275prov=me({token:t,factory:t.\u0275fac})}return t})(),ui=(()=>{class t extends ue{styleClass;get hostClasses(){return this.styleClass}_componentStyle=b(nn);static \u0275fac=(()=>{let e;return function(i){return(e||(e=B(t)))(i||t)}})();static \u0275cmp=V({type:t,selectors:[["p-inputicon"],["p-inputIcon"]],hostVars:4,hostBindings:function(n,i){n&2&&(U(i.hostClasses),Ot("p-inputicon",!0))},inputs:{styleClass:"styleClass"},features:[N([nn]),G],ngContentSelectors:Sn,decls:1,vars:0,template:function(n,i){n&1&&(Pe(),je(0))},dependencies:[te,K],encapsulation:2,changeDetection:0})}return t})(),on=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=_e({type:t});static \u0275inj=ge({imports:[ui,K,K]})}return t})();var ln=["content"],En=["overlay"],Fn=["*"],Dn=(t,o,e,n,i,l,d,x,T,S,A,he,Y,fe)=>({"p-overlay p-component":!0,"p-overlay-modal p-overlay-mask p-overlay-mask-enter":t,"p-overlay-center":o,"p-overlay-top":e,"p-overlay-top-start":n,"p-overlay-top-end":i,"p-overlay-bottom":l,"p-overlay-bottom-start":d,"p-overlay-bottom-end":x,"p-overlay-left":T,"p-overlay-left-start":S,"p-overlay-left-end":A,"p-overlay-right":he,"p-overlay-right-start":Y,"p-overlay-right-end":fe}),On=(t,o,e)=>({showTransitionParams:t,hideTransitionParams:o,transform:e}),An=t=>({value:"visible",params:t}),Mn=t=>({mode:t}),zn=t=>({$implicit:t});function Rn(t,o){t&1&&W(0)}function Ln(t,o){if(t&1){let e=y();s(0,"div",3,1),_("click",function(i){h(e);let l=c(2);return f(l.onOverlayContentClick(i))})("@overlayContentAnimation.start",function(i){h(e);let l=c(2);return f(l.onOverlayContentAnimationStart(i))})("@overlayContentAnimation.done",function(i){h(e);let l=c(2);return f(l.onOverlayContentAnimationDone(i))}),je(2),g(3,Rn,1,0,"ng-container",4),a()}if(t&2){let e=c(2);U(e.contentStyleClass),p("ngStyle",e.contentStyle)("ngClass","p-overlay-content")("@overlayContentAnimation",L(11,An,Ee(7,On,e.showTransitionOptions,e.hideTransitionOptions,e.transformOptions[e.modal?e.overlayResponsiveDirection:"default"]))),r(3),p("ngTemplateOutlet",e.contentTemplate||e._contentTemplate)("ngTemplateOutletContext",L(15,zn,L(13,Mn,e.overlayMode)))}}function $n(t,o){if(t&1){let e=y();s(0,"div",3,0),_("click",function(){h(e);let i=c();return f(i.onOverlayClick())}),g(2,Ln,4,17,"div",2),a()}if(t&2){let e=c();U(e.styleClass),p("ngStyle",e.style)("ngClass",vi(5,Dn,[e.modal,e.modal&&e.overlayResponsiveDirection==="center",e.modal&&e.overlayResponsiveDirection==="top",e.modal&&e.overlayResponsiveDirection==="top-start",e.modal&&e.overlayResponsiveDirection==="top-end",e.modal&&e.overlayResponsiveDirection==="bottom",e.modal&&e.overlayResponsiveDirection==="bottom-start",e.modal&&e.overlayResponsiveDirection==="bottom-end",e.modal&&e.overlayResponsiveDirection==="left",e.modal&&e.overlayResponsiveDirection==="left-start",e.modal&&e.overlayResponsiveDirection==="left-end",e.modal&&e.overlayResponsiveDirection==="right",e.modal&&e.overlayResponsiveDirection==="right-start",e.modal&&e.overlayResponsiveDirection==="right-end"])),r(2),p("ngIf",e.visible)}}var Pn=({dt:t})=>`
.p-overlay {
    position: absolute;
    top: 0;
}

.p-overlay-modal {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.p-overlay-content {
    transform-origin: inherit;
}

.p-overlay-modal > .p-overlay-content {
    z-index: 1;
    width: 90%;
}

/* Position */
/* top */
.p-overlay-top {
    align-items: flex-start;
}
.p-overlay-top-start {
    align-items: flex-start;
    justify-content: flex-start;
}
.p-overlay-top-end {
    align-items: flex-start;
    justify-content: flex-end;
}

/* bottom */
.p-overlay-bottom {
    align-items: flex-end;
}
.p-overlay-bottom-start {
    align-items: flex-end;
    justify-content: flex-start;
}
.p-overlay-bottom-end {
    align-items: flex-end;
    justify-content: flex-end;
}

/* left */
.p-overlay-left {
    justify-content: flex-start;
}
.p-overlay-left-start {
    justify-content: flex-start;
    align-items: flex-start;
}
.p-overlay-left-end {
    justify-content: flex-start;
    align-items: flex-end;
}

/* right */
.p-overlay-right {
    justify-content: flex-end;
}
.p-overlay-right-start {
    justify-content: flex-end;
    align-items: flex-start;
}
.p-overlay-right-end {
    justify-content: flex-end;
    align-items: flex-end;
}
`,sn=(()=>{class t extends ve{name="overlay";theme=Pn;static \u0275fac=(()=>{let e;return function(i){return(e||(e=B(t)))(i||t)}})();static \u0275prov=me({token:t,factory:t.\u0275fac})}return t})(),jn=di([ai({transform:"{{transform}}",opacity:0}),ri("{{showTransitionParams}}")]),Bn=di([ri("{{hideTransitionParams}}",ai({transform:"{{transform}}",opacity:0}))]),rn=(()=>{class t extends ue{overlayService;zone;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.modalVisible&&(this.modalVisible=!0)}get mode(){return this._mode||this.overlayOptions?.mode}set mode(e){this._mode=e}get style(){return wt.merge(this._style,this.modal?this.overlayResponsiveOptions?.style:this.overlayOptions?.style)}set style(e){this._style=e}get styleClass(){return wt.merge(this._styleClass,this.modal?this.overlayResponsiveOptions?.styleClass:this.overlayOptions?.styleClass)}set styleClass(e){this._styleClass=e}get contentStyle(){return wt.merge(this._contentStyle,this.modal?this.overlayResponsiveOptions?.contentStyle:this.overlayOptions?.contentStyle)}set contentStyle(e){this._contentStyle=e}get contentStyleClass(){return wt.merge(this._contentStyleClass,this.modal?this.overlayResponsiveOptions?.contentStyleClass:this.overlayOptions?.contentStyleClass)}set contentStyleClass(e){this._contentStyleClass=e}get target(){let e=this._target||this.overlayOptions?.target;return e===void 0?"@prev":e}set target(e){this._target=e}get appendTo(){return this._appendTo||this.overlayOptions?.appendTo}set appendTo(e){this._appendTo=e}get autoZIndex(){let e=this._autoZIndex||this.overlayOptions?.autoZIndex;return e===void 0?!0:e}set autoZIndex(e){this._autoZIndex=e}get baseZIndex(){let e=this._baseZIndex||this.overlayOptions?.baseZIndex;return e===void 0?0:e}set baseZIndex(e){this._baseZIndex=e}get showTransitionOptions(){let e=this._showTransitionOptions||this.overlayOptions?.showTransitionOptions;return e===void 0?".12s cubic-bezier(0, 0, 0.2, 1)":e}set showTransitionOptions(e){this._showTransitionOptions=e}get hideTransitionOptions(){let e=this._hideTransitionOptions||this.overlayOptions?.hideTransitionOptions;return e===void 0?".1s linear":e}set hideTransitionOptions(e){this._hideTransitionOptions=e}get listener(){return this._listener||this.overlayOptions?.listener}set listener(e){this._listener=e}get responsive(){return this._responsive||this.overlayOptions?.responsive}set responsive(e){this._responsive=e}get options(){return this._options}set options(e){this._options=e}visibleChange=new M;onBeforeShow=new M;onShow=new M;onBeforeHide=new M;onHide=new M;onAnimationStart=new M;onAnimationDone=new M;overlayViewChild;contentViewChild;contentTemplate;templates;_contentTemplate;_visible=!1;_mode;_style;_styleClass;_contentStyle;_contentStyleClass;_target;_appendTo;_autoZIndex;_baseZIndex;_showTransitionOptions;_hideTransitionOptions;_listener;_responsive;_options;modalVisible=!1;isOverlayClicked=!1;isOverlayContentClicked=!1;scrollHandler;documentClickListener;documentResizeListener;_componentStyle=b(sn);documentKeyboardListener;window;transformOptions={default:"scaleY(0.8)",center:"scale(0.7)",top:"translate3d(0px, -100%, 0px)","top-start":"translate3d(0px, -100%, 0px)","top-end":"translate3d(0px, -100%, 0px)",bottom:"translate3d(0px, 100%, 0px)","bottom-start":"translate3d(0px, 100%, 0px)","bottom-end":"translate3d(0px, 100%, 0px)",left:"translate3d(-100%, 0px, 0px)","left-start":"translate3d(-100%, 0px, 0px)","left-end":"translate3d(-100%, 0px, 0px)",right:"translate3d(100%, 0px, 0px)","right-start":"translate3d(100%, 0px, 0px)","right-end":"translate3d(100%, 0px, 0px)"};get modal(){if(vt(this.platformId))return this.mode==="modal"||this.overlayResponsiveOptions&&this.document.defaultView?.matchMedia(this.overlayResponsiveOptions.media?.replace("@media","")||`(max-width: ${this.overlayResponsiveOptions.breakpoint})`).matches}get overlayMode(){return this.mode||(this.modal?"modal":"overlay")}get overlayOptions(){return j(j({},this.config?.overlayOptions),this.options)}get overlayResponsiveOptions(){return j(j({},this.overlayOptions?.responsive),this.responsive)}get overlayResponsiveDirection(){return this.overlayResponsiveOptions?.direction||"center"}get overlayEl(){return this.overlayViewChild?.nativeElement}get contentEl(){return this.contentViewChild?.nativeElement}get targetEl(){return Ei(this.target,this.el?.nativeElement)}constructor(e,n){super(),this.overlayService=e,this.zone=n}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"content":this._contentTemplate=e.template;break;default:this._contentTemplate=e.template;break}})}show(e,n=!1){this.onVisibleChange(!0),this.handleEvents("onShow",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),n&&ke(this.targetEl),this.modal&&ni(this.document?.body,"p-overflow-hidden")}hide(e,n=!1){if(this.visible)this.onVisibleChange(!1),this.handleEvents("onHide",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),n&&ke(this.targetEl),this.modal&&Ti(this.document?.body,"p-overflow-hidden");else return}alignOverlay(){!this.modal&&Ct.alignOverlay(this.overlayEl,this.targetEl,this.appendTo)}onVisibleChange(e){this._visible=e,this.visibleChange.emit(e)}onOverlayClick(){this.isOverlayClicked=!0}onOverlayContentClick(e){this.overlayService.add({originalEvent:e,target:this.targetEl}),this.isOverlayContentClicked=!0}onOverlayContentAnimationStart(e){switch(e.toState){case"visible":this.handleEvents("onBeforeShow",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.autoZIndex&&Qt.set(this.overlayMode,this.overlayEl,this.baseZIndex+this.config?.zIndex[this.overlayMode]),Ct.appendOverlay(this.overlayEl,this.appendTo==="body"?this.document.body:this.appendTo,this.appendTo),this.alignOverlay();break;case"void":this.handleEvents("onBeforeHide",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.modal&&ni(this.overlayEl,"p-overlay-mask-leave");break}this.handleEvents("onAnimationStart",e)}onOverlayContentAnimationDone(e){let n=this.overlayEl||e.element.parentElement;switch(e.toState){case"visible":this.visible&&(this.show(n,!0),this.bindListeners());break;case"void":if(!this.visible){this.hide(n,!0),this.modalVisible=!1,this.unbindListeners(),Ct.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),Qt.clear(n),this.cd.markForCheck();break}}this.handleEvents("onAnimationDone",e)}handleEvents(e,n){this[e].emit(n),this.options&&this.options[e]&&this.options[e](n),this.config?.overlayOptions&&(this.config?.overlayOptions)[e]&&(this.config?.overlayOptions)[e](n)}bindListeners(){this.bindScrollListener(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindDocumentKeyboardListener()}unbindListeners(){this.unbindScrollListener(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindDocumentKeyboardListener()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Li(this.targetEl,e=>{(this.listener?this.listener(e,{type:"scroll",mode:this.overlayMode,valid:!0}):!0)&&this.hide(e,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{let i=!(this.targetEl&&(this.targetEl.isSameNode(e.target)||!this.isOverlayClicked&&this.targetEl.contains(e.target)))&&!this.isOverlayContentClicked;(this.listener?this.listener(e,{type:"outside",mode:this.overlayMode,valid:e.which!==3&&i}):i)&&this.hide(e),this.isOverlayClicked=this.isOverlayContentClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener||(this.documentResizeListener=this.renderer.listen(this.document.defaultView,"resize",e=>{(this.listener?this.listener(e,{type:"resize",mode:this.overlayMode,valid:!pt()}):!pt())&&this.hide(e,!0)}))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}bindDocumentKeyboardListener(){this.documentKeyboardListener||this.zone.runOutsideAngular(()=>{this.documentKeyboardListener=this.renderer.listen(this.document.defaultView,"keydown",e=>{if(this.overlayOptions.hideOnEscape===!1||e.code!=="Escape")return;(this.listener?this.listener(e,{type:"keydown",mode:this.overlayMode,valid:!pt()}):!pt())&&this.zone.run(()=>{this.hide(e,!0)})})})}unbindDocumentKeyboardListener(){this.documentKeyboardListener&&(this.documentKeyboardListener(),this.documentKeyboardListener=null)}ngOnDestroy(){this.hide(this.overlayEl,!0),this.overlayEl&&(Ct.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),Qt.clear(this.overlayEl)),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindListeners(),super.ngOnDestroy()}static \u0275fac=function(n){return new(n||t)(He(zi),He(ht))};static \u0275cmp=V({type:t,selectors:[["p-overlay"]],contentQueries:function(n,i,l){if(n&1&&(O(l,ln,4),O(l,Ge,4)),n&2){let d;v(d=C())&&(i.contentTemplate=d.first),v(d=C())&&(i.templates=d)}},viewQuery:function(n,i){if(n&1&&(I(En,5),I(ln,5)),n&2){let l;v(l=C())&&(i.overlayViewChild=l.first),v(l=C())&&(i.contentViewChild=l.first)}},inputs:{visible:"visible",mode:"mode",style:"style",styleClass:"styleClass",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",target:"target",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",listener:"listener",responsive:"responsive",options:"options"},outputs:{visibleChange:"visibleChange",onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onAnimationStart:"onAnimationStart",onAnimationDone:"onAnimationDone"},features:[N([sn]),G],ngContentSelectors:Fn,decls:1,vars:1,consts:[["overlay",""],["content",""],[3,"ngStyle","class","ngClass","click",4,"ngIf"],[3,"click","ngStyle","ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,i){n&1&&(Pe(),g(0,$n,3,20,"div",2)),n&2&&p("ngIf",i.modalVisible)},dependencies:[te,Z,ee,Qe,at,K],encapsulation:2,data:{animation:[Pi("overlayContentAnimation",[ci(":enter",[pi(jn)]),ci(":leave",[pi(Bn)])])]},changeDetection:0})}return t})();var an=["content"],Nn=["item"],Qn=["loader"],Hn=["loadericon"],qn=["element"],Un=["*"],Wn=(t,o,e)=>({"p-virtualscroller":!0,"p-virtualscroller-inline":t,"p-virtualscroller-both p-both-scroll":o,"p-virtualscroller-horizontal p-horizontal-scroll":e}),hi=(t,o)=>({$implicit:t,options:o}),Gn=t=>({"p-virtualscroller-content":!0,"p-virtualscroller-loading ":t}),Kn=t=>({"p-virtualscroller-loader-mask":t}),Zn=t=>({numCols:t}),dn=t=>({options:t}),Yn=()=>({styleClass:"p-virtualscroller-loading-icon"}),Xn=(t,o)=>({rows:t,columns:o});function Jn(t,o){t&1&&W(0)}function eo(t,o){if(t&1&&($(0),g(1,Jn,1,0,"ng-container",10),P()),t&2){let e=c(2);r(),p("ngTemplateOutlet",e.contentTemplate||e._contentTemplate)("ngTemplateOutletContext",ye(2,hi,e.loadedItems,e.getContentOptions()))}}function to(t,o){t&1&&W(0)}function io(t,o){if(t&1&&($(0),g(1,to,1,0,"ng-container",10),P()),t&2){let e=o.$implicit,n=o.index,i=c(3);r(),p("ngTemplateOutlet",i.itemTemplate||i._itemTemplate)("ngTemplateOutletContext",ye(2,hi,e,i.getOptions(n)))}}function no(t,o){if(t&1&&(s(0,"div",11,3),g(2,io,2,5,"ng-container",12),a()),t&2){let e=c(2);$e(e.contentStyle),U(e.contentStyleClass),p("ngClass",L(8,Gn,e.d_loading)),D("data-pc-section","content"),r(2),p("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy)}}function oo(t,o){if(t&1&&u(0,"div",13),t&2){let e=c(2);p("ngStyle",e.spacerStyle),D("data-pc-section","spacer")}}function lo(t,o){t&1&&W(0)}function so(t,o){if(t&1&&($(0),g(1,lo,1,0,"ng-container",10),P()),t&2){let e=o.index,n=c(4);r(),p("ngTemplateOutlet",n.loaderTemplate||n._loaderTemplate)("ngTemplateOutletContext",L(4,dn,n.getLoaderOptions(e,n.both&&L(2,Zn,n.numItemsInViewport.cols))))}}function ro(t,o){if(t&1&&($(0),g(1,so,2,6,"ng-container",15),P()),t&2){let e=c(3);r(),p("ngForOf",e.loaderArr)}}function ao(t,o){t&1&&W(0)}function co(t,o){if(t&1&&($(0),g(1,ao,1,0,"ng-container",10),P()),t&2){let e=c(4);r(),p("ngTemplateOutlet",e.loaderIconTemplate||e._loaderIconTemplate)("ngTemplateOutletContext",L(3,dn,re(2,Yn)))}}function po(t,o){t&1&&u(0,"SpinnerIcon",16),t&2&&(p("styleClass","p-virtualscroller-loading-icon pi-spin"),D("data-pc-section","loadingIcon"))}function mo(t,o){if(t&1&&g(0,co,2,5,"ng-container",6)(1,po,1,2,"ng-template",null,5,J),t&2){let e=q(2),n=c(3);p("ngIf",n.loaderIconTemplate||n._loaderIconTemplate)("ngIfElse",e)}}function uo(t,o){if(t&1&&(s(0,"div",14),g(1,ro,2,1,"ng-container",6)(2,mo,3,2,"ng-template",null,4,J),a()),t&2){let e=q(3),n=c(2);p("ngClass",L(4,Kn,!n.loaderTemplate)),D("data-pc-section","loader"),r(),p("ngIf",n.loaderTemplate||n._loaderTemplate)("ngIfElse",e)}}function ho(t,o){if(t&1){let e=y();$(0),s(1,"div",7,1),_("scroll",function(i){h(e);let l=c();return f(l.onContainerScroll(i))}),g(3,eo,2,5,"ng-container",6)(4,no,3,10,"ng-template",null,2,J)(6,oo,1,2,"div",8)(7,uo,4,6,"div",9),a(),P()}if(t&2){let e=q(5),n=c();r(),U(n._styleClass),p("ngStyle",n._style)("ngClass",Ee(12,Wn,n.inline,n.both,n.horizontal)),D("id",n._id)("tabindex",n.tabindex)("data-pc-name","scroller")("data-pc-section","root"),r(2),p("ngIf",n.contentTemplate||n._contentTemplate)("ngIfElse",e),r(3),p("ngIf",n._showSpacer),r(),p("ngIf",!n.loaderDisabled&&n._showLoader&&n.d_loading)}}function fo(t,o){t&1&&W(0)}function go(t,o){if(t&1&&($(0),g(1,fo,1,0,"ng-container",10),P()),t&2){let e=c(2);r(),p("ngTemplateOutlet",e.contentTemplate||e._contentTemplate)("ngTemplateOutletContext",ye(5,hi,e.items,ye(2,Xn,e._items,e.loadedColumns)))}}function _o(t,o){if(t&1&&(je(0),g(1,go,2,8,"ng-container",17)),t&2){let e=c();r(),p("ngIf",e.contentTemplate||e._contentTemplate)}}var xo=({dt:t})=>`
.p-virtualscroller {
    position: relative;
    overflow: auto;
    contain: strict;
    transform: translateZ(0);
    will-change: scroll-position;
    outline: 0 none;
}

.p-virtualscroller-content {
    position: absolute;
    top: 0;
    left: 0;
    min-height: 100%;
    min-width: 100%;
    will-change: transform;
}

.p-virtualscroller-spacer {
    position: absolute;
    top: 0;
    left: 0;
    height: 1px;
    width: 1px;
    transform-origin: 0 0;
    pointer-events: none;
}

.p-virtualscroller-loader {
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: ${t("virtualscroller.loader.mask.background")};
    color: ${t("virtualscroller.loader.mask.color")};
}

.p-virtualscroller-loader-mask {
    display: flex;
    align-items: center;
    justify-content: center;
}

.p-virtualscroller-loading-icon {
    font-size: ${t("virtualscroller.loader.icon.size")};
    width: ${t("virtualscroller.loader.icon.size")};
    height: ${t("virtualscroller.loader.icon.size")};
}

.p-virtualscroller-horizontal > .p-virtualscroller-content {
    display: flex;
}

.p-virtualscroller-inline .p-virtualscroller-content {
    position: static;
}
`,cn=(()=>{class t extends ve{name="virtualscroller";theme=xo;static \u0275fac=(()=>{let e;return function(i){return(e||(e=B(t)))(i||t)}})();static \u0275prov=me({token:t,factory:t.\u0275fac})}return t})();var pn=(()=>{class t extends ue{zone;get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get step(){return this._step}set step(e){this._step=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=e}get inline(){return this._inline}set inline(e){this._inline=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&typeof e=="object"&&(Object.entries(e).forEach(([n,i])=>this[`_${n}`]!==i&&(this[`_${n}`]=i)),Object.entries(e).forEach(([n,i])=>this[`${n}`]!==i&&(this[`${n}`]=i)))}onLazyLoad=new M;onScroll=new M;onScrollIndexChange=new M;elementViewChild;contentViewChild;height;_id;_style;_styleClass;_tabindex=0;_items;_itemSize=0;_scrollHeight;_scrollWidth;_orientation="vertical";_step=0;_delay=0;_resizeDelay=10;_appendOnly=!1;_inline=!1;_lazy=!1;_disabled=!1;_loaderDisabled=!1;_columns;_showSpacer=!0;_showLoader=!1;_numToleratedItems;_loading;_autoSize=!1;_trackBy;_options;d_loading=!1;d_numToleratedItems;contentEl;contentTemplate;itemTemplate;loaderTemplate;loaderIconTemplate;templates;_contentTemplate;_itemTemplate;_loaderTemplate;_loaderIconTemplate;first=0;last=0;page=0;isRangeChanged=!1;numItemsInViewport=0;lastScrollPos=0;lazyLoadState={};loaderArr=[];spacerStyle={};contentStyle={};scrollTimeout;resizeTimeout;initialized=!1;windowResizeListener;defaultWidth;defaultHeight;defaultContentWidth;defaultContentHeight;_contentStyleClass;get contentStyleClass(){return this._contentStyleClass}set contentStyleClass(e){this._contentStyleClass=e}get vertical(){return this._orientation==="vertical"}get horizontal(){return this._orientation==="horizontal"}get both(){return this._orientation==="both"}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this._appendOnly?0:this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this._appendOnly?0:this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this._appendOnly?0:this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}_componentStyle=b(cn);constructor(e){super(),this.zone=e}ngOnInit(){super.ngOnInit(),this.setInitialState()}ngOnChanges(e){super.ngOnChanges(e);let n=!1;if(this.scrollHeight=="100%"&&(this.height="100%"),e.loading){let{previousValue:i,currentValue:l}=e.loading;this.lazy&&i!==l&&l!==this.d_loading&&(this.d_loading=l,n=!0)}if(e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){let{previousValue:i,currentValue:l}=e.numToleratedItems;i!==l&&l!==this.d_numToleratedItems&&(this.d_numToleratedItems=l)}if(e.options){let{previousValue:i,currentValue:l}=e.options;this.lazy&&i?.loading!==l?.loading&&l?.loading!==this.d_loading&&(this.d_loading=l.loading,n=!0),i?.numToleratedItems!==l?.numToleratedItems&&l?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=l.numToleratedItems)}this.initialized&&!n&&(e.items?.previousValue?.length!==e.items?.currentValue?.length||e.itemSize||e.scrollHeight||e.scrollWidth)&&(this.init(),this.calculateAutoSize())}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this._contentTemplate=e.template;break;case"item":this._itemTemplate=e.template;break;case"loader":this._loaderTemplate=e.template;break;case"loadericon":this._loaderIconTemplate=e.template;break;default:this._itemTemplate=e.template;break}})}ngAfterViewInit(){super.ngAfterViewInit(),Promise.resolve().then(()=>{this.viewInit()})}ngAfterViewChecked(){this.initialized||this.viewInit()}ngOnDestroy(){this.unbindResizeListener(),this.contentEl=null,this.initialized=!1,super.ngOnDestroy()}viewInit(){vt(this.platformId)&&!this.initialized&&oi(this.elementViewChild?.nativeElement)&&(this.setInitialState(),this.setContentEl(this.contentEl),this.init(),this.defaultWidth=dt(this.elementViewChild?.nativeElement),this.defaultHeight=ct(this.elementViewChild?.nativeElement),this.defaultContentWidth=dt(this.contentEl),this.defaultContentHeight=ct(this.contentEl),this.initialized=!0)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.bindResizeListener(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||We(this.elementViewChild?.nativeElement,".p-virtualscroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems,this.loaderArr=[]}getElementRef(){return this.elementViewChild}getPageByFirst(e){return Math.floor(((e??this.first)+this.d_numToleratedItems*4)/(this._step||1))}isPageChanged(e){return this._step?this.page!==this.getPageByFirst(e??this.first):!0}scrollTo(e){this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,n="auto"){if(this.both?e.every(l=>l>-1):e>-1){let l=this.first,{scrollTop:d=0,scrollLeft:x=0}=this.elementViewChild?.nativeElement,{numToleratedItems:T}=this.calculateNumItems(),S=this.getContentPosition(),A=this.itemSize,he=(z=0,Q)=>z<=Q?0:z,Y=(z,Q,Te)=>z*Q+Te,fe=(z=0,Q=0)=>this.scrollTo({left:z,top:Q,behavior:n}),ne=this.both?{rows:0,cols:0}:0,nt=!1,F=!1;this.both?(ne={rows:he(e[0],T[0]),cols:he(e[1],T[1])},fe(Y(ne.cols,A[1],S.left),Y(ne.rows,A[0],S.top)),F=this.lastScrollPos.top!==d||this.lastScrollPos.left!==x,nt=ne.rows!==l.rows||ne.cols!==l.cols):(ne=he(e,T),this.horizontal?fe(Y(ne,A,S.left),d):fe(x,Y(ne,A,S.top)),F=this.lastScrollPos!==(this.horizontal?x:d),nt=ne!==l),this.isRangeChanged=nt,F&&(this.first=ne)}}scrollInView(e,n,i="auto"){if(n){let{first:l,viewport:d}=this.getRenderedRange(),x=(A=0,he=0)=>this.scrollTo({left:A,top:he,behavior:i}),T=n==="to-start",S=n==="to-end";if(T){if(this.both)d.first.rows-l.rows>e[0]?x(d.first.cols*this._itemSize[1],(d.first.rows-1)*this._itemSize[0]):d.first.cols-l.cols>e[1]&&x((d.first.cols-1)*this._itemSize[1],d.first.rows*this._itemSize[0]);else if(d.first-l>e){let A=(d.first-1)*this._itemSize;this.horizontal?x(A,0):x(0,A)}}else if(S){if(this.both)d.last.rows-l.rows<=e[0]+1?x(d.first.cols*this._itemSize[1],(d.first.rows+1)*this._itemSize[0]):d.last.cols-l.cols<=e[1]+1&&x((d.first.cols+1)*this._itemSize[1],d.first.rows*this._itemSize[0]);else if(d.last-l<=e+1){let A=(d.first+1)*this._itemSize;this.horizontal?x(A,0):x(0,A)}}}else this.scrollToIndex(e,i)}getRenderedRange(){let e=(l,d)=>d||l?Math.floor(l/(d||l)):0,n=this.first,i=0;if(this.elementViewChild?.nativeElement){let{scrollTop:l,scrollLeft:d}=this.elementViewChild.nativeElement;if(this.both)n={rows:e(l,this._itemSize[0]),cols:e(d,this._itemSize[1])},i={rows:n.rows+this.numItemsInViewport.rows,cols:n.cols+this.numItemsInViewport.cols};else{let x=this.horizontal?d:l;n=e(x,this._itemSize),i=n+this.numItemsInViewport}}return{first:this.first,last:this.last,viewport:{first:n,last:i}}}calculateNumItems(){let e=this.getContentPosition(),n=(this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0)||0,i=(this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0)||0,l=(S,A)=>A||S?Math.ceil(S/(A||S)):0,d=S=>Math.ceil(S/2),x=this.both?{rows:l(i,this._itemSize[0]),cols:l(n,this._itemSize[1])}:l(this.horizontal?n:i,this._itemSize),T=this.d_numToleratedItems||(this.both?[d(x.rows),d(x.cols)]:d(x));return{numItemsInViewport:x,numToleratedItems:T}}calculateOptions(){let{numItemsInViewport:e,numToleratedItems:n}=this.calculateNumItems(),i=(x,T,S,A=!1)=>this.getLast(x+T+(x<S?2:3)*S,A),l=this.first,d=this.both?{rows:i(this.first.rows,e.rows,n[0]),cols:i(this.first.cols,e.cols,n[1],!0)}:i(this.first,e,n);this.last=d,this.numItemsInViewport=e,this.d_numToleratedItems=n,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this._step?this.both?{rows:0,cols:l.cols}:0:l,last:Math.min(this._step?this._step:this.last,this.items.length)},this.handleEvents("onLazyLoad",this.lazyLoadState)})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto",this.contentEl.style.position="relative",this.elementViewChild.nativeElement.style.contain="none";let[e,n]=[dt(this.contentEl),ct(this.contentEl)];e!==this.defaultContentWidth&&(this.elementViewChild.nativeElement.style.width=""),n!==this.defaultContentHeight&&(this.elementViewChild.nativeElement.style.height="");let[i,l]=[dt(this.elementViewChild.nativeElement),ct(this.elementViewChild.nativeElement)];(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=i<this.defaultWidth?i+"px":this._scrollWidth||this.defaultWidth+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=l<this.defaultHeight?l+"px":this._scrollHeight||this.defaultHeight+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth="",this.contentEl.style.position="",this.elementViewChild.nativeElement.style.contain=""}})}getLast(e=0,n=!1){return this._items?Math.min(n?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){let e=getComputedStyle(this.contentEl),n=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),i=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),l=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),d=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:n,right:i,top:l,bottom:d,x:n+i,y:l+d}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){let e=this.elementViewChild.nativeElement.parentElement.parentElement,n=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,i=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,l=(d,x)=>this.elementViewChild.nativeElement.style[d]=x;this.both||this.horizontal?(l("height",i),l("width",n)):l("height",i)}}setSpacerSize(){if(this._items){let e=this.getContentPosition(),n=(i,l,d,x=0)=>this.spacerStyle=pe(j({},this.spacerStyle),{[`${i}`]:(l||[]).length*d+x+"px"});this.both?(n("height",this._items,this._itemSize[0],e.y),n("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?n("width",this._columns||this._items,this._itemSize,e.x):n("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl&&!this._appendOnly){let n=e?e.first:this.first,i=(d,x)=>d*x,l=(d=0,x=0)=>this.contentStyle=pe(j({},this.contentStyle),{transform:`translate3d(${d}px, ${x}px, 0)`});if(this.both)l(i(n.cols,this._itemSize[1]),i(n.rows,this._itemSize[0]));else{let d=i(n,this._itemSize);this.horizontal?l(d,0):l(0,d)}}}onScrollPositionChange(e){let n=e.target,i=this.getContentPosition(),l=(F,z)=>F?F>z?F-z:F:0,d=(F,z)=>z||F?Math.floor(F/(z||F)):0,x=(F,z,Q,Te,Le,ot)=>F<=Le?Le:ot?Q-Te-Le:z+Le-1,T=(F,z,Q,Te,Le,ot,St)=>F<=ot?0:Math.max(0,St?F<z?Q:F-ot:F>z?Q:F-2*ot),S=(F,z,Q,Te,Le,ot=!1)=>{let St=z+Te+2*Le;return F>=Le&&(St+=Le+1),this.getLast(St,ot)},A=l(n.scrollTop,i.top),he=l(n.scrollLeft,i.left),Y=this.both?{rows:0,cols:0}:0,fe=this.last,ne=!1,nt=this.lastScrollPos;if(this.both){let F=this.lastScrollPos.top<=A,z=this.lastScrollPos.left<=he;if(!this._appendOnly||this._appendOnly&&(F||z)){let Q={rows:d(A,this._itemSize[0]),cols:d(he,this._itemSize[1])},Te={rows:x(Q.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],F),cols:x(Q.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],z)};Y={rows:T(Q.rows,Te.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],F),cols:T(Q.cols,Te.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],z)},fe={rows:S(Q.rows,Y.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:S(Q.cols,Y.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},ne=Y.rows!==this.first.rows||fe.rows!==this.last.rows||Y.cols!==this.first.cols||fe.cols!==this.last.cols||this.isRangeChanged,nt={top:A,left:he}}}else{let F=this.horizontal?he:A,z=this.lastScrollPos<=F;if(!this._appendOnly||this._appendOnly&&z){let Q=d(F,this._itemSize),Te=x(Q,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,z);Y=T(Q,Te,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,z),fe=S(Q,Y,this.last,this.numItemsInViewport,this.d_numToleratedItems),ne=Y!==this.first||fe!==this.last||this.isRangeChanged,nt=F}}return{first:Y,last:fe,isRangeChanged:ne,scrollPos:nt}}onScrollChange(e){let{first:n,last:i,isRangeChanged:l,scrollPos:d}=this.onScrollPositionChange(e);if(l){let x={first:n,last:i};if(this.setContentPosition(x),this.first=n,this.last=i,this.lastScrollPos=d,this.handleEvents("onScrollIndexChange",x),this._lazy&&this.isPageChanged(n)){let T={first:this._step?Math.min(this.getPageByFirst(n)*this._step,this.items.length-this._step):n,last:Math.min(this._step?(this.getPageByFirst(n)+1)*this._step:i,this.items.length)};(this.lazyLoadState.first!==T.first||this.lazyLoadState.last!==T.last)&&this.handleEvents("onLazyLoad",T),this.lazyLoadState=T}}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay&&this.isPageChanged()){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){let{isRangeChanged:n}=this.onScrollPositionChange(e);(n||(this._step?this.isPageChanged():!1))&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||this._loading===void 0)&&(this.d_loading=!1,this.page=this.getPageByFirst()),this.cd.detectChanges()},this._delay)}else!this.d_loading&&this.onScrollChange(e)}bindResizeListener(){vt(this.platformId)&&(this.windowResizeListener||this.zone.runOutsideAngular(()=>{let e=this.document.defaultView,n=pt()?"orientationchange":"resize";this.windowResizeListener=this.renderer.listen(e,n,this.onWindowResize.bind(this))}))}unbindResizeListener(){this.windowResizeListener&&(this.windowResizeListener(),this.windowResizeListener=null)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(oi(this.elementViewChild?.nativeElement)){let[e,n]=[dt(this.elementViewChild?.nativeElement),ct(this.elementViewChild?.nativeElement)],[i,l]=[e!==this.defaultWidth,n!==this.defaultHeight];(this.both?i||l:this.horizontal?i:this.vertical?l:!1)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=n,this.defaultContentWidth=dt(this.contentEl),this.defaultContentHeight=ct(this.contentEl),this.init()})}},this._resizeDelay)}handleEvents(e,n){return this.options&&this.options[e]?this.options[e](n):this[e].emit(n)}getContentOptions(){return{contentStyleClass:`p-virtualscroller-content ${this.d_loading?"p-virtualscroller-loading":""}`,items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,n)=>this.getLoaderOptions(e,n),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){let n=(this._items||[]).length,i=this.both?this.first.rows+e:this.first+e;return{index:i,count:n,first:i===0,last:i===n-1,even:i%2===0,odd:i%2!==0}}getLoaderOptions(e,n){let i=this.loaderArr.length;return j({index:e,count:i,first:e===0,last:e===i-1,even:e%2===0,odd:e%2!==0},n)}static \u0275fac=function(n){return new(n||t)(He(ht))};static \u0275cmp=V({type:t,selectors:[["p-scroller"],["p-virtualscroller"],["p-virtual-scroller"],["p-virtualScroller"]],contentQueries:function(n,i,l){if(n&1&&(O(l,an,4),O(l,Nn,4),O(l,Qn,4),O(l,Hn,4),O(l,Ge,4)),n&2){let d;v(d=C())&&(i.contentTemplate=d.first),v(d=C())&&(i.itemTemplate=d.first),v(d=C())&&(i.loaderTemplate=d.first),v(d=C())&&(i.loaderIconTemplate=d.first),v(d=C())&&(i.templates=d)}},viewQuery:function(n,i){if(n&1&&(I(qn,5),I(an,5)),n&2){let l;v(l=C())&&(i.elementViewChild=l.first),v(l=C())&&(i.contentViewChild=l.first)}},hostVars:2,hostBindings:function(n,i){n&2&&Dt("height",i.height)},inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",step:"step",delay:"delay",resizeDelay:"resizeDelay",appendOnly:"appendOnly",inline:"inline",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[N([cn]),G,Et],ngContentSelectors:Un,decls:3,vars:2,consts:[["disabledContainer",""],["element",""],["buildInContent",""],["content",""],["buildInLoader",""],["buildInLoaderIcon",""],[4,"ngIf","ngIfElse"],[3,"scroll","ngStyle","ngClass"],["class","p-virtualscroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-virtualscroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-virtualscroller-spacer",3,"ngStyle"],[1,"p-virtualscroller-loader",3,"ngClass"],[4,"ngFor","ngForOf"],[3,"styleClass"],[4,"ngIf"]],template:function(n,i){if(n&1&&(Pe(),g(0,ho,8,16,"ng-container",6)(1,_o,2,1,"ng-template",null,0,J)),n&2){let l=q(2);p("ngIf",!i._disabled)("ngIfElse",l)}},dependencies:[te,Z,Mt,ee,Qe,at,Bi,K],encapsulation:2})}return t})();var Tt=t=>({height:t}),yo=(t,o,e)=>({"p-select-option":!0,"p-select-option-selected":t,"p-disabled":o,"p-focus":e}),fi=t=>({$implicit:t});function bo(t,o){t&1&&u(0,"CheckIcon",5)}function vo(t,o){t&1&&u(0,"BlankIcon",6)}function Co(t,o){if(t&1&&($(0),g(1,bo,1,0,"CheckIcon",3)(2,vo,1,0,"BlankIcon",4),P()),t&2){let e=c();r(),p("ngIf",e.selected),r(),p("ngIf",!e.selected)}}function wo(t,o){if(t&1&&(s(0,"span"),m(1),a()),t&2){let e,n=c();r(),R((e=n.label)!==null&&e!==void 0?e:"empty")}}function To(t,o){t&1&&W(0)}var ko=["item"],So=["group"],Io=["loader"],Vo=["selectedItem"],Eo=["header"],mn=["filter"],Fo=["footer"],Do=["emptyfilter"],Oo=["empty"],Ao=["dropdownicon"],Mo=["loadingicon"],zo=["clearicon"],Ro=["filtericon"],Lo=["onicon"],$o=["officon"],Po=["cancelicon"],jo=["focusInput"],Bo=["editableInput"],No=["items"],Qo=["scroller"],Ho=["overlay"],qo=["firstHiddenFocusableEl"],Uo=["lastHiddenFocusableEl"],Wo=()=>({class:"p-select-clear-icon"}),Go=()=>({class:"p-select-dropdown-icon"}),hn=t=>({options:t}),fn=(t,o)=>({$implicit:t,options:o}),Ko=()=>({});function Zo(t,o){if(t&1&&($(0),m(1),P()),t&2){let e=c(2);r(),R(e.label()==="p-emptylabel"?"\xA0":e.label())}}function Yo(t,o){if(t&1&&W(0,24),t&2){let e=c(2);p("ngTemplateOutlet",e.selectedItemTemplate||e._selectedItemTemplate)("ngTemplateOutletContext",L(2,fi,e.selectedOption))}}function Xo(t,o){if(t&1&&(s(0,"span"),m(1),a()),t&2){let e=c(3);r(),R(e.label()==="p-emptylabel"?"\xA0":e.label())}}function Jo(t,o){if(t&1&&g(0,Xo,2,1,"span",18),t&2){let e=c(2);p("ngIf",e.isSelectedOptionEmpty())}}function el(t,o){if(t&1){let e=y();s(0,"span",22,3),_("focus",function(i){h(e);let l=c();return f(l.onInputFocus(i))})("blur",function(i){h(e);let l=c();return f(l.onInputBlur(i))})("keydown",function(i){h(e);let l=c();return f(l.onKeyDown(i))}),g(2,Zo,2,1,"ng-container",20)(3,Yo,1,4,"ng-container",23)(4,Jo,1,1,"ng-template",null,4,J),a()}if(t&2){let e,n=q(5),i=c();p("ngClass",i.inputClass)("pTooltip",i.tooltip)("tooltipPosition",i.tooltipPosition)("positionStyle",i.tooltipPositionStyle)("tooltipStyleClass",i.tooltipStyleClass)("pAutoFocus",i.autofocus),D("aria-disabled",i.disabled)("id",i.inputId)("aria-label",i.ariaLabel||(i.label()==="p-emptylabel"?void 0:i.label()))("aria-labelledby",i.ariaLabelledBy)("aria-haspopup","listbox")("aria-expanded",(e=i.overlayVisible)!==null&&e!==void 0?e:!1)("aria-controls",i.overlayVisible?i.id+"_list":null)("tabindex",i.disabled?-1:i.tabindex)("aria-activedescendant",i.focused?i.focusedOptionId:void 0)("aria-required",i.required)("required",i.required),r(2),p("ngIf",!i.selectedItemTemplate&&!i._selectedItemTemplate)("ngIfElse",n),r(),p("ngIf",(i.selectedItemTemplate||i._selectedItemTemplate)&&!i.isSelectedOptionEmpty())}}function tl(t,o){if(t&1){let e=y();s(0,"input",25,5),_("input",function(i){h(e);let l=c();return f(l.onEditableInput(i))})("keydown",function(i){h(e);let l=c();return f(l.onKeyDown(i))})("focus",function(i){h(e);let l=c();return f(l.onInputFocus(i))})("blur",function(i){h(e);let l=c();return f(l.onInputBlur(i))}),a()}if(t&2){let e=c();p("ngClass",e.inputClass)("disabled",e.disabled)("pAutoFocus",e.autofocus),D("id",e.inputId)("maxlength",e.maxlength)("placeholder",e.modelValue()===void 0||e.modelValue()===null?e.placeholder():void 0)("aria-label",e.ariaLabel||(e.label()==="p-emptylabel"?void 0:e.label()))("aria-activedescendant",e.focused?e.focusedOptionId:void 0)}}function il(t,o){if(t&1){let e=y();s(0,"TimesIcon",27),_("click",function(i){h(e);let l=c(2);return f(l.clear(i))}),a()}t&2&&D("data-pc-section","clearicon")}function nl(t,o){}function ol(t,o){t&1&&g(0,nl,0,0,"ng-template")}function ll(t,o){if(t&1){let e=y();s(0,"span",27),_("click",function(i){h(e);let l=c(2);return f(l.clear(i))}),g(1,ol,1,0,null,28),a()}if(t&2){let e=c(2);D("data-pc-section","clearicon"),r(),p("ngTemplateOutlet",e.clearIconTemplate||e._clearIconTemplate)("ngTemplateOutletContext",re(3,Wo))}}function sl(t,o){if(t&1&&($(0),g(1,il,1,1,"TimesIcon",26)(2,ll,2,4,"span",26),P()),t&2){let e=c();r(),p("ngIf",!e.clearIconTemplate&&!e._clearIconTemplate),r(),p("ngIf",e.clearIconTemplate||e._clearIconTemplate)}}function rl(t,o){t&1&&W(0)}function al(t,o){if(t&1&&($(0),g(1,rl,1,0,"ng-container",29),P()),t&2){let e=c(2);r(),p("ngTemplateOutlet",e.loadingIconTemplate||e._loadingIconTemplate)}}function cl(t,o){if(t&1&&u(0,"span",32),t&2){let e=c(3);p("ngClass","p-select-loading-icon pi-spin "+e.loadingIcon)}}function dl(t,o){t&1&&u(0,"span",33),t&2&&U("p-select-loading-icon pi pi-spinner pi-spin")}function pl(t,o){if(t&1&&($(0),g(1,cl,1,1,"span",30)(2,dl,1,2,"span",31),P()),t&2){let e=c(2);r(),p("ngIf",e.loadingIcon),r(),p("ngIf",!e.loadingIcon)}}function ml(t,o){if(t&1&&($(0),g(1,al,2,1,"ng-container",18)(2,pl,3,2,"ng-container",18),P()),t&2){let e=c();r(),p("ngIf",e.loadingIconTemplate||e._loadingIconTemplate),r(),p("ngIf",!e.loadingIconTemplate&&!e._loadingIconTemplate)}}function ul(t,o){if(t&1&&u(0,"span",37),t&2){let e=c(3);p("ngClass",e.dropdownIcon)}}function hl(t,o){t&1&&u(0,"ChevronDownIcon",38),t&2&&p("styleClass","p-select-dropdown-icon")}function fl(t,o){if(t&1&&($(0),g(1,ul,1,1,"span",35)(2,hl,1,1,"ChevronDownIcon",36),P()),t&2){let e=c(2);r(),p("ngIf",e.dropdownIcon),r(),p("ngIf",!e.dropdownIcon)}}function gl(t,o){}function _l(t,o){t&1&&g(0,gl,0,0,"ng-template")}function xl(t,o){if(t&1&&(s(0,"span",39),g(1,_l,1,0,null,28),a()),t&2){let e=c(2);r(),p("ngTemplateOutlet",e.dropdownIconTemplate||e._dropdownIconTemplate)("ngTemplateOutletContext",re(2,Go))}}function yl(t,o){if(t&1&&g(0,fl,3,2,"ng-container",18)(1,xl,2,3,"span",34),t&2){let e=c();p("ngIf",!e.dropdownIconTemplate&&!e._dropdownIconTemplate),r(),p("ngIf",e.dropdownIconTemplate||e._dropdownIconTemplate)}}function bl(t,o){t&1&&W(0)}function vl(t,o){t&1&&W(0)}function Cl(t,o){if(t&1&&($(0),g(1,vl,1,0,"ng-container",28),P()),t&2){let e=c(3);r(),p("ngTemplateOutlet",e.filterTemplate||e._filterTemplate)("ngTemplateOutletContext",L(2,hn,e.filterOptions))}}function wl(t,o){t&1&&u(0,"SearchIcon")}function Tl(t,o){}function kl(t,o){t&1&&g(0,Tl,0,0,"ng-template")}function Sl(t,o){if(t&1&&(s(0,"span"),g(1,kl,1,0,null,29),a()),t&2){let e=c(4);r(),p("ngTemplateOutlet",e.filterIconTemplate||e._filterIconTemplate)}}function Il(t,o){if(t&1){let e=y();s(0,"p-iconfield")(1,"input",46,10),_("input",function(i){h(e);let l=c(3);return f(l.onFilterInputChange(i))})("keydown",function(i){h(e);let l=c(3);return f(l.onFilterKeyDown(i))})("blur",function(i){h(e);let l=c(3);return f(l.onFilterBlur(i))}),a(),s(3,"p-inputicon"),g(4,wl,1,0,"SearchIcon",18)(5,Sl,2,1,"span",18),a()()}if(t&2){let e=c(3);r(),p("pSize",e.size)("value",e._filterValue()||"")("variant",e.variant),D("placeholder",e.filterPlaceholder)("aria-owns",e.id+"_list")("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.focusedOptionId),r(3),p("ngIf",!e.filterIconTemplate&&!e._filterIconTemplate),r(),p("ngIf",e.filterIconTemplate||e._filterIconTemplate)}}function Vl(t,o){if(t&1){let e=y();s(0,"div",45),_("click",function(i){return h(e),f(i.stopPropagation())}),g(1,Cl,2,4,"ng-container",20)(2,Il,6,9,"ng-template",null,9,J),a()}if(t&2){let e=q(3),n=c(2);r(),p("ngIf",n.filterTemplate||n._filterTemplate)("ngIfElse",e)}}function El(t,o){t&1&&W(0)}function Fl(t,o){if(t&1&&g(0,El,1,0,"ng-container",28),t&2){let e=o.$implicit,n=o.options;c(2);let i=q(9);p("ngTemplateOutlet",i)("ngTemplateOutletContext",ye(2,fn,e,n))}}function Dl(t,o){t&1&&W(0)}function Ol(t,o){if(t&1&&g(0,Dl,1,0,"ng-container",28),t&2){let e=o.options,n=c(4);p("ngTemplateOutlet",n.loaderTemplate||n._loaderTemplate)("ngTemplateOutletContext",L(2,hn,e))}}function Al(t,o){t&1&&($(0),g(1,Ol,1,4,"ng-template",null,12,J),P())}function Ml(t,o){if(t&1){let e=y();s(0,"p-scroller",47,11),_("onLazyLoad",function(i){h(e);let l=c(2);return f(l.onLazyLoad.emit(i))}),g(2,Fl,1,5,"ng-template",null,2,J)(4,Al,3,0,"ng-container",18),a()}if(t&2){let e=c(2);$e(L(8,Tt,e.scrollHeight)),p("items",e.visibleOptions())("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),r(4),p("ngIf",e.loaderTemplate||e._loaderTemplate)}}function zl(t,o){t&1&&W(0)}function Rl(t,o){if(t&1&&($(0),g(1,zl,1,0,"ng-container",28),P()),t&2){c();let e=q(9),n=c();r(),p("ngTemplateOutlet",e)("ngTemplateOutletContext",ye(3,fn,n.visibleOptions(),re(2,Ko)))}}function Ll(t,o){if(t&1&&(s(0,"span"),m(1),a()),t&2){let e=c(2).$implicit,n=c(3);r(),R(n.getOptionGroupLabel(e.optionGroup))}}function $l(t,o){t&1&&W(0)}function Pl(t,o){if(t&1&&($(0),s(1,"li",51),g(2,Ll,2,1,"span",18)(3,$l,1,0,"ng-container",28),a(),P()),t&2){let e=c(),n=e.$implicit,i=e.index,l=c().options,d=c(2);r(),p("ngStyle",L(5,Tt,l.itemSize+"px")),D("id",d.id+"_"+d.getOptionIndex(i,l)),r(),p("ngIf",!d.groupTemplate&&!d._groupTemplate),r(),p("ngTemplateOutlet",d.groupTemplate||d._groupTemplate)("ngTemplateOutletContext",L(7,fi,n.optionGroup))}}function jl(t,o){if(t&1){let e=y();$(0),s(1,"p-selectItem",52),_("onClick",function(i){h(e);let l=c().$implicit,d=c(3);return f(d.onOptionSelect(i,l))})("onMouseEnter",function(i){h(e);let l=c().index,d=c().options,x=c(2);return f(x.onOptionMouseEnter(i,x.getOptionIndex(l,d)))}),a(),P()}if(t&2){let e=c(),n=e.$implicit,i=e.index,l=c().options,d=c(2);r(),p("id",d.id+"_"+d.getOptionIndex(i,l))("option",n)("checkmark",d.checkmark)("selected",d.isSelected(n))("label",d.getOptionLabel(n))("disabled",d.isOptionDisabled(n))("template",d.itemTemplate||d._itemTemplate)("focused",d.focusedOptionIndex()===d.getOptionIndex(i,l))("ariaPosInset",d.getAriaPosInset(d.getOptionIndex(i,l)))("ariaSetSize",d.ariaSetSize)}}function Bl(t,o){if(t&1&&g(0,Pl,4,9,"ng-container",18)(1,jl,2,10,"ng-container",18),t&2){let e=o.$implicit,n=c(3);p("ngIf",n.isOptionGroup(e)),r(),p("ngIf",!n.isOptionGroup(e))}}function Nl(t,o){if(t&1&&m(0),t&2){let e=c(4);k(" ",e.emptyFilterMessageLabel," ")}}function Ql(t,o){t&1&&W(0,null,14)}function Hl(t,o){if(t&1&&g(0,Ql,2,0,"ng-container",29),t&2){let e=c(4);p("ngTemplateOutlet",e.emptyFilterTemplate||e._emptyFilterTemplate||e.emptyTemplate||e._emptyTemplate)}}function ql(t,o){if(t&1&&(s(0,"li",53),g(1,Nl,1,1)(2,Hl,1,1,"ng-container"),a()),t&2){let e=c().options,n=c(2);p("ngStyle",L(2,Tt,e.itemSize+"px")),r(),w(!n.emptyFilterTemplate&&!n._emptyFilterTemplate&&!n.emptyTemplate?1:2)}}function Ul(t,o){if(t&1&&m(0),t&2){let e=c(4);k(" ",e.emptyMessageLabel," ")}}function Wl(t,o){t&1&&W(0,null,15)}function Gl(t,o){if(t&1&&g(0,Wl,2,0,"ng-container",29),t&2){let e=c(4);p("ngTemplateOutlet",e.emptyTemplate||e._emptyTemplate)}}function Kl(t,o){if(t&1&&(s(0,"li",53),g(1,Ul,1,1)(2,Gl,1,1,"ng-container"),a()),t&2){let e=c().options,n=c(2);p("ngStyle",L(2,Tt,e.itemSize+"px")),r(),w(!n.emptyTemplate&&!n._emptyTemplate?1:2)}}function Zl(t,o){if(t&1&&(s(0,"ul",48,13),g(2,Bl,2,2,"ng-template",49)(3,ql,3,4,"li",50)(4,Kl,3,4,"li",50),a()),t&2){let e=o.$implicit,n=o.options,i=c(2);$e(n.contentStyle),p("ngClass",n.contentStyleClass),D("id",i.id+"_list")("aria-label",i.listLabel),r(2),p("ngForOf",e),r(),p("ngIf",i.filterValue&&i.isEmpty()),r(),p("ngIf",!i.filterValue&&i.isEmpty())}}function Yl(t,o){t&1&&W(0)}function Xl(t,o){if(t&1){let e=y();s(0,"div",40)(1,"span",41,6),_("focus",function(i){h(e);let l=c();return f(l.onFirstHiddenFocus(i))}),a(),g(3,bl,1,0,"ng-container",29)(4,Vl,4,2,"div",42),s(5,"div",43),g(6,Ml,5,10,"p-scroller",44)(7,Rl,2,6,"ng-container",18)(8,Zl,5,8,"ng-template",null,7,J),a(),g(10,Yl,1,0,"ng-container",29),s(11,"span",41,8),_("focus",function(i){h(e);let l=c();return f(l.onLastHiddenFocus(i))}),a()()}if(t&2){let e=c();U(e.panelStyleClass),p("ngClass","p-select-overlay p-component")("ngStyle",e.panelStyle),r(),D("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0),r(2),p("ngTemplateOutlet",e.headerTemplate||e._headerTemplate),r(),p("ngIf",e.filter),r(),Dt("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),r(),p("ngIf",e.virtualScroll),r(),p("ngIf",!e.virtualScroll),r(3),p("ngTemplateOutlet",e.footerTemplate||e._footerTemplate),r(),D("tabindex",0)("data-p-hidden-accessible",!0)("data-p-hidden-focusable",!0)}}var Jl=({dt:t})=>`
.p-select {
    display: inline-flex;
    cursor: pointer;
    position: relative;
    user-select: none;
    background: ${t("select.background")};
    border: 1px solid ${t("select.border.color")};
    transition: background ${t("select.transition.duration")}, color ${t("select.transition.duration")}, border-color ${t("select.transition.duration")},
        outline-color ${t("select.transition.duration")}, box-shadow ${t("select.transition.duration")};
    border-radius: ${t("select.border.radius")};
    outline-color: transparent;
    box-shadow: ${t("select.shadow")};
}

.p-select.ng-invalid.ng-dirty {
    border-color: ${t("select.invalid.border.color")};
}

.p-select:not(.p-disabled):hover {
    border-color: ${t("select.hover.border.color")};
}

.p-select:not(.p-disabled).p-focus {
    border-color: ${t("select.focus.border.color")};
    box-shadow: ${t("select.focus.ring.shadow")};
    outline: ${t("select.focus.ring.width")} ${t("select.focus.ring.style")} ${t("select.focus.ring.color")};
    outline-offset: ${t("select.focus.ring.offset")};
}

.p-select.p-variant-filled {
    background: ${t("select.filled.background")};
}

.p-select.p-variant-filled:not(.p-disabled):hover {
    background: ${t("select.filled.hover.background")};
}

.p-select.p-variant-filled.p-focus {
    background: ${t("select.filled.focus.background")};
}

.p-select.p-disabled {
    opacity: 1;
    background: ${t("select.disabled.background")};
}

.p-select-clear-icon {
    position: absolute;
    top: 50%;
    margin-top: -0.5rem;
    color: ${t("select.clear.icon.color")};
    inset-inline-end: ${t("select.dropdown.width")};
}

.p-select-dropdown {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    background: transparent;
    color: ${t("select.dropdown.color")};
    width: ${t("select.dropdown.width")};
    border-start-end-radius: ${t("select.border.radius")};
    border-end-end-radius: ${t("select.border.radius")};
}

.p-select-label {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    flex: 1 1 auto;
    width: 1%;
    padding: ${t("select.padding.y")} ${t("select.padding.x")};
    text-overflow: ellipsis;
    cursor: pointer;
    color: ${t("select.color")};
    background: transparent;
    border: 0 none;
    outline: 0 none;
}

.p-select-label.p-placeholder {
    color: ${t("select.placeholder.color")};
}

.p-select.ng-invalid.ng-dirty .p-select-label.p-placeholder {
    color: ${t("select.invalid.placeholder.color")};
}

.p-select:has(.p-select-clear-icon) .p-select-label {
    padding-inline-end: calc(1rem + ${t("select.padding.x")});
}

.p-select.p-disabled .p-select-label {
    color: ${t("select.disabled.color")};
}

.p-select-label-empty {
    overflow: hidden;
    opacity: 0;
}

input.p-select-label {
    cursor: default;
}

.p-select .p-select-overlay {
    min-width: 100%;
}

.p-select-overlay {
    cursor: default;
    background: ${t("select.overlay.background")};
    color: ${t("select.overlay.color")};
    border: 1px solid ${t("select.overlay.border.color")};
    border-radius: ${t("select.overlay.border.radius")};
    box-shadow: ${t("select.overlay.shadow")};
}

.p-select-header {
    padding: ${t("select.list.header.padding")};
}

.p-select-filter {
    width: 100%;
}

.p-select-list-container {
    overflow: auto;
}

.p-select-option-group {
    cursor: auto;
    margin: 0;
    padding: ${t("select.option.group.padding")};
    background: ${t("select.option.group.background")};
    color: ${t("select.option.group.color")};
    font-weight: ${t("select.option.group.font.weight")};
}

.p-select-list {
    margin: 0;
    padding: 0;
    list-style-type: none;
    padding: ${t("select.list.padding")};
    gap: ${t("select.list.gap")};
    display: flex;
    flex-direction: column;
}

.p-select-option {
    cursor: pointer;
    font-weight: normal;
    white-space: nowrap;
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    padding: ${t("select.option.padding")};
    border: 0 none;
    color: ${t("select.option.color")};
    background: transparent;
    transition: background ${t("select.transition.duration")}, color ${t("select.transition.duration")}, border-color ${t("select.transition.duration")},
            box-shadow ${t("select.transition.duration")}, outline-color ${t("select.transition.duration")};
    border-radius: ${t("select.option.border.radius")};
}

.p-select-option:not(.p-select-option-selected):not(.p-disabled).p-focus {
    background: ${t("select.option.focus.background")};
    color: ${t("select.option.focus.color")};
}

.p-select-option.p-select-option-selected {
    background: ${t("select.option.selected.background")};
    color: ${t("select.option.selected.color")};
}

.p-select-option.p-select-option-selected.p-focus {
    background: ${t("select.option.selected.focus.background")};
    color: ${t("select.option.selected.focus.color")};
}

.p-select-option-check-icon {
    position: relative;
    margin-inline-start: ${t("select.checkmark.gutter.start")};
    margin-inline-end: ${t("select.checkmark.gutter.end")};
    color: ${t("select.checkmark.color")};
}

.p-select-empty-message {
    padding: ${t("select.empty.message.padding")};
}

.p-select-fluid {
    display: flex;
}

.p-select-sm .p-select-label {
    font-size: ${t("select.sm.font.size")};
    padding-block: ${t("select.sm.padding.y")};
    padding-inline: ${t("select.sm.padding.x")};
}

.p-select-sm .p-select-dropdown .p-icon {
    font-size: ${t("select.sm.font.size")};
    width: ${t("select.sm.font.size")};
    height: ${t("select.sm.font.size")};
}

.p-select-lg .p-select-label {
    font-size: ${t("select.lg.font.size")};
    padding-block: ${t("select.lg.padding.y")};
    padding-inline: ${t("select.lg.padding.x")};
}

.p-select-lg .p-select-dropdown .p-icon {
    font-size: ${t("select.lg.font.size")};
    width: ${t("select.lg.font.size")};
    height: ${t("select.lg.font.size")};
}
`,es={root:({instance:t})=>["p-select p-component p-inputwrapper",{"p-disabled":t.disabled,"p-variant-filled":t.variant==="filled"||t.config.inputVariant()==="filled"||t.config.inputStyle()==="filled","p-focus":t.focused,"p-inputwrapper-filled":t.modelValue()!==void 0&&t.modelValue()!==null,"p-inputwrapper-focus":t.focused||t.overlayVisible,"p-select-open":t.overlayVisible,"p-select-fluid":t.hasFluid,"p-select-sm p-inputfield-sm":t.size==="small","p-select-lg p-inputfield-lg":t.size==="large"}],label:({instance:t,props:o})=>["p-select-label",{"p-placeholder":!o.editable&&t.label===o.placeholder,"p-select-label-empty":!o.editable&&!t.$slots.value&&(t.label==="p-emptylabel"||t.label.length===0)}],clearIcon:"p-select-clear-icon",dropdown:"p-select-dropdown",loadingicon:"p-select-loading-icon",dropdownIcon:"p-select-dropdown-icon",overlay:"p-select-overlay p-component",header:"p-select-header",pcFilter:"p-select-filter",listContainer:"p-select-list-container",list:"p-select-list",optionGroup:"p-select-option-group",optionGroupLabel:"p-select-option-group-label",option:({instance:t,props:o,state:e,option:n,focusedOption:i})=>["p-select-option",{"p-select-option-selected":t.isSelected(n)&&o.highlightOnSelect,"p-focus":e.focusedOptionIndex===i,"p-disabled":t.isOptionDisabled(n)}],optionLabel:"p-select-option-label",optionCheckIcon:"p-select-option-check-icon",optionBlankIcon:"p-select-option-blank-icon",emptyMessage:"p-select-empty-message"},un=(()=>{class t extends ve{name="select";theme=Jl;classes=es;static \u0275fac=(()=>{let e;return function(i){return(e||(e=B(t)))(i||t)}})();static \u0275prov=me({token:t,factory:t.\u0275fac})}return t})();var ts={provide:jt,useExisting:Vt(()=>Wt),multi:!0},is=(()=>{class t extends ue{id;option;selected;focused;label;disabled;visible;itemSize;ariaPosInset;ariaSetSize;template;checkmark;onClick=new M;onMouseEnter=new M;onOptionClick(e){this.onClick.emit(e)}onOptionMouseEnter(e){this.onMouseEnter.emit(e)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=B(t)))(i||t)}})();static \u0275cmp=V({type:t,selectors:[["p-selectItem"]],inputs:{id:"id",option:"option",selected:[2,"selected","selected",E],focused:[2,"focused","focused",E],label:"label",disabled:[2,"disabled","disabled",E],visible:[2,"visible","visible",E],itemSize:[2,"itemSize","itemSize",st],ariaPosInset:"ariaPosInset",ariaSetSize:"ariaSetSize",template:"template",checkmark:[2,"checkmark","checkmark",E]},outputs:{onClick:"onClick",onMouseEnter:"onMouseEnter"},features:[G],decls:4,vars:22,consts:[["role","option","pRipple","",3,"click","mouseenter","id","ngStyle","ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["styleClass","p-select-option-check-icon",4,"ngIf"],["styleClass","p-select-option-blank-icon",4,"ngIf"],["styleClass","p-select-option-check-icon"],["styleClass","p-select-option-blank-icon"]],template:function(n,i){n&1&&(s(0,"li",0),_("click",function(d){return i.onOptionClick(d)})("mouseenter",function(d){return i.onOptionMouseEnter(d)}),g(1,Co,3,2,"ng-container",1)(2,wo,2,1,"span",1)(3,To,1,0,"ng-container",2),a()),n&2&&(p("id",i.id)("ngStyle",L(14,Tt,i.itemSize+"px"))("ngClass",Ee(16,yo,i.selected&&!i.checkmark,i.disabled,i.focused)),D("aria-label",i.label)("aria-setsize",i.ariaSetSize)("aria-posinset",i.ariaPosInset)("aria-selected",i.selected)("data-p-focused",i.focused)("data-p-highlight",i.selected)("data-p-disabled",i.disabled),r(),p("ngIf",i.checkmark),r(),p("ngIf",!i.template),r(),p("ngTemplateOutlet",i.template)("ngTemplateOutletContext",L(20,fi,i.option)))},dependencies:[te,Z,ee,Qe,at,K,Hi,Ht,Ji],encapsulation:2})}return t})(),Wt=(()=>{class t extends ue{zone;filterService;id;scrollHeight="200px";filter;name;style;panelStyle;styleClass;panelStyleClass;readonly;required;editable;appendTo;tabindex=0;set placeholder(e){this._placeholder.set(e)}get placeholder(){return this._placeholder.asReadonly()}loadingIcon;filterPlaceholder;filterLocale;variant;inputId;dataKey;filterBy;filterFields;autofocus;resetFilterOnHide=!1;checkmark=!1;dropdownIcon;loading=!1;optionLabel;optionValue;optionDisabled;optionGroupLabel="label";optionGroupChildren="items";autoDisplayFirst=!0;group;showClear;emptyFilterMessage="";emptyMessage="";lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;size;overlayOptions;ariaFilterLabel;ariaLabel;ariaLabelledBy;filterMatchMode="contains";maxlength;tooltip="";tooltipPosition="right";tooltipPositionStyle="absolute";tooltipStyleClass;focusOnHover=!0;selectOnFocus=!1;autoOptionFocus=!1;autofocusFilter=!0;fluid;get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.log("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}_itemSize;get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.log("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}_autoZIndex;get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.log("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}_baseZIndex;get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.log("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}_showTransitionOptions;get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.log("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}_hideTransitionOptions;get filterValue(){return this._filterValue()}set filterValue(e){setTimeout(()=>{this._filterValue.set(e)})}get options(){return this._options()}set options(e){Di(e,this._options())||this._options.set(e)}onChange=new M;onFilter=new M;onFocus=new M;onBlur=new M;onClick=new M;onShow=new M;onHide=new M;onClear=new M;onLazyLoad=new M;_componentStyle=b(un);filterViewChild;focusInputViewChild;editableInputViewChild;itemsViewChild;scroller;overlayViewChild;firstHiddenFocusableElementOnOverlay;lastHiddenFocusableElementOnOverlay;get hasFluid(){let n=this.el.nativeElement.closest("p-fluid");return this.fluid||!!n}get hostClass(){return this._componentStyle.classes.root({instance:this}).map(n=>typeof n=="string"?n:Object.keys(n).filter(i=>n[i]).join(" ")).join(" ")+" "+this.styleClass}get hostStyle(){return this.style}_disabled;itemsWrapper;itemTemplate;groupTemplate;loaderTemplate;selectedItemTemplate;headerTemplate;filterTemplate;footerTemplate;emptyFilterTemplate;emptyTemplate;dropdownIconTemplate;loadingIconTemplate;clearIconTemplate;filterIconTemplate;onIconTemplate;offIconTemplate;cancelIconTemplate;templates;_itemTemplate;_selectedItemTemplate;_headerTemplate;_filterTemplate;_footerTemplate;_emptyFilterTemplate;_emptyTemplate;_groupTemplate;_loaderTemplate;_dropdownIconTemplate;_loadingIconTemplate;_clearIconTemplate;_filterIconTemplate;_cancelIconTemplate;_onIconTemplate;_offIconTemplate;filterOptions;_options=H(null);_placeholder=H(void 0);modelValue=H(null);value;onModelChange=()=>{};onModelTouched=()=>{};hover;focused;overlayVisible;optionsChanged;panel;dimensionsUpdated;hoveredItem;selectedOptionUpdated;_filterValue=H(null);searchValue;searchIndex;searchTimeout;previousSearchChar;currentSearchChar;preventModelTouched;focusedOptionIndex=H(-1);labelId;listId;clicked=H(!1);get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Pt.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Pt.EMPTY_FILTER_MESSAGE)}get isVisibleClearIcon(){return this.modelValue()!=null&&this.hasSelectedOption()&&this.showClear&&!this.disabled}get listLabel(){return this.config.getTranslation(Pt.ARIA).listLabel}get rootClass(){return this._componentStyle.classes.root({instance:this})}get inputClass(){let e=this.label();return{"p-select-label":!0,"p-placeholder":this.placeholder()&&e===this.placeholder(),"p-select-label-empty":!this.editable&&!this.selectedItemTemplate&&(e==null||e==="p-emptylabel"||e.length===0)}}get panelClass(){return{"p-dropdown-panel p-component":!0,"p-input-filled":this.config.inputStyle()==="filled"||this.config.inputVariant()==="filled","p-ripple-disabled":this.config.ripple()===!1}}get focusedOptionId(){return this.focusedOptionIndex()!==-1?`${this.id}_${this.focusedOptionIndex()}`:null}visibleOptions=Be(()=>{let e=this.getAllVisibleAndNonVisibleOptions();if(this._filterValue()){let i=!(this.filterBy||this.optionLabel)&&!this.filterFields&&!this.optionValue?this.options.filter(l=>l.label?l.label.toString().toLowerCase().indexOf(this._filterValue().toLowerCase().trim())!==-1:l.toString().toLowerCase().indexOf(this._filterValue().toLowerCase().trim())!==-1):this.filterService.filter(e,this.searchFields(),this._filterValue().trim(),this.filterMatchMode,this.filterLocale);if(this.group){let l=this.options||[],d=[];return l.forEach(x=>{let S=this.getOptionGroupChildren(x).filter(A=>i.includes(A));S.length>0&&d.push(pe(j({},x),{[typeof this.optionGroupChildren=="string"?this.optionGroupChildren:"items"]:[...S]}))}),this.flatOptions(d)}return i}return e});label=Be(()=>{let e=this.getAllVisibleAndNonVisibleOptions(),n=e.findIndex(i=>this.isOptionValueEqualsModelValue(i));return n!==-1?this.getOptionLabel(e[n]):this.placeholder()||"p-emptylabel"});filled=Be(()=>typeof this.modelValue()=="string"?!!this.modelValue():this.label()!=="p-emptylabel"&&this.modelValue()!==void 0&&this.modelValue()!==null);selectedOption;editableInputValue=Be(()=>this.getOptionLabel(this.selectedOption)||this.modelValue()||"");constructor(e,n){super(),this.zone=e,this.filterService=n,be(()=>{let i=this.modelValue(),l=this.visibleOptions();if(l&&Rt(l)){let d=this.findSelectedOptionIndex();(d!==-1||i===void 0||typeof i=="string"&&i.length===0||this.isModelValueNotSet()||this.editable)&&(this.selectedOption=l[d])}li(l)&&(i===void 0||this.isModelValueNotSet())&&Rt(this.selectedOption)&&(this.selectedOption=null),i!==void 0&&this.editable&&this.updateEditableLabel(),this.cd.markForCheck()})}isModelValueNotSet(){return this.modelValue()===null&&!this.isOptionValueEqualsModelValue(this.selectedOption)}getAllVisibleAndNonVisibleOptions(){return this.group?this.flatOptions(this.options):this.options||[]}ngOnInit(){super.ngOnInit(),this.id=this.id||$t("pn_id_"),this.autoUpdateModel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this._itemTemplate=e.template;break;case"selectedItem":this._selectedItemTemplate=e.template;break;case"header":this._headerTemplate=e.template;break;case"filter":this._filterTemplate=e.template;break;case"footer":this._footerTemplate=e.template;break;case"emptyfilter":this._emptyFilterTemplate=e.template;break;case"empty":this._emptyTemplate=e.template;break;case"group":this._groupTemplate=e.template;break;case"loader":this._loaderTemplate=e.template;break;case"dropdownicon":this._dropdownIconTemplate=e.template;break;case"loadingicon":this._loadingIconTemplate=e.template;break;case"clearicon":this._clearIconTemplate=e.template;break;case"filtericon":this._filterIconTemplate=e.template;break;case"cancelicon":this._cancelIconTemplate=e.template;break;case"onicon":this._onIconTemplate=e.template;break;case"officon":this._offIconTemplate=e.template;break;default:this._itemTemplate=e.template;break}})}ngAfterViewChecked(){if(this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper){let e=We(this.overlayViewChild?.overlayViewChild?.nativeElement,"li.p-select-option-selected");e&&Fi(this.itemsWrapper,e),this.selectedOptionUpdated=!1}}flatOptions(e){return(e||[]).reduce((n,i,l)=>{n.push({optionGroup:i,group:!0,index:l});let d=this.getOptionGroupChildren(i);return d&&d.forEach(x=>n.push(x)),n},[])}autoUpdateModel(){if(this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption()&&(this.focusedOptionIndex.set(this.findFirstFocusedOptionIndex()),this.onOptionSelect(null,this.visibleOptions()[this.focusedOptionIndex()],!1)),this.autoDisplayFirst&&(this.modelValue()===null||this.modelValue()===void 0)&&!this.placeholder()){let e=this.findFirstOptionIndex();this.onOptionSelect(null,this.visibleOptions()[e],!1,!0)}}onOptionSelect(e,n,i=!0,l=!1){if(!this.isSelected(n)){let d=this.getOptionValue(n);this.updateModel(d,e),this.focusedOptionIndex.set(this.findSelectedOptionIndex()),l===!1&&this.onChange.emit({originalEvent:e,value:d})}i&&this.hide(!0)}onOptionMouseEnter(e,n){this.focusOnHover&&this.changeFocusedOptionIndex(e,n)}updateModel(e,n){this.value=e,this.onModelChange(e),this.modelValue.set(e),this.selectedOptionUpdated=!0}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.allowModelChange()&&this.onModelChange(e),this.modelValue.set(this.value),this.updateEditableLabel(),this.cd.markForCheck()}allowModelChange(){return!!this.modelValue()&&!this.placeholder()&&(this.modelValue()===void 0||this.modelValue()===null)&&!this.editable&&this.options&&this.options.length}isSelected(e){return this.isOptionValueEqualsModelValue(e)}isOptionValueEqualsModelValue(e){return this.isValidOption(e)&&Lt(this.modelValue(),this.getOptionValue(e),this.equalityKey())}ngAfterViewInit(){super.ngAfterViewInit(),this.editable&&this.updateEditableLabel(),this.updatePlaceHolderForFloatingLabel()}updatePlaceHolderForFloatingLabel(){let e=this.el.nativeElement.parentElement,n=e?.classList.contains("p-float-label");if(e&&n&&!this.selectedOption){let i=e.querySelector("label");i&&this._placeholder.set(i.textContent)}}updateEditableLabel(){this.editableInputViewChild&&(this.editableInputViewChild.nativeElement.value=this.getOptionLabel(this.selectedOption)||this.modelValue()||"")}clearEditableLabel(){this.editableInputViewChild&&(this.editableInputViewChild.nativeElement.value="")}getOptionIndex(e,n){return this.virtualScrollerDisabled?e:n&&n.getItemOptions(e).index}getOptionLabel(e){return this.optionLabel!==void 0&&this.optionLabel!==null?ft(e,this.optionLabel):e&&e.label!==void 0?e.label:e}getOptionValue(e){return this.optionValue&&this.optionValue!==null?ft(e,this.optionValue):!this.optionLabel&&e&&e.value!==void 0?e.value:e}isSelectedOptionEmpty(){return li(this.selectedOption)}isOptionDisabled(e){return this.getOptionValue(this.modelValue())===this.getOptionValue(e)||this.getOptionLabel(this.modelValue()===this.getOptionLabel(e))&&e.disabled===!1?!1:this.optionDisabled?ft(e,this.optionDisabled):e&&e.disabled!==void 0?e.disabled:!1}getOptionGroupLabel(e){return this.optionGroupLabel!==void 0&&this.optionGroupLabel!==null?ft(e,this.optionGroupLabel):e&&e.label!==void 0?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren!==void 0&&this.optionGroupChildren!==null?ft(e,this.optionGroupChildren):e.items}getAriaPosInset(e){return(this.optionGroupLabel?e-this.visibleOptions().slice(0,e).filter(n=>this.isOptionGroup(n)).length:e)+1}get ariaSetSize(){return this.visibleOptions().filter(e=>!this.isOptionGroup(e)).length}resetFilter(){this._filterValue.set(null),this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onContainerClick(e){this.disabled||this.readonly||this.loading||(this.focusInputViewChild?.nativeElement.focus({preventScroll:!0}),!(e.target.tagName==="INPUT"||e.target.getAttribute("data-pc-section")==="clearicon"||e.target.closest('[data-pc-section="clearicon"]'))&&((!this.overlayViewChild||!this.overlayViewChild.el.nativeElement.contains(e.target))&&(this.overlayVisible?this.hide(!0):this.show(!0)),this.onClick.emit(e),this.clicked.set(!0),this.cd.detectChanges()))}isEmpty(){return!this._options()||this.visibleOptions()&&this.visibleOptions().length===0}onEditableInput(e){let n=e.target.value;this.searchValue="",!this.searchOptions(e,n)&&this.focusedOptionIndex.set(-1),this.onModelChange(n),this.updateModel(n||null,e),setTimeout(()=>{this.onChange.emit({originalEvent:e,value:n})},1),!this.overlayVisible&&Rt(n)&&this.show()}show(e){this.overlayVisible=!0,this.focusedOptionIndex.set(this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():this.editable?-1:this.findSelectedOptionIndex()),e&&ke(this.focusInputViewChild?.nativeElement),this.cd.markForCheck()}onOverlayAnimationStart(e){if(e.toState==="visible"){if(this.itemsWrapper=We(this.overlayViewChild?.overlayViewChild?.nativeElement,this.virtualScroll?".p-scroller":".p-select-list-container"),this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild?.nativeElement),this.options&&this.options.length)if(this.virtualScroll){let n=this.modelValue()?this.focusedOptionIndex():-1;n!==-1&&this.scroller?.scrollToIndex(n)}else{let n=We(this.itemsWrapper,".p-select-option.p-select-option-selected");n&&n.scrollIntoView({block:"nearest",inline:"nearest"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&!this.editable&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e)}e.toState==="void"&&(this.itemsWrapper=null,this.onModelTouched(),this.onHide.emit(e))}hide(e){this.overlayVisible=!1,this.focusedOptionIndex.set(-1),this.clicked.set(!1),this.searchValue="",this.overlayOptions?.mode==="modal"&&ki(),this.filter&&this.resetFilterOnHide&&this.resetFilter(),e&&(this.focusInputViewChild&&ke(this.focusInputViewChild?.nativeElement),this.editable&&this.editableInputViewChild&&ke(this.editableInputViewChild?.nativeElement)),this.cd.markForCheck()}onInputFocus(e){if(this.disabled)return;this.focused=!0;let n=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.overlayVisible&&this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(n),this.overlayVisible&&this.scrollInView(this.focusedOptionIndex()),this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onKeyDown(e,n=!1){if(!(this.disabled||this.readonly||this.loading)){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,this.editable);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,this.editable);break;case"Delete":this.onDeleteKey(e);break;case"Home":this.onHomeKey(e,this.editable);break;case"End":this.onEndKey(e,this.editable);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Space":this.onSpaceKey(e,n);break;case"Enter":case"NumpadEnter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"Backspace":this.onBackspaceKey(e,this.editable);break;case"ShiftLeft":case"ShiftRight":break;default:!e.metaKey&&Ai(e.key)&&(!this.overlayVisible&&this.show(),!this.editable&&this.searchOptions(e,e.key));break}this.clicked.set(!1)}}onFilterKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e,!0);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":case"NumpadEnter":this.onEnterKey(e,!0);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e,!0);break;default:break}}onFilterBlur(e){this.focusedOptionIndex.set(-1)}onArrowDownKey(e){if(!this.overlayVisible)this.show(),this.editable&&this.changeFocusedOptionIndex(e,this.findSelectedOptionIndex());else{let n=this.focusedOptionIndex()!==-1?this.findNextOptionIndex(this.focusedOptionIndex()):this.clicked()?this.findFirstOptionIndex():this.findFirstFocusedOptionIndex();this.changeFocusedOptionIndex(e,n)}e.preventDefault(),e.stopPropagation()}changeFocusedOptionIndex(e,n){if(this.focusedOptionIndex()!==n&&(this.focusedOptionIndex.set(n),this.scrollInView(),this.selectOnFocus)){let i=this.visibleOptions()[n];this.onOptionSelect(e,i,!1)}}get virtualScrollerDisabled(){return!this.virtualScroll}scrollInView(e=-1){let n=e!==-1?`${this.id}_${e}`:this.focusedOptionId;if(this.itemsViewChild&&this.itemsViewChild.nativeElement){let i=We(this.itemsViewChild.nativeElement,`li[id="${n}"]`);i?i.scrollIntoView&&i.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||setTimeout(()=>{this.virtualScroll&&this.scroller?.scrollToIndex(e!==-1?e:this.focusedOptionIndex())},0)}}hasSelectedOption(){return this.modelValue()!==void 0}isValidSelectedOption(e){return this.isValidOption(e)&&this.isSelected(e)}equalityKey(){return this.optionValue?null:this.dataKey}findFirstFocusedOptionIndex(){let e=this.findSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e}findFirstOptionIndex(){return this.visibleOptions().findIndex(e=>this.isValidOption(e))}findSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}findNextOptionIndex(e){let n=e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(i=>this.isValidOption(i)):-1;return n>-1?n+e+1:e}findPrevOptionIndex(e){let n=e>0?si(this.visibleOptions().slice(0,e),i=>this.isValidOption(i)):-1;return n>-1?n:e}findLastOptionIndex(){return si(this.visibleOptions(),e=>this.isValidOption(e))}findLastFocusedOptionIndex(){let e=this.findSelectedOptionIndex();return e<0?this.findLastOptionIndex():e}isValidOption(e){return e!=null&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))}isOptionGroup(e){return this.optionGroupLabel!==void 0&&this.optionGroupLabel!==null&&e.optionGroup!==void 0&&e.optionGroup!==null&&e.group}onArrowUpKey(e,n=!1){if(e.altKey&&!n){if(this.focusedOptionIndex()!==-1){let i=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,i)}this.overlayVisible&&this.hide()}else{let i=this.focusedOptionIndex()!==-1?this.findPrevOptionIndex(this.focusedOptionIndex()):this.clicked()?this.findLastOptionIndex():this.findLastFocusedOptionIndex();this.changeFocusedOptionIndex(e,i),!this.overlayVisible&&this.show()}e.preventDefault(),e.stopPropagation()}onArrowLeftKey(e,n=!1){n&&this.focusedOptionIndex.set(-1)}onDeleteKey(e){this.showClear&&(this.clear(e),e.preventDefault())}onHomeKey(e,n=!1){if(n){let i=e.currentTarget;e.shiftKey?i.setSelectionRange(0,i.value.length):(i.setSelectionRange(0,0),this.focusedOptionIndex.set(-1))}else this.changeFocusedOptionIndex(e,this.findFirstOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()}onEndKey(e,n=!1){if(n){let i=e.currentTarget;if(e.shiftKey)i.setSelectionRange(0,i.value.length);else{let l=i.value.length;i.setSelectionRange(l,l),this.focusedOptionIndex.set(-1)}}else this.changeFocusedOptionIndex(e,this.findLastOptionIndex()),!this.overlayVisible&&this.show();e.preventDefault()}onPageDownKey(e){this.scrollInView(this.visibleOptions().length-1),e.preventDefault()}onPageUpKey(e){this.scrollInView(0),e.preventDefault()}onSpaceKey(e,n=!1){!this.editable&&!n&&this.onEnterKey(e)}onEnterKey(e,n=!1){if(!this.overlayVisible)this.focusedOptionIndex.set(-1),this.onArrowDownKey(e);else{if(this.focusedOptionIndex()!==-1){let i=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,i)}!n&&this.hide()}e.preventDefault()}onEscapeKey(e){this.overlayVisible&&this.hide(!0),e.preventDefault(),e.stopPropagation()}onTabKey(e,n=!1){if(!n)if(this.overlayVisible&&this.hasFocusableElements())ke(e.shiftKey?this.lastHiddenFocusableElementOnOverlay.nativeElement:this.firstHiddenFocusableElementOnOverlay.nativeElement),e.preventDefault();else{if(this.focusedOptionIndex()!==-1&&this.overlayVisible){let i=this.visibleOptions()[this.focusedOptionIndex()];this.onOptionSelect(e,i)}this.overlayVisible&&this.hide(this.filter)}e.stopPropagation()}onFirstHiddenFocus(e){let n=e.relatedTarget===this.focusInputViewChild?.nativeElement?Ii(this.overlayViewChild.el?.nativeElement,":not(.p-hidden-focusable)"):this.focusInputViewChild?.nativeElement;ke(n)}onLastHiddenFocus(e){let n=e.relatedTarget===this.focusInputViewChild?.nativeElement?Vi(this.overlayViewChild?.overlayViewChild?.nativeElement,':not([data-p-hidden-focusable="true"])'):this.focusInputViewChild?.nativeElement;ke(n)}hasFocusableElements(){return Si(this.overlayViewChild.overlayViewChild.nativeElement,':not([data-p-hidden-focusable="true"])').length>0}onBackspaceKey(e,n=!1){n&&!this.overlayVisible&&this.show()}searchFields(){return this.filterBy?.split(",")||this.filterFields||[this.optionLabel]}searchOptions(e,n){this.searchValue=(this.searchValue||"")+n;let i=-1,l=!1;return i=this.visibleOptions().findIndex(d=>this.isOptionMatched(d)),i!==-1&&(l=!0),i===-1&&this.focusedOptionIndex()===-1&&(i=this.findFirstFocusedOptionIndex()),i!==-1&&setTimeout(()=>{this.changeFocusedOptionIndex(e,i)}),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),l}isOptionMatched(e){return this.isValidOption(e)&&this.getOptionLabel(e).toString().toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))}onFilterInputChange(e){let n=e.target.value;this._filterValue.set(n),this.focusedOptionIndex.set(-1),this.onFilter.emit({originalEvent:e,filter:this._filterValue()}),!this.virtualScrollerDisabled&&this.scroller.scrollToIndex(0),setTimeout(()=>{this.overlayViewChild.alignOverlay()}),this.cd.markForCheck()}applyFocus(){this.editable?We(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():ke(this.focusInputViewChild?.nativeElement)}focus(){this.applyFocus()}clear(e){this.updateModel(null,e),this.clearEditableLabel(),this.onModelTouched(),this.onChange.emit({originalEvent:e,value:this.value}),this.onClear.emit(e),this.resetFilter()}static \u0275fac=function(n){return new(n||t)(He(ht),He(Mi))};static \u0275cmp=V({type:t,selectors:[["p-select"]],contentQueries:function(n,i,l){if(n&1&&(O(l,ko,4),O(l,So,4),O(l,Io,4),O(l,Vo,4),O(l,Eo,4),O(l,mn,4),O(l,Fo,4),O(l,Do,4),O(l,Oo,4),O(l,Ao,4),O(l,Mo,4),O(l,zo,4),O(l,Ro,4),O(l,Lo,4),O(l,$o,4),O(l,Po,4),O(l,Ge,4)),n&2){let d;v(d=C())&&(i.itemTemplate=d.first),v(d=C())&&(i.groupTemplate=d.first),v(d=C())&&(i.loaderTemplate=d.first),v(d=C())&&(i.selectedItemTemplate=d.first),v(d=C())&&(i.headerTemplate=d.first),v(d=C())&&(i.filterTemplate=d.first),v(d=C())&&(i.footerTemplate=d.first),v(d=C())&&(i.emptyFilterTemplate=d.first),v(d=C())&&(i.emptyTemplate=d.first),v(d=C())&&(i.dropdownIconTemplate=d.first),v(d=C())&&(i.loadingIconTemplate=d.first),v(d=C())&&(i.clearIconTemplate=d.first),v(d=C())&&(i.filterIconTemplate=d.first),v(d=C())&&(i.onIconTemplate=d.first),v(d=C())&&(i.offIconTemplate=d.first),v(d=C())&&(i.cancelIconTemplate=d.first),v(d=C())&&(i.templates=d)}},viewQuery:function(n,i){if(n&1&&(I(mn,5),I(jo,5),I(Bo,5),I(No,5),I(Qo,5),I(Ho,5),I(qo,5),I(Uo,5)),n&2){let l;v(l=C())&&(i.filterViewChild=l.first),v(l=C())&&(i.focusInputViewChild=l.first),v(l=C())&&(i.editableInputViewChild=l.first),v(l=C())&&(i.itemsViewChild=l.first),v(l=C())&&(i.scroller=l.first),v(l=C())&&(i.overlayViewChild=l.first),v(l=C())&&(i.firstHiddenFocusableElementOnOverlay=l.first),v(l=C())&&(i.lastHiddenFocusableElementOnOverlay=l.first)}},hostVars:5,hostBindings:function(n,i){n&1&&_("click",function(d){return i.onContainerClick(d)}),n&2&&(D("id",i.id),$e(i.hostStyle),U(i.hostClass))},inputs:{id:"id",scrollHeight:"scrollHeight",filter:[2,"filter","filter",E],name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:[2,"readonly","readonly",E],required:[2,"required","required",E],editable:[2,"editable","editable",E],appendTo:"appendTo",tabindex:[2,"tabindex","tabindex",st],placeholder:"placeholder",loadingIcon:"loadingIcon",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",variant:"variant",inputId:"inputId",dataKey:"dataKey",filterBy:"filterBy",filterFields:"filterFields",autofocus:[2,"autofocus","autofocus",E],resetFilterOnHide:[2,"resetFilterOnHide","resetFilterOnHide",E],checkmark:[2,"checkmark","checkmark",E],dropdownIcon:"dropdownIcon",loading:[2,"loading","loading",E],optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:[2,"autoDisplayFirst","autoDisplayFirst",E],group:[2,"group","group",E],showClear:[2,"showClear","showClear",E],emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:[2,"lazy","lazy",E],virtualScroll:[2,"virtualScroll","virtualScroll",E],virtualScrollItemSize:[2,"virtualScrollItemSize","virtualScrollItemSize",st],virtualScrollOptions:"virtualScrollOptions",size:"size",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:[2,"maxlength","maxlength",st],tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",focusOnHover:[2,"focusOnHover","focusOnHover",E],selectOnFocus:[2,"selectOnFocus","selectOnFocus",E],autoOptionFocus:[2,"autoOptionFocus","autoOptionFocus",E],autofocusFilter:[2,"autofocusFilter","autofocusFilter",E],fluid:[2,"fluid","fluid",E],disabled:"disabled",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",filterValue:"filterValue",options:"options"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[N([ts,un]),G],decls:11,vars:15,consts:[["elseBlock",""],["overlay",""],["content",""],["focusInput",""],["defaultPlaceholder",""],["editableInput",""],["firstHiddenFocusableEl",""],["buildInItems",""],["lastHiddenFocusableEl",""],["builtInFilterElement",""],["filter",""],["scroller",""],["loader",""],["items",""],["emptyFilter",""],["empty",""],["role","combobox",3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","pAutoFocus","focus","blur","keydown",4,"ngIf"],["type","text","aria-haspopup","listbox",3,"ngClass","disabled","pAutoFocus","input","keydown","focus","blur",4,"ngIf"],[4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-select-dropdown"],[4,"ngIf","ngIfElse"],[3,"visibleChange","onAnimationStart","onHide","visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions"],["role","combobox",3,"focus","blur","keydown","ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","pAutoFocus"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["type","text","aria-haspopup","listbox",3,"input","keydown","focus","blur","ngClass","disabled","pAutoFocus"],["class","p-select-clear-icon",3,"click",4,"ngIf"],[1,"p-select-clear-icon",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngTemplateOutlet"],["aria-hidden","true",3,"ngClass",4,"ngIf"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true",3,"ngClass"],["aria-hidden","true"],["class","p-select-dropdown-icon",4,"ngIf"],["class","p-select-dropdown-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-select-dropdown-icon",3,"ngClass"],[3,"styleClass"],[1,"p-select-dropdown-icon"],[3,"ngClass","ngStyle"],["role","presentation",1,"p-hidden-accessible","p-hidden-focusable",3,"focus"],["class","p-select-header",3,"click",4,"ngIf"],[1,"p-select-list-container"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],[1,"p-select-header",3,"click"],["pInputText","","type","text","role","searchbox","autocomplete","off",1,"p-select-filter",3,"input","keydown","blur","pSize","value","variant"],[3,"onLazyLoad","items","itemSize","autoSize","lazy","options"],["role","listbox",1,"p-select-list",3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-select-empty-message","role","option",3,"ngStyle",4,"ngIf"],["role","option",1,"p-select-option-group",3,"ngStyle"],[3,"onClick","onMouseEnter","id","option","checkmark","selected","label","disabled","template","focused","ariaPosInset","ariaSetSize"],["role","option",1,"p-select-empty-message",3,"ngStyle"]],template:function(n,i){if(n&1){let l=y();g(0,el,6,20,"span",16)(1,tl,2,8,"input",17)(2,sl,3,2,"ng-container",18),s(3,"div",19),g(4,ml,3,2,"ng-container",20)(5,yl,2,2,"ng-template",null,0,J),a(),s(7,"p-overlay",21,1),Ve("visibleChange",function(x){return h(l),Ie(i.overlayVisible,x)||(i.overlayVisible=x),f(x)}),_("onAnimationStart",function(x){return h(l),f(i.onOverlayAnimationStart(x))})("onHide",function(){return h(l),f(i.hide())}),g(9,Xl,13,17,"ng-template",null,2,J),a()}if(n&2){let l,d=q(6);p("ngIf",!i.editable),r(),p("ngIf",i.editable),r(),p("ngIf",i.isVisibleClearIcon),r(),D("aria-expanded",(l=i.overlayVisible)!==null&&l!==void 0?l:!1)("data-pc-section","trigger"),r(),p("ngIf",i.loading)("ngIfElse",d),r(3),Se("visible",i.overlayVisible),p("options",i.overlayOptions)("target","@parent")("appendTo",i.appendTo)("autoZIndex",i.autoZIndex)("baseZIndex",i.baseZIndex)("showTransitionOptions",i.showTransitionOptions)("hideTransitionOptions",i.hideTransitionOptions)}},dependencies:[te,Z,Mt,ee,Qe,at,is,rn,et,Qi,Ni,ji,tn,Zi,mi,ui,pn,K],encapsulation:2,changeDetection:0})}return t})(),gn=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=_e({type:t});static \u0275inj=ge({imports:[Wt,K,K]})}return t})();var os=(t,o)=>o.id;function ls(t,o){t&1&&(s(0,"div",2),m(1,"Loading users..."),a())}function ss(t,o){if(t&1){let e=y();s(0,"div",5),_("click",function(){let i=h(e).$implicit,l=c(2);return f(l.onSelectedUser(i))}),s(1,"div",6)(2,"span",7),m(3),a(),s(4,"span",8),m(5),a()()()}if(t&2){let e=o.$implicit;r(3),R(e.name),r(2),R(e.email)}}function rs(t,o){if(t&1&&(s(0,"div",3),le(1,ss,6,2,"div",4,os),a()),t&2){let e,n=c();r(),se((e=n.users.value())==null?null:e.users)}}function as(t,o){t&1&&(s(0,"div",2),m(1,"No users found."),a())}var Gt=class t{ref=b(we);userService=b(Ki);divisionService=b(Gi);selectedUser=bi();currentUserPage=H(1);search=H("");reqeustDelay=311;debounceSearch=Wi(Ui(this.search).pipe(xi(this.reqeustDelay),yi()),{initialValue:""});isLoading=!1;users=Ne({request:()=>({page:this.currentUserPage(),q:this.debounceSearch()}),loader:({request:o,abortSignal:e})=>{let n=new URLSearchParams({limit:"20",q:String(o.q),page:String(o.page)}).toString(),i=Ut(e);return oe(this.userService.getUsers(n).pipe(It(i)))}});onSelectedUser(o){this.selectedUser.emit(o)}constructor(){be(()=>{console.log(this.users.value())})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["user-pick"]],outputs:{selectedUser:"selectedUser"},decls:5,vars:8,consts:[[1,"flex","h-full","flex-col","gap-4","p-4"],[3,"ngModelChange","size","ngModel","placeholder","isIcon","iconName"],[1,"text-center","text-sm","text-gray-500"],[1,"max-h-[300px]","space-y-2","overflow-y-auto"],[1,"flex","cursor-pointer","items-center","justify-between","rounded-md","border","border-gray-300","bg-white","p-3","text-sm","hover:bg-gray-100"],[1,"flex","cursor-pointer","items-center","justify-between","rounded-md","border","border-gray-300","bg-white","p-3","text-sm","hover:bg-gray-100",3,"click"],[1,"flex","flex-col"],[1,"font-medium","text-gray-800"],[1,"text-xs","text-gray-500"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"fc-input-text",1),Ve("ngModelChange",function(l){return Ie(n.search,l)||(n.search=l),l}),a(),g(2,ls,2,0,"div",2)(3,rs,3,0,"div",3)(4,as,2,0,"div",2),a()),e&2){let i,l;r(),p("size","small"),Se("ngModel",n.search),p("placeholder","Search User")("isIcon",!0)("iconName","search"),r(),w(n.users.isLoading()?2:-1),r(),w(!n.users.isLoading()&&((i=n.users.value())==null?null:i.users.length)>0?3:-1),r(),w(!n.users.isLoading()&&((l=n.users.value())==null||l.users==null?null:l.users.length)===0?4:-1)}},dependencies:[Ce,De,gt,Xi,on,yt],encapsulation:2})};var cs=["checkboxicon"],ds=["input"],ps=()=>({"p-checkbox-input":!0}),ms=t=>({checked:t,class:"p-checkbox-icon"});function us(t,o){if(t&1&&u(0,"span",8),t&2){let e=c(3);p("ngClass",e.checkboxIcon),D("data-pc-section","icon")}}function hs(t,o){t&1&&u(0,"CheckIcon",9),t&2&&(p("styleClass","p-checkbox-icon"),D("data-pc-section","icon"))}function fs(t,o){if(t&1&&($(0),g(1,us,1,2,"span",7)(2,hs,1,2,"CheckIcon",6),P()),t&2){let e=c(2);r(),p("ngIf",e.checkboxIcon),r(),p("ngIf",!e.checkboxIcon)}}function gs(t,o){t&1&&u(0,"MinusIcon",9),t&2&&(p("styleClass","p-checkbox-icon"),D("data-pc-section","icon"))}function _s(t,o){if(t&1&&($(0),g(1,fs,3,2,"ng-container",4)(2,gs,1,2,"MinusIcon",6),P()),t&2){let e=c();r(),p("ngIf",e.checked),r(),p("ngIf",e._indeterminate())}}function xs(t,o){}function ys(t,o){t&1&&g(0,xs,0,0,"ng-template")}var bs=({dt:t})=>`
.p-checkbox {
    position: relative;
    display: inline-flex;
    user-select: none;
    vertical-align: bottom;
    width: ${t("checkbox.width")};
    height: ${t("checkbox.height")};
}

.p-checkbox-input {
    cursor: pointer;
    appearance: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    padding: 0;
    margin: 0;
    opacity: 0;
    z-index: 1;
    outline: 0 none;
    border: 1px solid transparent;
    border-radius: ${t("checkbox.border.radius")};
}

.p-checkbox-box {
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: ${t("checkbox.border.radius")};
    border: 1px solid ${t("checkbox.border.color")};
    background: ${t("checkbox.background")};
    width: ${t("checkbox.width")};
    height: ${t("checkbox.height")};
    transition: background ${t("checkbox.transition.duration")}, color ${t("checkbox.transition.duration")}, border-color ${t("checkbox.transition.duration")}, box-shadow ${t("checkbox.transition.duration")}, outline-color ${t("checkbox.transition.duration")};
    outline-color: transparent;
    box-shadow: ${t("checkbox.shadow")};
}

.p-checkbox-icon {
    transition-duration: ${t("checkbox.transition.duration")};
    color: ${t("checkbox.icon.color")};
    font-size: ${t("checkbox.icon.size")};
    width: ${t("checkbox.icon.size")};
    height: ${t("checkbox.icon.size")};
}

.p-checkbox:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    border-color: ${t("checkbox.hover.border.color")};
}

.p-checkbox-checked .p-checkbox-box {
    border-color: ${t("checkbox.checked.border.color")};
    background: ${t("checkbox.checked.background")};
}

.p-checkbox-checked .p-checkbox-icon {
    color: ${t("checkbox.icon.checked.color")};
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    background: ${t("checkbox.checked.hover.background")};
    border-color: ${t("checkbox.checked.hover.border.color")};
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-icon {
    color: ${t("checkbox.icon.checked.hover.color")};
}

.p-checkbox:not(.p-disabled):has(.p-checkbox-input:focus-visible) .p-checkbox-box {
    border-color: ${t("checkbox.focus.border.color")};
    box-shadow: ${t("checkbox.focus.ring.shadow")};
    outline: ${t("checkbox.focus.ring.width")} ${t("checkbox.focus.ring.style")} ${t("checkbox.focus.ring.color")};
    outline-offset: ${t("checkbox.focus.ring.offset")};
}

.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:focus-visible) .p-checkbox-box {
    border-color: ${t("checkbox.checked.focus.border.color")};
}

p-checkBox.ng-invalid.ng-dirty .p-checkbox-box,
p-check-box.ng-invalid.ng-dirty .p-checkbox-box,
p-checkbox.ng-invalid.ng-dirty .p-checkbox-box {
    border-color: ${t("checkbox.invalid.border.color")};
}

.p-checkbox.p-variant-filled .p-checkbox-box {
    background: ${t("checkbox.filled.background")};
}

.p-checkbox-checked.p-variant-filled .p-checkbox-box {
    background: ${t("checkbox.checked.background")};
}

.p-checkbox-checked.p-variant-filled:not(.p-disabled):has(.p-checkbox-input:hover) .p-checkbox-box {
    background: ${t("checkbox.checked.hover.background")};
}

.p-checkbox.p-disabled {
    opacity: 1;
}

.p-checkbox.p-disabled .p-checkbox-box {
    background: ${t("checkbox.disabled.background")};
    border-color: ${t("checkbox.checked.disabled.border.color")};
}

.p-checkbox.p-disabled .p-checkbox-box .p-checkbox-icon {
    color: ${t("checkbox.icon.disabled.color")};
}

.p-checkbox-sm,
.p-checkbox-sm .p-checkbox-box {
    width: ${t("checkbox.sm.width")};
    height: ${t("checkbox.sm.height")};
}

.p-checkbox-sm .p-checkbox-icon {
    font-size: ${t("checkbox.icon.sm.size")};
    width: ${t("checkbox.icon.sm.size")};
    height: ${t("checkbox.icon.sm.size")};
}

.p-checkbox-lg,
.p-checkbox-lg .p-checkbox-box {
    width: ${t("checkbox.lg.width")};
    height: ${t("checkbox.lg.height")};
}

.p-checkbox-lg .p-checkbox-icon {
    font-size: ${t("checkbox.icon.lg.size")};
    width: ${t("checkbox.icon.lg.size")};
    height: ${t("checkbox.icon.lg.size")};
}
`,vs={root:({instance:t,props:o})=>["p-checkbox p-component",{"p-checkbox-checked":t.checked,"p-disabled":o.disabled,"p-invalid":o.invalid,"p-variant-filled":o.variant?o.variant==="filled":t.config.inputStyle==="filled"||t.config.inputVariant==="filled"}],box:"p-checkbox-box",input:"p-checkbox-input",icon:"p-checkbox-icon"},_n=(()=>{class t extends ve{name="checkbox";theme=bs;classes=vs;static \u0275fac=(()=>{let e;return function(i){return(e||(e=B(t)))(i||t)}})();static \u0275prov=me({token:t,factory:t.\u0275fac})}return t})();var Cs={provide:jt,useExisting:Vt(()=>Zt),multi:!0},Zt=(()=>{class t extends ue{value;name;disabled;binary;ariaLabelledBy;ariaLabel;tabindex;inputId;style;inputStyle;styleClass;inputClass;indeterminate=!1;size;formControl;checkboxIcon;readonly;required;autofocus;trueValue=!0;falseValue=!1;variant;onChange=new M;onFocus=new M;onBlur=new M;inputViewChild;get checked(){return this._indeterminate()?!1:this.binary?this.model===this.trueValue:Oi(this.value,this.model)}get containerClass(){return{"p-checkbox p-component":!0,"p-checkbox-checked p-highlight":this.checked,"p-disabled":this.disabled,"p-variant-filled":this.variant==="filled"||this.config.inputStyle()==="filled"||this.config.inputVariant()==="filled","p-checkbox-sm p-inputfield-sm":this.size==="small","p-checkbox-lg p-inputfield-lg":this.size==="large"}}_indeterminate=H(void 0);checkboxIconTemplate;templates;_checkboxIconTemplate;model;onModelChange=()=>{};onModelTouched=()=>{};focused=!1;_componentStyle=b(_n);ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"icon":this._checkboxIconTemplate=e.template;break;case"checkboxicon":this._checkboxIconTemplate=e.template;break}})}ngOnChanges(e){super.ngOnChanges(e),e.indeterminate&&this._indeterminate.set(e.indeterminate.currentValue)}updateModel(e){let n,i=this.injector.get(Ri,null,{optional:!0,self:!0}),l=i&&!this.formControl?i.value:this.model;this.binary?(n=this._indeterminate()?this.trueValue:this.checked?this.falseValue:this.trueValue,this.model=n,this.onModelChange(n)):(this.checked||this._indeterminate()?n=l.filter(d=>!Lt(d,this.value)):n=l?[...l,this.value]:[this.value],this.onModelChange(n),this.model=n,this.formControl&&this.formControl.setValue(n)),this._indeterminate()&&this._indeterminate.set(!1),this.onChange.emit({checked:n,originalEvent:e})}handleChange(e){this.readonly||this.updateModel(e)}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.onModelTouched()}focus(){this.inputViewChild.nativeElement.focus()}writeValue(e){this.model=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){setTimeout(()=>{this.disabled=e,this.cd.markForCheck()})}static \u0275fac=(()=>{let e;return function(i){return(e||(e=B(t)))(i||t)}})();static \u0275cmp=V({type:t,selectors:[["p-checkbox"],["p-checkBox"],["p-check-box"]],contentQueries:function(n,i,l){if(n&1&&(O(l,cs,4),O(l,Ge,4)),n&2){let d;v(d=C())&&(i.checkboxIconTemplate=d.first),v(d=C())&&(i.templates=d)}},viewQuery:function(n,i){if(n&1&&I(ds,5),n&2){let l;v(l=C())&&(i.inputViewChild=l.first)}},inputs:{value:"value",name:"name",disabled:[2,"disabled","disabled",E],binary:[2,"binary","binary",E],ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:[2,"tabindex","tabindex",st],inputId:"inputId",style:"style",inputStyle:"inputStyle",styleClass:"styleClass",inputClass:"inputClass",indeterminate:[2,"indeterminate","indeterminate",E],size:"size",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:[2,"readonly","readonly",E],required:[2,"required","required",E],autofocus:[2,"autofocus","autofocus",E],trueValue:"trueValue",falseValue:"falseValue",variant:"variant"},outputs:{onChange:"onChange",onFocus:"onFocus",onBlur:"onBlur"},features:[N([Cs,_n]),G,Et],decls:6,vars:29,consts:[["input",""],[3,"ngClass"],["type","checkbox",3,"focus","blur","change","value","checked","disabled","readonly","ngClass"],[1,"p-checkbox-box"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"styleClass",4,"ngIf"],["class","p-checkbox-icon",3,"ngClass",4,"ngIf"],[1,"p-checkbox-icon",3,"ngClass"],[3,"styleClass"]],template:function(n,i){if(n&1){let l=y();s(0,"div",1)(1,"input",2,0),_("focus",function(x){return h(l),f(i.onInputFocus(x))})("blur",function(x){return h(l),f(i.onInputBlur(x))})("change",function(x){return h(l),f(i.handleChange(x))}),a(),s(3,"div",3),g(4,_s,3,2,"ng-container",4)(5,ys,1,0,null,5),a()()}n&2&&($e(i.style),U(i.styleClass),p("ngClass",i.containerClass),D("data-p-highlight",i.checked)("data-p-checked",i.checked)("data-p-disabled",i.disabled),r(),$e(i.inputStyle),U(i.inputClass),p("value",i.value)("checked",i.checked)("disabled",i.disabled)("readonly",i.readonly)("ngClass",re(26,ps)),D("id",i.inputId)("name",i.name)("tabindex",i.tabindex)("required",i.required?!0:null)("aria-labelledby",i.ariaLabelledBy)("aria-label",i.ariaLabel),r(3),p("ngIf",!i.checkboxIconTemplate&&!i._checkboxIconTemplate),r(),p("ngTemplateOutlet",i.checkboxIconTemplate||i._checkboxIconTemplate)("ngTemplateOutletContext",L(27,ms,i.checked)))},dependencies:[te,Z,ee,Qe,Ht,en,K],encapsulation:2,changeDetection:0})}return t})(),xn=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=_e({type:t});static \u0275inj=ge({imports:[Zt,K,K]})}return t})();var ks=["assignUser"],Ss=(t,o)=>({"h-64 max-h-64":t,"h-48 max-h-48":o}),Is=()=>({standalone:!0});function Vs(t,o){if(t&1){let e=y();s(0,"div",30),_("click",function(i){return h(e),c(),q(17).click(),f(i.preventDefault())}),s(1,"div",31),u(2,"fc-icon",32),a(),s(3,"p",33),m(4," Add Documents or Images "),a(),s(5,"p",34),m(6,"Click to browse files"),a()()}t&2&&(r(2),p("icon","plus"))}function Es(t,o){t&1&&(s(0,"div",42),u(1,"fc-icon",49),a()),t&2&&(r(),p("icon","pdf"))}function Fs(t,o){t&1&&(s(0,"div",42),u(1,"fc-icon",50),a()),t&2&&(r(),p("icon","doc"))}function Ds(t,o){t&1&&(s(0,"div",42),u(1,"fc-icon",51),a()),t&2&&(r(),p("icon","xls"))}function Os(t,o){t&1&&(s(0,"div",42),u(1,"fc-icon",52),a()),t&2&&(r(),p("icon","zip"))}function As(t,o){t&1&&(s(0,"div",42),u(1,"fc-icon",53),a()),t&2&&(r(),p("icon","txt"))}function Ms(t,o){if(t&1){let e=y();s(0,"button",54),_("click",function(){h(e);let i=c().$implicit,l=c(2);return f(l.onImageClick(i.preview))}),u(1,"img",55),a()}if(t&2){let e=c().$implicit;r(),p("src",e.preview,X)}}function zs(t,o){t&1&&(s(0,"div",44),u(1,"fc-icon",56),a()),t&2&&(r(),p("icon","def"))}function Rs(t,o){if(t&1){let e=y();s(0,"div",40)(1,"div",41),g(2,Es,2,1,"div",42)(3,Fs,2,1,"div",42)(4,Ds,2,1,"div",42)(5,Os,2,1,"div",42)(6,As,2,1,"div",42)(7,Ms,2,1,"button",43)(8,zs,2,1,"div",44),a(),s(9,"div",45)(10,"a",46),m(11),a()(),s(12,"button",47),_("click",function(){let i=h(e),l=i.$implicit,d=i.$index,x=c(2);return f(x.deleteFilefromCapturedFiles(d,l.id,l.name))}),u(13,"fc-icon",48),a()()}if(t&2){let e=o.$implicit;r(2),w(e.name.endsWith(".pdf")?2:e.name.endsWith(".doc")||e.name.endsWith(".docx")?3:e.name.endsWith(".xls")||e.name.endsWith(".xlsx")?4:e.name.endsWith(".zip")||e.name.endsWith(".rar")?5:e.name.endsWith(".txt")?6:e.name.endsWith(".png")||e.name.endsWith(".jpg")||e.name.endsWith(".jpeg")||e.name.endsWith(".gif")||e.name.endsWith(".webp")?7:8),r(8),p("href",e.preview,X),r(),k(" ",e.name," "),r(2),p("icon","trash")}}function Ls(t,o){if(t&1){let e=y();s(0,"div",19)(1,"div",35)(2,"button",36),_("click",function(i){return h(e),c(),q(17).click(),f(i.preventDefault())}),u(3,"fc-icon",37),s(4,"span"),m(5,"Add more files"),a()(),s(6,"span",38),m(7),a()(),s(8,"div",39),le(9,Rs,14,4,"div",40,xe),a()()}if(t&2){let e=c();r(3),p("icon","plus"),r(4),At(" ",e.capturedFiles.length," file",e.capturedFiles.length>1?"s":""," "),r(2),se(e.capturedFiles)}}function $s(t,o){t&1&&(s(0,"p",21),m(1,"Please assign a user to this todo"),a())}function Ps(t,o){if(t&1&&u(0,"img",59),t&2){let e,n=c(2);p("src",(e=n.selectedUser())==null?null:e.file_url,X)}}function js(t,o){t&1&&u(0,"img",60)}function Bs(t,o){if(t&1){let e=y();s(0,"button",57),_("click",function(i){h(e);let l=c();return l.onGetSelectedUser(null),l.firstUserAssignXTouch.set(!1),f(i.stopPropagation())}),u(1,"fc-icon",58),a(),s(2,"div",4),g(3,Ps,1,1,"img",59)(4,js,1,0,"img",60),s(5,"div",61)(6,"span",62),m(7),a(),s(8,"span",63),m(9),a()()()}if(t&2){let e,n,i,l=c();r(),p("icon","x"),r(2),w(((e=l.selectedUser())==null?null:e.file_url)!=null?3:4),r(4),R((n=l.selectedUser())==null?null:n.name),r(2),R((i=l.selectedUser())==null?null:i.email)}}function Ns(t,o){t&1&&(s(0,"div",4)(1,"div",64),u(2,"fc-icon",58),a(),s(3,"div",65)(4,"span",15),m(5,"Assign User"),a(),s(6,"p",63),m(7,"Click to select a user"),a()()()),t&2&&(r(2),p("icon","plus"))}function Qs(t,o){t&1&&u(0,"span",68)}function Hs(t,o){if(t&1){let e=y();s(0,"button",66),_("keydown.enter",function(){h(e);let i=c();return f(i.finishTaskTodo())})("click",function(){h(e);let i=c();return f((i.config.data==null?null:i.config.data.taskTodo.is_finish)===!0?i.unFinishTaskTodo():i.finishTaskTodo())}),s(1,"div",27)(2,"p-checkbox",67),Ve("ngModelChange",function(i){h(e);let l=c();return Ie(l.config.data==null?null:l.config.data.taskTodo.is_finish,i)||((l.config.data==null?null:l.config.data.taskTodo).is_finish=i),f(i)}),a(),s(3,"span"),m(4),a(),g(5,Qs,1,0,"span",29),a()()}if(t&2){let e=c();p("pTooltip",e.assignmentTodoForm.invalid?"Please fill all required fields":"Finish Task Todo")("disabled",e.assignmentTodoForm.invalid),r(2),Se("ngModel",e.config.data==null?null:e.config.data.taskTodo.is_finish),p("ngModelOptions",re(7,Is))("binary",!0),r(2),R(e.config.data!=null&&e.config.data.taskTodo.is_finish?"Unfinish":"Finish"),r(),p("ngIf",e.isTaskFinishLoading===!0)}}function qs(t,o){t&1&&u(0,"span",68)}var Yt=class t{fcImageZoomerService=b(xt);assignmentService=b(Re);fcConfirmService=b(tt);dialogRefService=b(Ue);dialogService=b(de);toastService=b(Fe);config=b(Ae);ref=b(we);firstUserAssignXTouch=H(!0);selectedUser=H(null);sendedCapturedFiles=[];isTaskFinishLoading=!1;assignmentTodoForm;capturedFiles=[];isLoading=!1;localData=null;taskId=null;title="";assignUser;constructor(){this.initializeAssignmentTodoForm(),be(()=>{this.initializeEditTaskTodoPatchForm()})}close(o){this.ref?.close(o)}initializeEditTaskTodoPatchForm(){return mt(this,null,function*(){if(this.config.data&&(console.log(this.config.data),this.config.data.taskId&&(this.taskId=this.config.data.taskId),this.config.data.title&&(this.title=this.config.data.title),this.config.data.taskTodo)){let o=this.config.data.taskTodo.assigned_user,e=this.config.data.taskTodo.files;if(this.assignmentService.getTaskTodo(this.taskId,this.config.data.taskTodo.id).subscribe({next:n=>{this.config.data.taskTodo.is_finish=n.data.taskTodo.is_finish}}),e.length>0&&(this.capturedFiles=e),console.log(this.config.data.taskTodo),this.assignmentTodoForm.patchValue({assignment:this.config.data.taskTodo.assignment??"",expected_minutes:this.config.data.taskTodo.expected_minutes??""}),this.config.data.taskId!=null){let n=yield oe(this.assignmentService.findAllTaskTodoDocument(this.taskId,this.config.data.taskTodo.id));if(n.data.length>0){let i=n.data.map(l=>({id:l.id,name:l.original_file,file_path:l.file_path,preview:l.file_url}));this.capturedFiles=[...i]}console.log(n)}console.log(this.capturedFiles),this.onGetSelectedUser(o,!1),console.log(this.assignmentTodoForm.value)}})}initializeAssignmentTodoForm(){this.assignmentTodoForm=new Ze({assignment:new ce("",ae.required),expected_minutes:new ce("",ae.required),assigned_user:new ce("",ae.required)})}handleFiles(o){let e=o.target,n=e.files;if(!n)return;let i=0,l=n.length;Array.from(n).forEach(d=>{let x=d.type.startsWith("image/"),T=new FileReader;T.onload=()=>{let S={file:d,name:d.name,preview:x?T.result:null};this.sendedCapturedFiles.push(S),this.capturedFiles.push(S),i++,i===l&&(this.createTaskTodoDocument(),this.sendedCapturedFiles=[])},T.readAsDataURL(d)}),e.value=""}createTaskTodoDocument(){let o=new FormData;this.capturedFiles.length>0&&(this.sendedCapturedFiles.forEach(e=>{console.log(e),o.append("task_todo_documents",e.file)}),this.assignmentService.createTaskTodoDocument(this.taskId,this.config.data.taskTodo.id,o).subscribe({next:e=>{this.toastService.displayToast({summary:e.message},"success")}}))}deleteFilefromCapturedFiles(o,e,n){console.log(o),console.log(e),console.log(n),this.taskId&&e!=null&&e!=null?this.fcConfirmService.open({message:`Are you sure you want to delete ${n} ?`,accept:()=>{this.assignmentService.deleteTaskTodoDocument(e,this.taskId,this.config.data.taskTodo.id).subscribe({next:i=>{this.capturedFiles.splice(o,1),this.toastService.displayToast({summary:i.message},"success")}})}}):this.capturedFiles.splice(o,1)}onGetSelectedUser(o,e=!0){this.selectedUser.set(o),this.assignmentTodoForm.controls.assigned_user.setValue(o),this.assignmentTodoForm.controls.assigned_user.markAsDirty(),e==!0&&this.assignUser.hide()}onImageClick(o){console.log(o),this.fcImageZoomerService.show(o)}finishTaskTodo(){this.isTaskFinishLoading=!0,this.assignmentService.finishTaskTodo(this.taskId,this.config.data.taskTodo.id).subscribe({next:o=>{console.log(o),this.isTaskFinishLoading=!1,this.config.data.taskTodo.is_finish=!0,this.toastService.displayToast({summary:o.message||"Success To Set Finish Task"},"success")}})}unFinishTaskTodo(){this.isTaskFinishLoading=!0,this.assignmentService.unFinishTaskTodo(this.taskId,this.config.data.taskTodo.id).subscribe({next:o=>{console.log(o),this.isTaskFinishLoading=!1,this.config.data.taskTodo.is_finish=!1,this.toastService.displayToast({summary:o.message||"Success Set To Unfinish Task"},"success")}})}submit(){let o=this.assignmentTodoForm.value;this.isLoading=!0,console.log(this.capturedFiles.length);let e=j({files:this.capturedFiles,id:this.taskId,document_count:this.capturedFiles.length},o);if(this.taskId==null){this.close(e);return}this.config.data.taskTodo?this.updateTaskTodo(o,e):this.addTaskTodo(o,e)}updateTaskTodo(o,e){let n={assignment:o.assignment,expected_time:o.expected_minutes,user_id:o.assigned_user?.id};this.assignmentService.updateTaskTodo(this.taskId,this.config.data.taskTodo.id,n).subscribe({next:i=>{this.handleSuccess(i,e)},error:i=>{this.handleError(i)}})}addTaskTodo(o,e){let n=new FormData;n.append("assignment",o.assignment),n.append("expected_time",o.expected_minutes),n.append("user_id",o.assigned_user?.id),this.capturedFiles.length>0&&this.capturedFiles.forEach(i=>{n.append("task_todo_documents",i.file)}),this.assignmentService.addTaskTodo(this.taskId,n).subscribe({next:i=>{this.handleSuccess(i,e)},error:i=>{this.handleError(i)}})}handleSuccess(o,e){this.toastService.displayToast({summary:o.message},"success"),this.isLoading=!1,e.id=o.data.id,console.log(e),this.close(e)}handleError(o){this.toastService.displayToast({summary:o?.error?.message||"Failed to process task"},"fail"),this.isLoading=!1}ngOnDestroy(){let o=this.assignmentTodoForm.value,e=j({files:this.capturedFiles,id:this.config.data?.taskTodo.id,document_count:this.capturedFiles.length,is_finish:this.config.data.taskTodo.is_finish},o);this.close(e)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-assignment-todo-dialog"]],viewQuery:function(e,n){if(e&1&&I(ks,5),e&2){let i;v(i=C())&&(n.assignUser=i.first)}},features:[N([de])],decls:39,vars:32,consts:[["fileInput",""],["assignUser",""],[1,"sticky","top-0","z-10","rounded-t-xl","border-b","border-slate-200","bg-white/95","backdrop-blur-sm"],[1,"flex","items-center","justify-between","px-6","py-4"],[1,"flex","items-center","gap-3"],[1,"bg-tertiary-100","grid","size-9","place-items-center","rounded-md"],[1,"text-xl","!text-slate-700",3,"icon"],[1,"text-lg","font-semibold","text-slate-800"],["type","button",1,"group","grid","size-8","place-items-center","rounded-lg","transition-colors","hover:bg-slate-100","active:scale-95",3,"click","keydown.enter"],[1,"text-slate-600","group-hover:text-slate-800",3,"icon"],[1,"space-y-5","overflow-y-auto","p-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","gap-4"],["formControlName","assignment",3,"size","placeholder","id","title","type","required","valueFromIsEditModeTrue"],["formControlName","expected_minutes",3,"size","placeholder","id","title","type","required","valueFromIsEditModeTrue"],[1,"flex","flex-col","gap-2"],[1,"text-sm","font-medium","text-slate-700"],["type","file","accept",".doc,.docx,.xls,.xlsx,.pdf,.zip,image/*","capture","environment","multiple","",1,"hidden",3,"change"],[1,"rounded-lg","border-2","border-dashed","border-slate-300","bg-slate-50","transition-colors","hover:border-slate-400","hover:bg-slate-100",3,"ngClass"],[1,"flex","h-full","cursor-pointer","flex-col","items-center","justify-center","p-4","text-center"],[1,"flex","h-full","flex-col"],[1,"flex","flex-col","gap-1"],[1,"text-sm","text-red-500"],[3,"selectedUser"],["type","button",1,"relative","w-full","rounded-lg","border","border-slate-300","bg-slate-50","p-4","transition-colors","hover:border-slate-400","hover:bg-slate-100",3,"click","pTooltip"],[1,"flex","gap-2","rounded-b-xl","border-t","border-slate-200","pt-4"],["type","button",1,"w-full","rounded-lg","bg-green-500","px-4","py-3","text-sm","font-medium","text-white","transition-colors","hover:bg-green-600","active:scale-[0.98]","disabled:scale-100","disabled:cursor-not-allowed","disabled:bg-gray-500",3,"pTooltip","disabled"],["type","submit",1,"bg-information-500","hover:bg-information-600","w-full","rounded-lg","px-4","py-3","text-sm","font-medium","text-white","transition-colors","active:scale-[0.98]","disabled:scale-100","disabled:cursor-not-allowed","disabled:bg-gray-500",3,"keydown.enter","pTooltip","disabled"],[1,"flex","items-center","justify-center","gap-2"],[1,"text-sm",3,"icon"],["class","loader ml-2",4,"ngIf"],[1,"flex","h-full","cursor-pointer","flex-col","items-center","justify-center","p-4","text-center",3,"click"],[1,"mb-3","flex","h-12","w-12","items-center","justify-center","rounded-full","bg-slate-200"],[1,"text-xl","text-slate-500",3,"icon"],[1,"text-sm","font-medium","text-slate-600"],[1,"mt-1","text-xs","text-slate-500"],[1,"flex","items-center","justify-between","rounded-t-lg","border-b","border-slate-200","bg-slate-50","p-3"],["type","button",1,"inline-flex","items-center","gap-1","rounded-md","px-3","py-1.5","text-sm","text-slate-700","transition-colors","hover:bg-slate-200","hover:text-slate-900",3,"click"],[1,"text-xs",3,"icon"],[1,"rounded-full","bg-slate-200","px-2","py-1","text-xs","text-slate-500"],[1,"flex-1","space-y-2","overflow-y-auto","p-3"],[1,"flex","items-center","gap-3","rounded-lg","border","border-slate-200","bg-white","p-2","transition-colors","hover:border-slate-300"],[1,"flex-shrink-0"],[1,"flex","h-8","w-8","items-center","justify-center","rounded-lg"],["type","button",1,"h-8","w-8","overflow-hidden","rounded-lg","transition-opacity","hover:opacity-80"],[1,"flex","h-8","w-8","items-center","justify-center","rounded-lg","bg-slate-100"],[1,"min-w-0","flex-1"],[1,"block","truncate","text-sm","font-medium","text-slate-800","hover:text-slate-900",3,"href"],["type","button",1,"group","rounded-md","p-1.5","transition-colors","hover:bg-red-50",3,"click"],[1,"text-sm","text-slate-400","group-hover:text-red-500",3,"icon"],[1,"text-base","text-red-600",3,"icon"],[1,"text-base","text-blue-600",3,"icon"],[1,"text-base","text-green-600",3,"icon"],[1,"text-base","text-purple-600",3,"icon"],[1,"text-base","text-gray-600",3,"icon"],["type","button",1,"h-8","w-8","overflow-hidden","rounded-lg","transition-opacity","hover:opacity-80",3,"click"],["alt","preview",1,"h-full","w-full","object-cover",3,"src"],[1,"text-sm","text-slate-600",3,"icon"],["type","button",1,"absolute","top-3","right-3","rounded-md","p-1","transition-colors","hover:bg-slate-200",3,"click"],[1,"text-sm","text-slate-500",3,"icon"],["alt","User avatar",1,"h-10","w-10","rounded-full","border-2","border-white","object-cover","shadow-sm",3,"src"],["src","images/placeholders/placeholder-user.jpg","alt","User avatar",1,"h-10","w-10","rounded-full","border-2","border-white","object-cover","shadow-sm"],[1,"flex","flex-col","text-left"],[1,"text-sm","font-medium","text-slate-800"],[1,"text-xs","text-slate-500"],[1,"flex","h-10","w-10","items-center","justify-center","rounded-full","bg-slate-200"],[1,"text-left"],["type","button",1,"w-full","rounded-lg","bg-green-500","px-4","py-3","text-sm","font-medium","text-white","transition-colors","hover:bg-green-600","active:scale-[0.98]","disabled:scale-100","disabled:cursor-not-allowed","disabled:bg-gray-500",3,"keydown.enter","click","pTooltip","disabled"],["size","small",3,"ngModelChange","ngModel","ngModelOptions","binary"],[1,"loader","ml-2"]],template:function(e,n){if(e&1){let i=y();s(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),u(4,"fc-icon",6),a(),s(5,"h1",7),m(6),a()(),s(7,"button",8),_("click",function(){return h(i),f(n.close())})("keydown.enter",function(){return h(i),f(n.close())}),u(8,"fc-icon",9),a()()(),s(9,"form",10),_("ngSubmit",function(){return h(i),f(n.submit())}),s(10,"div",11),u(11,"fc-input-text",12)(12,"fc-input-text",13),a(),s(13,"div",14)(14,"label",15),m(15,"Documents (Optional)"),a(),s(16,"input",16,0),_("change",function(d){return h(i),f(n.handleFiles(d))}),a(),s(18,"div",17),g(19,Vs,7,1,"div",18)(20,Ls,11,3,"div",19),a()(),s(21,"div",20)(22,"label",15),m(23,"Assign User"),a(),g(24,$s,2,0,"p",21),s(25,"p-popover",null,1)(27,"user-pick",22),_("selectedUser",function(d){return h(i),f(n.onGetSelectedUser(d))}),a()(),s(28,"button",23),_("click",function(d){h(i);let x=q(26);return f(x.toggle(d))}),g(29,Bs,10,4)(30,Ns,8,1,"div",4),a()(),s(31,"div",24),g(32,Hs,6,8,"button",25),s(33,"button",26),_("keydown.enter",function(){return h(i),f(n.submit())}),s(34,"div",27),u(35,"fc-icon",28),s(36,"span"),m(37),a(),g(38,qs,1,0,"span",29),a()()()()}e&2&&(r(4),p("icon","noteAdd"),r(2),R(n.title),r(2),p("icon","x"),r(),p("formGroup",n.assignmentTodoForm),r(2),p("size","normal")("placeholder","Assignment title")("id","title")("title","Assignment")("type","text")("required",!0)("valueFromIsEditModeTrue",n.config.data.taskTodo?n.config.data.taskTodo.assignment:""),r(),p("size","normal")("placeholder","Expected minutes")("id","expected_minutes")("title","Expected Minutes")("type","number")("required",!0)("valueFromIsEditModeTrue",n.config.data.taskTodo?n.config.data==null?null:n.config.data.taskTodo.expected_minutes:""),r(6),p("ngClass",ye(29,Ss,n.capturedFiles.length>11,n.capturedFiles.length<11)),r(),w(n.capturedFiles.length===0?19:20),r(5),w(n.assignmentTodoForm.controls.assigned_user.invalid&&n.firstUserAssignXTouch()===!1?24:-1),r(4),p("pTooltip","assign user for this task todo"),r(),w(n.selectedUser()?29:30),r(3),w(n.config.data!=null&&n.config.data.taskTodo?32:-1),r(),p("pTooltip",n.assignmentTodoForm.invalid?"Please fill all required fields":"Submit Form")("disabled",n.assignmentTodoForm.invalid),r(2),p("icon","plus"),r(2),R(n.config.data.taskTodo!=null?"Save":"Add Todo"),r(),p("ngIf",n.isLoading===!0))},dependencies:[Ce,Ye,De,Ke,Nt,Xe,Je,gt,Z,ee,Oe,et,yt,Me,ze,qt,Gt,xn,Zt],encapsulation:2})};var Us=["commentTextArea"],Ws=["commentTextAreaEdit"],Gs=["commentTextAreaReply"],gi=()=>({standalone:!0}),Ks=t=>({"!rotate-180":t});function Zs(t,o){if(t&1){let e=y();s(0,"div",23)(1,"textarea",25,1),Ve("ngModelChange",function(i){h(e);let l=c().$implicit;return Ie(l.comment,i)||(l.comment=i),f(i)}),a(),s(3,"div",5)(4,"button",26),_("click",function(){h(e);let i=c(2);return f(i.cancelEditComment())}),m(5," Cancel "),a(),s(6,"button",27),_("click",function(){h(e);let i=c().$implicit,l=c();return f(l.submitComment(i))}),m(7," Save Change "),a()()()}if(t&2){let e=c().$implicit;r(),Se("ngModel",e.comment),p("ngModelOptions",re(2,gi))}}function Ys(t,o){if(t&1){let e=y();s(0,"button",36),_("click",function(){h(e);let i=c(2),l=i.$implicit,d=i.$index,x=c();return f(x.deleteComment(l,d))}),u(1,"fc-icon",37),a()}t&2&&(r(),p("icon","trash"))}function Xs(t,o){if(t&1){let e=y();s(0,"button",31),_("click",function(){h(e);let i=c(2).$implicit,l=c();return f(l.replyToComment(i))}),m(1," Reply "),a()}}function Js(t,o){if(t&1){let e=y();s(0,"div",28)(1,"span"),m(2),a(),g(3,Ys,2,1,"button",29),a(),s(4,"div",30)(5,"div",5)(6,"span",31),_("click",function(){h(e);let i=c().$implicit,l=c();return f(l.editComment(i))}),m(7,"Edit"),a()(),s(8,"div",32),g(9,Xs,2,0,"button",33),s(10,"button",34),_("click",function(){h(e);let i=c().$implicit,l=c();return f(l.showReply(i))}),s(11,"span"),m(12),a(),s(13,"div"),u(14,"fc-icon",35),a()()()()}if(t&2){let e=c().$implicit,n=c();r(2),k(" ",e.comment," "),r(),w(n.userId===(e.user==null?null:e.user.id)?3:-1),r(6),w((e.user==null?null:e.user.id)!==n.userId?9:-1),r(3),k("Show Reply (",e.reply_count!=null?e.reply_count:0,")"),r(2),p("icon","chevronDown")("ngClass",L(6,Ks,e.isReply))}}function er(t,o){if(t&1){let e=y();s(0,"div",24)(1,"div",38)(2,"div",5)(3,"span",39),m(4,"Replying to"),a(),s(5,"span",40),m(6),a()(),s(7,"textarea",25,2),Ve("ngModelChange",function(i){h(e);let l=c(2);return Ie(l.replyComment,i)||(l.replyComment=i),f(i)}),a()(),s(9,"div",5)(10,"button",41),_("click",function(){h(e);let i=c(2);return f(i.cancelReplyComment())}),m(11," Cancel "),a(),s(12,"button",42),_("click",function(){h(e);let i=c().$implicit,l=c();return f(l.submitReply(i))}),m(13," Reply "),a()()()}if(t&2){let e=c().$implicit,n=c();r(6),k("@",e.user==null?null:e.user.username,""),r(),Se("ngModel",n.replyComment),p("ngModelOptions",re(3,gi))}}function tr(t,o){if(t&1){let e=y();s(0,"div",44)(1,"span"),m(2,"No comments yet. Be the first to add one!"),a(),s(3,"button",45),_("click",function(){h(e);let i=c(3).$implicit,l=c();return f(l.replyToComment(i))}),m(4," Make Comment "),a()()}}function ir(t,o){if(t&1&&g(0,tr,5,0,"div",44),t&2){let e=c(2).$implicit,n=c();w(e.id!==n.currentReplyCommentId?0:-1)}}function nr(t,o){if(t&1){let e=y();s(0,"div",23)(1,"textarea",25,1),Ve("ngModelChange",function(i){h(e);let l=c().$implicit;return Ie(l.comment,i)||(l.comment=i),f(i)}),a(),s(3,"div",5)(4,"button",26),_("click",function(){h(e);let i=c(5);return f(i.cancelEditComment())}),m(5," Cancel "),a(),s(6,"button",27),_("click",function(){h(e);let i=c().$implicit,l=c(4);return f(l.submitComment(i))}),m(7," Save Change "),a()()()}if(t&2){let e=c().$implicit;r(),Se("ngModel",e.comment),p("ngModelOptions",re(2,gi))}}function or(t,o){if(t&1){let e=y();s(0,"button",36),_("click",function(){h(e);let i=c(2),l=i.$implicit,d=i.$index,x=c(4);return f(x.deleteComment(l,d))}),u(1,"fc-icon",37),a()}t&2&&(r(),p("icon","trash"))}function lr(t,o){if(t&1){let e=y();s(0,"span",48),_("click",function(){h(e);let i=c(2).$implicit,l=c(4);return f(l.editComment(i))}),m(1,"Edit"),a()}}function sr(t,o){if(t&1){let e=y();s(0,"div",32)(1,"button",49),_("click",function(){h(e);let i=c(2).$implicit,l=c(4);return f(l.replyToComment(i))}),m(2," Reply "),a()()}}function rr(t,o){if(t&1&&(s(0,"div",28)(1,"span"),m(2),a(),g(3,or,2,1,"button",29),a(),s(4,"div",30),g(5,lr,2,0,"span",47)(6,sr,3,0,"div",32),a()),t&2){let e=c().$implicit,n=c(4);r(2),k(" ",e.comment," "),r(),w(n.userId===(e.user==null?null:e.user.id)?3:-1),r(2),w((e.user==null?null:e.user.id)===n.userId?5:-1),r(),w((e.user==null?null:e.user.id)!==n.userId?6:-1)}}function ar(t,o){if(t&1&&(s(0,"div",24)(1,"div",38)(2,"div",5)(3,"span",39),m(4,"Replying to"),a(),s(5,"span",40),m(6),a()()()()),t&2){let e=c(4).$implicit;r(6),k("@",e.user==null?null:e.user.username,"")}}function cr(t,o){if(t&1&&(s(0,"div",46),u(1,"img",17),s(2,"div",20)(3,"span",21),m(4),a(),s(5,"span",22),g(6,nr,8,3,"div",23)(7,rr,7,4)(8,ar,7,1,"div",24),a()()()),t&2){let e=o.$implicit,n=c(3).$implicit,i=c();r(),p("src",(e.user==null?null:e.user.file_url)||"images/placeholders/placeholder-user.jpg",X),r(3),R(e.user==null?null:e.user.name),r(2),w(e.id===i.currentEditedCommentId?6:7),r(2),w(n.id===i.currentReplyCommentId?8:-1)}}function dr(t,o){if(t&1&&(s(0,"div",43),le(1,cr,9,4,"div",46,xe),a()),t&2){let e=c(2).$implicit,n=c();r(),se(n.replyCommentDatas[e.id])}}function pr(t,o){if(t&1&&g(0,ir,1,1)(1,dr,3,0,"div",43),t&2){let e=c().$implicit,n=c();w(n.replyCommentDatas[e.id].length===0?0:1)}}function mr(t,o){if(t&1&&(s(0,"div",13),u(1,"img",17),s(2,"div",20)(3,"span",21),m(4),a(),s(5,"span",22),g(6,Zs,8,3,"div",23)(7,Js,15,8)(8,er,14,4,"div",24)(9,pr,2,1),a()()()),t&2){let e=o.$implicit,n=c();r(),p("src",(e.user==null?null:e.user.file_url)||"images/placeholders/placeholder-user.jpg",X),r(3),R(e.user==null?null:e.user.name),r(2),w(e.id===n.currentEditedCommentId?6:7),r(2),w(e.id===n.currentReplyCommentId?8:-1),r(),w(e.isReply===!0?9:-1)}}function ur(t,o){t&1&&(s(0,"div",14),u(1,"img",50),s(2,"span",51),m(3,"No comments yet. Be the first to add one!"),a()())}var Jt=class t{assignmentService=b(Re);dialogRefService=b(Ue);fcConfirmService=b(tt);dialogService=b(de);toastService=b(Fe);authService=b(qe);config=b(Ae);ref=b(we);assignmentCommentForm;isLoading=!1;taskId=Be(()=>this.config.data.taskId);userId=0;currentEditedCommentId=0;currentReplyCommentId=0;replyComment="";commentTextAreaRef;commentTextAreaEditRef;commentTextAreaReplyRef;commentResource=Ne({request:()=>({taskId:this.taskId()}),loader:({request:o})=>oe(this.assignmentService.getComments(o.taskId))});comments=rt(()=>this.commentResource.value()?.task_comments.map(o=>pe(j({},o),{isReply:!1}))||[]);constructor(){this.initializeVariables(),this.initializeAssignmentAddForm(),be(()=>{console.log(this.commentResource.value()?.task_comments),console.log(this.authService.userData()),console.log(this.taskId()),this.assignmentService.commentCount.set(this.commentResource.value()?.count)})}ngAfterViewInit(){setTimeout(()=>{this.commentTextAreaRef.nativeElement.focus()},311)}close(o){setTimeout(()=>{this.ref.close()},111)}initializeVariables(){this.userId=this.authService.userData().id}initializeAssignmentAddForm(){this.assignmentCommentForm=new Ze({comment:new ce("",ae.required)})}editComment(o){this.currentEditedCommentId=o.id,setTimeout(()=>{this.commentTextAreaEditRef.nativeElement.focus()},311),console.log()}submitComment(o){console.log(o.comment);let e={comment:o.comment};this.assignmentService.updateComment(this.taskId(),o.id,e).subscribe({next:n=>{console.log(n),this.toastService.displayToast({summary:n.message},"success"),this.cancelEditComment()}})}submitReply(o){if(this.replyComment==="")return this.toastService.displayToast({summary:"Please fill the reply form"},"fail");let e={comment:this.replyComment,parent_id:o.id};this.assignmentService.addComment(this.taskId(),e).subscribe({next:n=>{this.toastService.displayToast({summary:n.message},"success"),this.cancelReplyComment(),this.commentResource.reload()}})}cancelEditComment(){this.currentEditedCommentId=null}cancelReplyComment(){this.currentReplyCommentId=null}replyToComment(o){this.currentReplyCommentId=o.id,setTimeout(()=>{this.commentTextAreaReplyRef.nativeElement.focus()},311)}replyCommentDatas={};showReply(o){let e=this.comments();if(e.find(l=>l.id===o.id)?.isReply){this.comments.set(e.map(l=>l.id===o.id?pe(j({},l),{isReply:!1}):l));return}this.comments.set(e.map(l=>l.id===o.id?pe(j({},l),{isReply:!0}):l));let i=`parent_id=${o.id}`;this.assignmentService.getComments(this.taskId(),i).subscribe({next:l=>{this.replyCommentDatas[o.id]=l.task_comments}})}deleteComment(o,e){this.fcConfirmService.open({message:"Are you sure you want to delete this comment ?",accept:()=>{this.assignmentService.deleteComment(this.taskId(),o.id).subscribe({next:n=>{this.comments().splice(e,1),this.assignmentService.commentCount.set(this.assignmentService.commentCount()-1),this.toastService.displayToast({summary:n.message},"success")}})}})}submit(){this.assignmentCommentForm.invalid||(console.log(this.assignmentCommentForm),this.assignmentService.addComment(this.taskId(),this.assignmentCommentForm.value).subscribe({next:()=>{this.commentResource.reload()}}))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-assignment-comment-dialog"]],viewQuery:function(e,n){if(e&1&&(I(Us,5),I(Ws,5),I(Gs,5)),e&2){let i;v(i=C())&&(n.commentTextAreaRef=i.first),v(i=C())&&(n.commentTextAreaEditRef=i.first),v(i=C())&&(n.commentTextAreaReplyRef=i.first)}},features:[N([de])],decls:22,vars:7,consts:[["commentTextArea",""],["commentTextAreaEdit",""],["commentTextAreaReply",""],[1,"mx-auto","flex","h-[70dvh]","w-full","flex-col","rounded-lg","bg-white","text-sm","text-gray-800"],[1,"flex","items-center","justify-between","border-b","border-gray-200","px-4","py-2.5"],[1,"flex","items-center","gap-2"],[1,"mt-2","text-xl","text-gray-600"],[3,"icon"],[1,"font-medium"],[1,"text-gray-500"],["type","button",1,"grid","size-8","place-items-center","rounded-md","hover:bg-gray-100","active:scale-95",3,"click","keydown.enter"],[1,"text-lg",3,"icon"],[1,"relative","h-full","min-h-0","overflow-y-auto"],[1,"group","flex","items-start","gap-3","px-4","py-3"],[1,"absolute","top-1/2","left-1/2","mt-2","flex","-translate-x-1/2","-translate-y-1/2","flex-col","items-center","justify-center","gap-2","rounded-xl","border","border-gray-200","bg-gray-50","p-4","text-sm","text-gray-500"],[1,"mt-auto","border-t","border-gray-200","px-4","py-3"],[1,"flex","items-center","gap-2",3,"ngSubmit","formGroup"],["alt","User",1,"aspect-square","size-7","rounded","object-cover",3,"src"],["rows","1","placeholder","Add a comment...","formControlName","comment",1,"!border-b-tertiary-200","w-full","!border-0","!border-b","py-1","text-sm","outline-none","focus:!border-b-blue-500","focus:outline-0"],["type","submit",1,"disabled:bg-tertiary-400","rounded-md","bg-blue-600","px-3","py-2","text-sm","text-nowrap","text-white","transition","hover:bg-blue-700","disabled:cursor-not-allowed",3,"disabled"],[1,"flex","w-full","flex-col"],[1,"text-sm","font-semibold","text-gray-800"],[1,"mt-0.5","text-sm","leading-snug","text-gray-600"],[1,"flex","flex-col","items-end","gap-2"],[1,"ml-5","flex","flex-col","items-end","gap-2"],["rows","2",1,"!border-b-tertiary-200","w-full","!border-0","!border-b","py-1","text-sm","outline-none","focus:!border-b-blue-500","focus:outline-0",3,"ngModelChange","ngModel","ngModelOptions"],["type","button",1,"disabled:bg-tertiary-400","rounded-md","bg-red-600","px-2","py-1","text-sm","text-nowrap","text-white","transition","hover:bg-red-700",3,"click"],["type","button",1,"disabled:bg-tertiary-400","rounded-md","bg-blue-600","px-2","py-1","text-sm","text-nowrap","text-white","transition","hover:bg-blue-700",3,"click"],[1,"flex","items-center","justify-between"],[1,"hover:text-information-600","hover:bg-tertiary-100","grid","size-6","cursor-pointer","place-items-center","rounded-md","hover:underline"],[1,"mt-2","flex","w-fit","cursor-pointer","gap-2","text-xs","text-gray-600"],[1,"hover:text-information-600","rounded-sm","p-1","hover:underline",3,"click"],[1,"flex","items-center","gap-3"],[1,"hover:text-information-600","rounded-sm","p-1","hover:underline"],["type","button",1,"hover:bg-tertiary-100","flex","cursor-pointer","items-center","gap-2","rounded-md","px-2","py-1",3,"click"],[1,"duration-150",3,"icon","ngClass"],[1,"hover:text-information-600","hover:bg-tertiary-100","grid","size-6","cursor-pointer","place-items-center","rounded-md","hover:underline",3,"click"],[1,"text-sm","text-red-500",3,"icon"],[1,"mt-2","flex","w-full","flex-col","items-start"],[1,"text-xs"],[1,"rounded-md","bg-gray-100","p-1","text-xs","text-nowrap"],["type","button",1,"disabled:bg-tertiary-400","rounded-md","bg-red-600","px-2","py-1","text-xs","text-nowrap","text-white","transition","hover:bg-red-700",3,"click"],["type","button",1,"disabled:bg-tertiary-400","rounded-md","bg-blue-600","px-2","py-1","text-xs","text-nowrap","text-white","transition","hover:bg-blue-700",3,"click"],[1,"bg-tertiary-50","mt-2"],[1,"mt-2","flex","flex-col","items-center","justify-center","gap-2","rounded-md","border","border-gray-200","bg-gray-50","p-4","text-sm","text-gray-500"],[1,"rounded-md","bg-blue-600","px-3","py-1","text-sm","text-white","transition","hover:bg-blue-700",3,"click"],[1,"group","flex","items-start","gap-3","rounded-lg","px-4","py-3"],[1,"hover:text-information-600","hover:underline"],[1,"hover:text-information-600","hover:underline",3,"click"],[1,"hover:text-information-600","rounded-sm","bg-gray-100","p-1","hover:underline",3,"click"],["src","/images/placeholders/comment.svg","alt","comment placeholder svg",1,"size-40"],[1,"text-center"]],template:function(e,n){if(e&1){let i=y();s(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6),u(4,"fc-icon",7),a(),s(5,"span",8),m(6,"Comments"),a(),s(7,"span",9),m(8),a()(),s(9,"button",10),_("click",function(d){return h(i),n.close(),f(d.preventDefault())})("keydown.enter",function(){return h(i),f(n.close())}),u(10,"fc-icon",11),a()(),s(11,"div",12),le(12,mr,10,5,"div",13,xe,!1,ur,4,0,"div",14),a(),s(15,"div",15)(16,"form",16),_("ngSubmit",function(){return h(i),f(n.submit())}),u(17,"img",17)(18,"textarea",18,0),s(20,"button",19),m(21," Send "),a()()()()}e&2&&(r(4),p("icon","doubleChat"),r(4),k("\xB7 ",n.assignmentService.commentCount(),""),r(2),p("icon","x"),r(2),se(n.comments()),r(4),p("formGroup",n.assignmentCommentForm),r(),p("src",n.authService.userData().file_url?n.authService.userData().file_url:"images/placeholders/placeholder-user.jpg",X),r(3),p("disabled",n.assignmentCommentForm.invalid))},dependencies:[Ce,Ye,Bt,De,Ke,Xe,Je,gt,Z,Oe,Me,ze],encapsulation:2})};var hr=(t,o)=>({"h-60 max-h-60":t,"h-50 max-h-50":o});function fr(t,o){if(t&1){let e=y();s(0,"div",18),_("click",function(i){return h(e),c(),q(10).click(),f(i.preventDefault())}),m(1," + add documents or "),u(2,"br"),m(3," images "),a()}}function gr(t,o){t&1&&u(0,"fc-icon",25),t&2&&p("icon","pdf")}function _r(t,o){t&1&&u(0,"fc-icon",25),t&2&&p("icon","doc")}function xr(t,o){t&1&&u(0,"fc-icon",25),t&2&&p("icon","xls")}function yr(t,o){t&1&&u(0,"fc-icon",25),t&2&&p("icon","zip")}function br(t,o){t&1&&u(0,"fc-icon",25),t&2&&p("icon","txt")}function vr(t,o){if(t&1){let e=y();s(0,"button",31),_("click",function(){h(e);let i=c().$implicit,l=c(2);return f(l.onImageClick(i.preview))}),u(1,"img",32),a()}if(t&2){let e=c().$implicit;r(),p("src",e.preview,X)}}function Cr(t,o){t&1&&u(0,"fc-icon",25),t&2&&p("icon","def")}function wr(t,o){if(t&1){let e=y();s(0,"div",23)(1,"span",24),g(2,gr,1,1,"fc-icon",25)(3,_r,1,1,"fc-icon",25)(4,xr,1,1,"fc-icon",25)(5,yr,1,1,"fc-icon",25)(6,br,1,1,"fc-icon",25)(7,vr,2,1,"button",26)(8,Cr,1,1,"fc-icon",25),a(),s(9,"span",27)(10,"a",28),m(11),a()(),s(12,"button",29),_("click",function(){let i=h(e),l=i.$implicit,d=i.$index,x=c(2);return f(x.deleteFilefromCapturedFiles(d,l.id,l.name))}),u(13,"fc-icon",30),a()()}if(t&2){let e=o.$implicit;r(2),w(e.name.endsWith(".pdf")?2:e.name.endsWith(".doc")||e.name.endsWith(".docx")?3:e.name.endsWith(".xls")||e.name.endsWith(".xlsx")?4:e.name.endsWith(".zip")||e.name.endsWith(".rar")?5:e.name.endsWith(".txt")?6:e.name.endsWith(".png")||e.name.endsWith(".jpg")||e.name.endsWith(".jpeg")||e.name.endsWith(".gif")||e.name.endsWith(".webp")?7:8),r(8),p("href",e.preview,X),r(),k(" ",e.name," "),r(2),p("icon","trash")}}function Tr(t,o){if(t&1){let e=y();s(0,"div",14)(1,"div",19)(2,"div",20)(3,"button",21),_("click",function(i){return h(e),c(),q(10).click(),f(i.preventDefault())}),m(4," + Add more files "),a(),s(5,"span",22),m(6),a()()(),le(7,wr,14,4,"div",23,xe),a()}if(t&2){let e=c();r(6),At("",e.capturedFiles.length," file",e.capturedFiles.length>1?"s":""," added"),r(),se(e.capturedFiles)}}function kr(t,o){t&1&&u(0,"span",33)}var ei=class t{fcImageZoomerService=b(xt);assignmentService=b(Re);fcConfirmService=b(tt);toastService=b(Fe);authService=b(qe);config=b(Ae);ref=b(we);timelog=H({});timelogDocumentForm;capturedFiles=[];taskId=null;isLoading=!1;constructor(){this.config.data&&(this.config.data.timelog&&(this.timelog.set(this.config.data.timelog),console.log(this.timelog())),this.config.data.taskId&&(this.taskId=this.config.data.taskId)),this.initializeTimelogDocumentForm()}initializeTimelogDocumentForm(){this.timelogDocumentForm=new Ze({note:new ce("",ae.required)})}handleFiles(o){let e=o.target,n=e.files;if(!n)return;let i=0,l=n.length;Array.from(n).forEach(d=>{let x=d.type.startsWith("image/"),T=new FileReader;T.onload=()=>{let S={file:d,name:d.name,preview:x?T.result:null};this.capturedFiles.push(S)},T.readAsDataURL(d)}),e.value=""}readImage(o){let e=new FileReader;e.onload=n=>{let i=n.target?.result,l=o.type.startsWith("image/");if(i){let d={file:o,name:o.name,preview:l?e.result:null};this.capturedFiles.some(x=>x.image_url===i)||this.capturedFiles.push(d)}},e.readAsDataURL(o)}handlePaste(o){console.log(o);let e=o.clipboardData?.items;if(e){for(let n of e)if(n.type.indexOf("image")!==-1){let i=n.getAsFile();i&&(this.readImage(i),console.log(i))}}}createTaskTodoTimelogDocument(){let o=new FormData;this.capturedFiles.length>0&&(this.capturedFiles.forEach(e=>{console.log(e),o.append("task_todo_timelog_documents",e.file)}),this.assignmentService.addTaskTodoTimelogDocument(this.timelog().task_todo.task_id,this.timelog().task_todo_id,this.timelog().id,o).subscribe({next:e=>{this.toastService.displayToast({summary:e.message},"success")}}))}onImageClick(o){console.log(o),this.fcImageZoomerService.show(o)}deleteFilefromCapturedFiles(o,e,n){console.log(o),console.log(e),console.log(n),this.taskId&&e!=null&&e!=null?this.fcConfirmService.open({message:`Are you sure you want to delete ${n} ?`,accept:()=>{this.assignmentService.deleteTaskTodoDocument(e,this.taskId,this.config.data.taskTodo.id).subscribe({next:i=>{this.capturedFiles.splice(o,1),this.toastService.displayToast({summary:i.message},"success")}})}}):this.capturedFiles.splice(o,1)}close(o){this.ref?.close(o)}formatLocalDateTime(o=new Date){let e={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return new Intl.DateTimeFormat("sv-SE",e).format(o).replace(/\//g,"-").replace(",","")}submit(){console.log(this.timelog());let o={user_id:this.authService.userData().id,task_todo_id:this.timelog().task_todo_id,stop_time:this.formatLocalDateTime(),note:this.timelogDocumentForm.value.note};console.log(o),this.assignmentService.updateTaskTodoTimelog(this.timelog().task_todo.task_id,this.timelog().task_todo_id,this.timelog().id,o).subscribe({next:e=>{let n=new Audio("/sounds/timerEnd.mp3");n.volume=1,n.play(),this.ref.close()}}),this.capturedFiles.length>0&&this.createTaskTodoTimelogDocument()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-assignment-todo-timelog-document"]],hostBindings:function(e,n){e&1&&_("paste",function(l){return n.handlePaste(l)},!1,Ft)},features:[N([de])],decls:21,vars:17,consts:[["fileInput",""],[1,"border-tertiary-300","sticky","top-0","z-10","flex","items-center","justify-between","rounded-t-xl","border-b-1","bg-white","px-5","py-4"],[1,"flex","items-center","gap-3"],[1,"!text-primary","text-2xl",3,"icon"],[1,"text-lg","font-bold"],["type","button",1,"hover:bg-tertiary-100","grid","size-8","place-items-center","rounded-md","active:scale-90",3,"click","keydown.enter"],[1,"text-lg",3,"icon"],[1,"relative","grid","grid-cols-1","gap-4","overflow-hidden","p-5",3,"ngSubmit","formGroup"],["formControlName","note",3,"size","placeholder","id","title","type","required"],["type","file","accept",".doc,.docx,.xls,.xlsx,.pdf,.zip,image/*","capture","environment","multiple","",1,"hidden",3,"change"],[1,"flex","flex-col"],[1,"mb-2","text-sm"],[1,"text-primary","relative","flex","w-full","cursor-pointer","flex-col","justify-start","rounded-md","border","border-gray-300","bg-gray-50","transition","duration-200","hover:bg-gray-100",3,"ngClass"],[1,"flex","h-full","flex-col","items-center","justify-center","rounded-lg","px-4","text-center","text-sm","text-gray-500"],[1,"flex","h-full","flex-col","gap-2","overflow-y-auto","px-3","pb-3"],["type","submit",1,"hover:bg-information-700","bg-information-600","z-10","m-5","ml-auto","flex","w-full","items-center","gap-1.5","rounded-md","p-3","text-sm","text-white","duration-100","active:scale-95","disabled:scale-100","disabled:cursor-not-allowed","disabled:bg-gray-500",3,"keydown.enter","pTooltip","disabled"],[1,"mx-auto","w-fit"],["class","loader",4,"ngIf"],[1,"flex","h-full","flex-col","items-center","justify-center","rounded-lg","px-4","text-center","text-sm","text-gray-500",3,"click"],[1,"sticky","top-0","z-10","py-1","backdrop-blur-sm"],[1,"flex","items-center","justify-between","rounded","border-gray-300","px-3","py-2","text-sm","text-gray-500"],[1,"rounded-md","p-1.5","text-gray-900","hover:bg-gray-300",3,"click"],[1,"text-xs","text-gray-700"],[1,"hover:border-information-600","flex","items-center","gap-2","rounded","border","border-gray-200","bg-white","px-3","py-2","text-sm","text-gray-800"],[1,"text-lg"],[3,"icon"],["type","button",1,"grid","size-7","place-items-center","rounded-md","hover:brightness-75"],[1,"max-w-[24rem]","truncate"],[1,"hover:underline",3,"href"],["type","button",1,"group","hover:bg-tertiary-50","ml-auto","grid","size-8","place-items-center","rounded-md",3,"click"],[1,"group-hover:text-red-500",3,"icon"],["type","button",1,"grid","size-7","place-items-center","rounded-md","hover:brightness-75",3,"click"],["alt","preview",1,"size-7","rounded","object-cover",3,"src"],[1,"loader"]],template:function(e,n){if(e&1){let i=y();s(0,"div",1)(1,"div",2),u(2,"fc-icon",3),s(3,"span",4),m(4,"Stop Timelog"),a()(),s(5,"button",5),_("click",function(){return h(i),f(n.close())})("keydown.enter",function(){return h(i),f(n.close())}),u(6,"fc-icon",6),a()(),s(7,"form",7),_("ngSubmit",function(){return h(i),f(n.submit())}),u(8,"fc-input-text",8),s(9,"input",9,0),_("change",function(d){return h(i),f(n.handleFiles(d))}),a(),s(11,"div",10)(12,"span",11),m(13,"Documents (Optional)"),a(),s(14,"div",12),g(15,fr,4,0,"div",13)(16,Tr,9,2,"div",14),a()(),s(17,"button",15),_("keydown.enter",function(){return h(i),f(n.submit())}),s(18,"span",16),m(19,"Finish Timelog"),a(),g(20,kr,1,0,"span",17),a()()}e&2&&(r(2),p("icon","boxTime"),r(4),p("icon","x"),r(),p("formGroup",n.timelogDocumentForm),r(),p("size","small")("placeholder","short explanation of your assignment you just worked on")("id","Note")("title","Note")("type","text")("required",!0),r(6),p("ngClass",ye(14,hr,n.capturedFiles.length>11,n.capturedFiles.length<11)),r(),w(n.capturedFiles.length===0?15:16),r(2),p("pTooltip",n.timelogDocumentForm.invalid?"Fill the form correctly":"Submit Form")("disabled",n.timelogDocumentForm.invalid),r(3),p("ngIf",n.isLoading===!0))},dependencies:[Ce,Ye,De,Ke,Nt,Xe,Je,Z,ee,Oe,et,yt,Me,ze,qi],encapsulation:2})};var Sr=["commentTextArea"],Ir=["commentTextAreaEdit"],Vr=["commentTextAreaReply"];function Er(t,o){t&1&&(s(0,"span",28),m(1," In Progress "),a())}function Fr(t,o){if(t&1&&(s(0,"span",27),m(1),lt(2,"date"),a()),t&2){let e=c().$implicit;r(),k(" ",bt(2,1,e.stop_time,"MMM d, h:mm:ss a")," ")}}function Dr(t,o){if(t&1&&m(0),t&2){let e=c(2);k(" ",e.elapsedTime()," ")}}function Or(t,o){if(t&1&&m(0),t&2){let e=c().$implicit,n=c();k(" ",n.getDuration(e.start_time,e.stop_time)," ")}}function Ar(t,o){t&1&&(s(0,"div",38),u(1,"img",41),s(2,"div",42),m(3," No documents attached "),a()())}function Mr(t,o){if(t&1&&(s(0,"div",43)(1,"span",44),m(2," ... "),a(),s(3,"a",45),m(4),a()()),t&2){let e=o.$implicit;r(3),p("href",e.file_url,X),r(),k(" ",e.original_file," ")}}function zr(t,o){if(t&1&&(s(0,"div",39),le(1,Mr,5,2,"div",43,xe),a()),t&2){let e=c().$implicit;r(),se(e.task_todo_timelog_documents)}}function Rr(t,o){if(t&1&&(s(0,"div",40)(1,"div",46),u(2,"fc-icon",23),s(3,"div",47)(4,"div",48),m(5," Note "),a(),s(6,"span",49),m(7),a()()()()),t&2){let e=c().$implicit;r(2),p("icon","pencil"),r(5),k(" ",e.note," ")}}function Lr(t,o){if(t&1&&(s(0,"div",10)(1,"div",12)(2,"div",13)(3,"h3",14),m(4),a(),s(5,"div",15),m(6),a()(),s(7,"span",16),m(8),a()(),s(9,"div",17)(10,"div",18)(11,"div",19)(12,"div",20)(13,"div",21)(14,"div",22),u(15,"fc-icon",23),s(16,"span",24),m(17," Time Period "),a()(),s(18,"div",25)(19,"div",26)(20,"span",6),m(21,"Start"),a(),s(22,"span",27),m(23),lt(24,"date"),a()(),s(25,"div",26)(26,"span",6),m(27,"End"),a(),g(28,Er,2,0,"span",28)(29,Fr,3,4,"span",27),a()()(),s(30,"div",29)(31,"div",30),u(32,"fc-icon",31),s(33,"span",32),m(34,"Duration"),a()(),s(35,"div",33),g(36,Dr,1,1)(37,Or,1,1),a()()()(),s(38,"div",34)(39,"div",35)(40,"div",36),u(41,"fc-icon",23),s(42,"span",24),m(43," Documents "),a(),s(44,"span",37),m(45),a()(),g(46,Ar,4,0,"div",38)(47,zr,3,0,"div",39),a()()(),g(48,Rr,8,2,"div",40),a()()),t&2){let e=o.$implicit,n=o.$index,i=c();r(4),k(" ",e.task_todo.task.title," "),r(2),k(" ",e.task_todo.assignment," "),r(2),k(" #",i.recordTimelogs().length-n," "),r(7),p("icon","time"),r(8),k(" ",bt(24,12,e.start_time,"MMM d, h:mm:ss a")," "),r(5),w(e.stop_time===null?28:29),r(4),p("icon","time"),r(4),w(e.stop_time===null?36:37),r(5),p("icon","note"),r(4),k(" ",e.task_todo_timelog_documents.length," "),r(),w(e.task_todo_timelog_documents.length===0?46:47),r(2),w(e.note?48:-1)}}function $r(t,o){t&1&&(s(0,"div",11)(1,"div",50),u(2,"img",51),s(3,"span"),m(4,"You haven't started any timelog"),a()()())}var ti=class t{fcImageZoomerService=b(xt);assignmentService=b(Re);dialogRefService=b(Ue);dialogService=b(de);toastService=b(Fe);authService=b(qe);config=b(Ae);ref=b(we);taskTodoId=Be(()=>this.config.data.taskTodoId);elapsedTime=H("00:00:00");timerId;commentTextAreaRef;commentTextAreaEditRef;commentTextAreaReplyRef;recordTimelogsResource=Ne({request:()=>({taskTodoId:this.taskTodoId()}),loader:({request:o,abortSignal:e})=>{let n=new URLSearchParams({task_todo_id:String(o.taskTodoId)}).toString(),i=Ut(e);return oe(this.assignmentService.getTaskTimelogWithoutLimit(n).pipe(It(i)))}});recordTimelogs=rt(()=>this.recordTimelogsResource.value()?.timelogs||[]);timelogResource=Ne({request:()=>({user_id:this.authService.userData().id}),loader:({request:o})=>{let e=new URLSearchParams({user_id:String(o.user_id)}).toString();return oe(this.assignmentService.getTaskTimelog(e))}});timelog=rt(()=>this.timelogResource.value());new;constructor(){be(()=>{if(console.log(this.recordTimelogsResource.value()?.task_comments),console.log(this.authService.userData()),console.log(this.taskTodoId()),this.timelog()){let o=this.timelog();o&&o.start_time&&!o.stop_time&&this.initializeTimelogCounting(o.start_time)}})}close(){this.ref.close()}getDuration(o,e){let n=Math.floor((new Date(e).getTime()-new Date(o).getTime())/1e3),i=Math.floor(n/86400),l=Math.floor(n%86400/3600),d=Math.floor(n%3600/60),x=n%60,T=[];return i&&T.push(`${i} day${i>1?"s":""}`),l&&T.push(`${l} hr${l>1?"s":""}`),d&&T.push(`${d} min`),(x||T.length===0)&&T.push(`${x} sec`),T.join(" ")}initializeTimelogCounting(o){this.timerId&&clearInterval(this.timerId);let e=new Date(o).getTime();console.log(e),this.timerId=setInterval(()=>{let i=Date.now()-e,l=Math.floor(i/1e3),d=Math.floor(l/3600),x=Math.floor(l%3600/60),T=l%60,S=A=>A.toString().padStart(2,"0");this.elapsedTime.set(`${S(d)}:${S(x)}:${S(T)}`)},1e3)}onImageClick(o){console.log(o),this.fcImageZoomerService.show(o)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-assignment-record-dialog"]],viewQuery:function(e,n){if(e&1&&(I(Sr,5),I(Ir,5),I(Vr,5)),e&2){let i;v(i=C())&&(n.commentTextAreaRef=i.first),v(i=C())&&(n.commentTextAreaEditRef=i.first),v(i=C())&&(n.commentTextAreaReplyRef=i.first)}},features:[N([de])],decls:15,vars:4,consts:[[1,"mx-auto","flex","h-[80dvh]","w-full","flex-col","rounded-lg","border","border-gray-200","bg-white","text-sm","text-gray-800","dark:border-gray-700","dark:bg-gray-900","dark:text-gray-100"],[1,"flex","items-center","justify-between","border-b","border-gray-200","px-4","py-2.5","dark:border-gray-700"],[1,"flex","items-center","gap-2"],[1,"mt-2","text-xl","text-gray-600","dark:text-gray-300"],[3,"icon"],[1,"font-medium"],[1,"text-gray-500","dark:text-gray-400"],["type","button",1,"grid","size-8","place-items-center","rounded-md","hover:bg-gray-100","active:scale-95","dark:hover:bg-gray-800",3,"click","keydown.enter"],[1,"text-lg",3,"icon"],[1,"relative","h-full","min-h-0","space-y-3","overflow-y-auto","p-4"],[1,"border-tertiary-100","w-full","rounded-lg","border","bg-white","dark:border-gray-700","dark:bg-gray-800"],[1,"grid","h-full","place-items-center","items-center","justify-center","py-12","text-center"],[1,"flex","items-center","justify-between","border-b","border-gray-100","px-4","py-3","dark:border-gray-700"],[1,"flex-1"],[1,"text-lg","font-semibold","text-gray-900","dark:text-gray-100"],[1,"mt-1","text-sm","text-gray-600","dark:text-gray-400"],[1,"ml-3","rounded","bg-gray-100","px-2","py-1","text-xs","font-medium","text-gray-500","dark:bg-gray-700","dark:text-gray-300"],[1,"px-4","py-3"],[1,"grid","grid-cols-1","grid-rows-2","gap-4","lg:grid-cols-3","lg:grid-rows-1"],[1,"lg:col-span-1"],[1,"space-y-3"],[1,"rounded-lg","bg-gray-50","p-3","dark:bg-gray-700"],[1,"mb-2","flex","items-center","gap-2"],[1,"text-sm","text-gray-600","dark:text-gray-300",3,"icon"],[1,"text-xs","font-medium","text-gray-600","capitalize","dark:text-gray-300"],[1,"space-y-1"],[1,"flex","justify-between","text-sm"],[1,"text-gray-900","dark:text-gray-100"],[1,"font-medium","text-blue-600","dark:text-blue-400"],[1,"bg-primary","rounded-lg","p-3","text-white"],[1,"mb-1","flex","items-center","gap-2"],[1,"text-sm","text-white",3,"icon"],[1,"text-xs","font-medium","capitalize"],[1,"text-lg","font-bold"],[1,"lg:col-span-2"],[1,"relative","h-full","rounded-lg","bg-gray-50","p-3","dark:bg-gray-700"],[1,"mb-3","flex","items-center","gap-2"],[1,"rounded","bg-white","px-1.5","py-0.5","text-xs","text-gray-500","dark:bg-gray-800","dark:text-gray-400"],[1,"absolute","top-1/2","left-1/2","grid","-translate-x-1/2","-translate-y-1/2","place-items-center","gap-2"],[1,"max-h-32","space-y-2","overflow-y-auto"],[1,"bg-tertiary-50","mt-4","w-full","rounded-lg","p-5","dark:bg-gray-700"],["src","/images/placeholders/empty-file.svg","alt","empty file",1,"size-10","opacity-40"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"flex","items-center","gap-2","rounded","border","border-gray-200","bg-white","px-2","py-1.5","transition-colors","hover:border-gray-300","dark:border-gray-700","dark:bg-gray-800","dark:hover:border-gray-600"],[1,"flex-shrink-0","text-sm"],[1,"truncate","text-xs","text-gray-700","hover:text-gray-900","hover:underline","dark:text-gray-200","dark:hover:text-white",3,"href"],[1,"flex","items-start","gap-2"],[1,"flex","flex-col","gap-1"],[1,"mb-1","text-xs","font-medium","text-gray-700","capitalize","dark:text-gray-300"],[1,"text-sm","leading-relaxed","text-wrap","text-gray-900","dark:text-gray-100"],[1,"bg-tertiary-25","flex","flex-col","items-center","justify-between","rounded-lg","border","border-gray-100","p-3","text-sm","text-gray-500","dark:border-gray-700","dark:bg-gray-800","dark:text-gray-400"],["src","images/placeholders/empty-timelog.svg","alt","Empty timelog",1,"mb-3","size-20","opacity-40"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),u(4,"fc-icon",4),a(),s(5,"span",5),m(6,"Timelog Records"),a(),s(7,"span",6),m(8),a()(),s(9,"button",7),_("click",function(l){return n.close(),l.preventDefault()})("keydown.enter",function(){return n.close()}),u(10,"fc-icon",8),a()(),s(11,"div",9),le(12,Lr,49,15,"div",10,xe,!1,$r,5,0,"div",11),a()()),e&2){let i;r(4),p("icon","doubleChat"),r(4),k(" \xB7 ",(i=n.recordTimelogsResource.value())==null?null:i.count," "),r(2),p("icon","x"),r(2),se(n.recordTimelogs())}},dependencies:[Ce,Oe,zt,Me,ze],encapsulation:2})};var bn=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=_e({type:t});static \u0275inj=ge({imports:[te,K,wi,K]})}return t})();var Pr=["titleEdit"],jr=["dueDateEdit"],Br=["descriptionEdit"],Nr=["projectNameEdit"],Qr=["priorityLevelEdit"],Hr=["dialogOverlay"],Cn=(t,o,e)=>({"bg-emerald-500":t,"bg-blue-500":o,"bg-red-500":e}),qr=(t,o,e)=>({"bg-emerald-500":t,"bg-amber-500":o,"bg-red-500":e});function Ur(t,o){if(t&1&&u(0,"img",27),t&2){let e=c();p("src",e.task==null||e.task.manager==null?null:e.task.manager.file_url,X)}}function Wr(t,o){t&1&&u(0,"img",28)}function Gr(t,o){if(t&1&&(s(0,"span",29),m(1),a()),t&2){let e=c();r(),R(e.task==null||e.task.manager==null?null:e.task.manager.name)}}function Kr(t,o){t&1&&u(0,"fc-skeleton",30)}function Zr(t,o){if(t&1){let e=y();s(0,"div",37)(1,"div",60)(2,"input",61,1),_("keydown.enter",function(){h(e);let i=c();return f(i.onSave("title"))}),a()(),s(4,"div",62)(5,"button",63),_("click",function(){h(e);let i=c();return f(i.isTitleEditMode=!1)}),m(6," Cancel "),a(),s(7,"button",64),_("click",function(){h(e);let i=c();return f(i.onSave("title"))}),m(8," Save Changes "),a()()()}}function Yr(t,o){if(t&1&&(s(0,"h2",65),m(1),a()),t&2){let e=c(2);r(),k(" ",e.task==null?null:e.task.title," ")}}function Xr(t,o){t&1&&u(0,"fc-skeleton",66)}function Jr(t,o){if(t&1){let e=y();s(0,"div",38),g(1,Yr,2,1,"h2",65)(2,Xr,1,0,"fc-skeleton",66),s(3,"button",67),_("click",function(){h(e);let i=c();return f(i.onEnabledTitleEditMode())}),u(4,"fc-icon",68),a()()}if(t&2){let e=c();r(),w(e.task!=null&&e.task.title?1:2),r(3),p("icon","pencil")}}function ea(t,o){if(t&1&&(s(0,"span"),m(1),lt(2,"date"),a()),t&2){let e=c();r(),R(ii(2,1,e.task==null?null:e.task.created_at))}}function ta(t,o){t&1&&u(0,"fc-skeleton",44)}function ia(t,o){if(t&1){let e=y();s(0,"div",47),u(1,"p-select",69),s(2,"div",47)(3,"button",70),_("click",function(){h(e);let i=c();return f(i.isProjectNameEditMode=!1)}),m(4," Cancel "),a(),s(5,"button",71),_("click",function(){h(e);let i=c();return f(i.onSave("Project Name"))}),m(6," Save "),a()()()}if(t&2){let e=c();r(),p("options",e.projectNames())("size","small")}}function na(t,o){if(t&1){let e=y();s(0,"span",72),m(1),a(),s(2,"button",67),_("click",function(){h(e);let i=c(2);return f(i.onEnabledProjectNameEditMode())}),u(3,"fc-icon",73),a()}if(t&2){let e=c(2);r(),R(e.task==null?null:e.task.project_name),r(2),p("icon","pencil")}}function oa(t,o){t&1&&u(0,"fc-skeleton",44)}function la(t,o){if(t&1&&g(0,na,4,2)(1,oa,1,0,"fc-skeleton",44),t&2){let e=c();w(e.task!=null&&e.task.project_name?0:1)}}function sa(t,o){if(t&1&&(s(0,"div",42),u(1,"div",76),s(2,"span",77),m(3),a()()),t&2){let e=c().$implicit;r(),p("ngClass",Ee(2,Cn,e.name==="low",e.name==="normal",e.name==="urgent")),r(2),R(e.name)}}function ra(t,o){if(t&1&&g(0,sa,4,6,"div",75),t&2){let e=o.$implicit;p("ngIf",e)}}function aa(t,o){if(t&1&&(s(0,"div",78),u(1,"div",76),s(2,"span",77),m(3),a()()),t&2){let e=o.$implicit;r(),p("ngClass",Ee(2,qr,e.name==="low",e.name==="normal",e.name==="urgent")),r(2),R(e.name)}}function ca(t,o){if(t&1){let e=y();s(0,"div",47)(1,"p-select",74),g(2,ra,1,1,"ng-template",null,2,J)(4,aa,4,6,"ng-template",null,3,J),a(),s(6,"div",47)(7,"button",70),_("click",function(){h(e);let i=c();return f(i.isPriorityLevelEditMode=!1)}),m(8," Cancel "),a(),s(9,"button",71),_("click",function(){h(e);let i=c();return f(i.onSave("Priority Level"))}),m(10," Save "),a()()()}if(t&2){let e=c();r(),p("options",e.levels)("size","small")}}function da(t,o){if(t&1){let e=y();s(0,"span",79),u(1,"div",76),s(2,"span",72),m(3),a()(),s(4,"button",67),_("click",function(){h(e);let i=c(2);return f(i.onEnabledPriorityLevelEditMode())}),u(5,"fc-icon",73),a()}if(t&2){let e=c(2);r(),p("ngClass",Ee(3,Cn,(e.task==null?null:e.task.priority_level)==="low",(e.task==null?null:e.task.priority_level)==="normal",(e.task==null?null:e.task.priority_level)==="urgent")),r(2),R(e.task==null?null:e.task.priority_level),r(2),p("icon","pencil")}}function pa(t,o){t&1&&u(0,"fc-skeleton",44)}function ma(t,o){if(t&1&&g(0,da,6,7)(1,pa,1,0,"fc-skeleton",44),t&2){let e=c();w(e.task!=null&&e.task.priority_level?0:1)}}function ua(t,o){if(t&1){let e=y();s(0,"div",42)(1,"span",43),m(2,"Due"),a(),s(3,"span"),m(4,":"),a(),s(5,"input",80,4),_("keydown.enter",function(){h(e);let i=c();return f(i.onSave("Due Date"))}),a(),s(7,"div",47)(8,"button",70),_("click",function(){h(e);let i=c();return f(i.isDueDateEditMode=!1)}),m(9," Cancel "),a(),s(10,"button",71),_("click",function(){h(e);let i=c();return f(i.onSave("Due Date"))}),m(11," Save "),a()()()}}function ha(t,o){if(t&1){let e=y();s(0,"span"),m(1),lt(2,"date"),a(),s(3,"button",67),_("click",function(){h(e);let i=c(2);return f(i.onEnabledDueDateEditMode())}),u(4,"fc-icon",73),a()}if(t&2){let e=c(2);r(),R(ii(2,2,e.task==null?null:e.task.due_date)),r(3),p("icon","pencil")}}function fa(t,o){t&1&&u(0,"fc-skeleton",44)}function ga(t,o){if(t&1&&(s(0,"div",46)(1,"span",43),m(2,"Due"),a(),s(3,"span"),m(4,":"),a(),g(5,ha,5,4)(6,fa,1,0,"fc-skeleton",44),a()),t&2){let e=c();r(5),w(e.task!=null&&e.task.due_date?5:6)}}function _a(t,o){if(t&1){let e=y();s(0,"div",37)(1,"textarea",81,5),_("keydown.enter",function(){h(e);let i=c();return f(i.onSave("description"))}),a(),s(3,"div",62)(4,"button",63),_("click",function(){h(e);let i=c();return f(i.isDescriptionEditMode=!1)}),m(5," Cancel "),a(),s(6,"button",64),_("click",function(){h(e);let i=c();return f(i.onSave("description"))}),m(7," Save Changes "),a()()()}}function xa(t,o){if(t&1){let e=y();s(0,"div",82)(1,"p",84),m(2),a(),s(3,"button",85),_("click",function(){h(e);let i=c(2);return f(i.onEnabledDescriptionEditMode())}),u(4,"fc-icon",68),a()()}if(t&2){let e=c(2);r(2),k(" ",e.task==null?null:e.task.description," "),r(2),p("icon","pencil")}}function ya(t,o){t&1&&u(0,"fc-skeleton",83)}function ba(t,o){if(t&1&&(s(0,"div",49),g(1,xa,5,2,"div",82)(2,ya,1,0,"fc-skeleton",83),a()),t&2){let e=c();r(),w(e.task!=null&&e.task.description?1:2)}}function va(t,o){t&1&&u(0,"fc-skeleton",58)}function Ca(t,o){if(t&1&&(s(0,"span",94),m(1),lt(2,"number"),a()),t&2){let e=c().$implicit;r(),k(" (",e.expected_minutes>=60?bt(2,1,e.expected_minutes/60,"1.0-0")+"h"+(e.expected_minutes%60>0?" "+e.expected_minutes%60+"m":""):e.expected_minutes+"m",") ")}}function wa(t,o){if(t&1){let e=y();s(0,"button",109),_("click",function(i){return h(e),c(5).stopTimelog(),f(i.stopPropagation())}),u(1,"fc-icon",73),s(2,"span",104),m(3,"Stop Timelog"),a(),s(4,"span",105),m(5,"Stop"),a()()}t&2&&(r(),p("icon","powerOff"))}function Ta(t,o){t&1&&(s(0,"p",108),m(1," *Timelog in progress "),a())}function ka(t,o){if(t&1&&(s(0,"div",42),g(1,wa,6,1,"button",107)(2,Ta,2,0,"p",108),a()),t&2){let e=c(2).$implicit,n=c(2);r(),w(e.id===n.timelog().task_todo.id?1:2)}}function Sa(t,o){if(t&1){let e=y();s(0,"button",110),_("click",function(i){h(e);let l=c(2).$implicit;return c(2).startTimelog(l),f(i.stopPropagation())}),u(1,"fc-icon",73),s(2,"span",104),m(3,"Start Timelog"),a(),s(4,"span",105),m(5,"Start"),a()()}if(t&2){let e=c(4);p("disabled",(e.task==null?null:e.task.status)!=="onProgress"),r(),p("icon","plus")}}function Ia(t,o){if(t&1){let e=y();s(0,"div",95),g(1,ka,3,1,"div",42)(2,Sa,6,2,"button",102),s(3,"button",103),_("click",function(i){h(e);let l=c().$implicit;return c(2).onShowRecordDialog(l),f(i.stopPropagation())}),u(4,"fc-icon",73),s(5,"span",104),m(6,"Records"),a(),s(7,"span",105),m(8,"Records"),a()(),s(9,"button",106),u(10,"fc-icon",73),s(11,"span",104),m(12),a(),s(13,"span",105),m(14),a()()()}if(t&2){let e,n=c().$implicit,i=c(2);r(),w(i.timelog()!="no active timelog"&&n.assigned_user.id===((e=i.timelog())==null?null:e.user_id)?1:2),r(3),p("icon","bars"),r(5),p("disabled",n.document_count===0),r(),p("icon","documentText"),r(2),k(" ",n.document_count===0?"No Documents":`Documents (${n.document_count})`," "),r(2),k(" ",n.document_count===0?"None":n.document_count," ")}}function Va(t,o){t&1&&(s(0,"div",98),u(1,"fc-icon",111),a()),t&2&&(r(),p("icon","check"))}function Ea(t,o){if(t&1&&u(0,"img",99),t&2){let e=c().$implicit;p("src",e.assigned_user.file_url,X)}}function Fa(t,o){t&1&&u(0,"img",100)}function Da(t,o){if(t&1){let e=y();s(0,"div",88),_("click",function(i){let l=h(e),d=l.$implicit,x=l.$index;return c(2).onShowTodoDialog(d,x,"Edit Task Todo"),i.stopPropagation(),f(i.preventDefault())}),s(1,"div",89),m(2),a(),s(3,"div",90)(4,"div",91),m(5),a(),s(6,"div",92)(7,"span",93),m(8),g(9,Ca,3,4,"span",94),a()(),g(10,Ia,15,6,"div",95),a(),s(11,"div",96)(12,"button",97),_("click",function(i){let l=h(e),d=l.$implicit,x=l.$index;return c(2).deleteTaskTodo(x,d.id),f(i.stopPropagation())}),u(13,"fc-icon",68),a(),g(14,Va,2,1,"div",98),s(15,"div",79),g(16,Ea,1,1,"img",99)(17,Fa,1,0,"img",100),s(18,"span",101),m(19),a()()()()}if(t&2){let e=o.$implicit,n=o.$index,i=c(2);r(2),k(" ",n+1," "),r(3),k(" ",e.assignment," "),r(3),k(" ",e.expected_minutes," m "),r(),w(e.expected_minutes>60?9:-1),r(),w(e.assigned_user.id===i.authService.userData().id?10:-1),r(3),p("icon","trash"),r(),w(e.is_finish===!0?14:-1),r(2),w(e.assigned_user.file_url?16:17),r(3),k(" ",e.assigned_user.name," ")}}function Oa(t,o){t&1&&(s(0,"div",87),u(1,"img",112),s(2,"span",113),m(3," You haven\u2019t added any to dos yet"),a()())}function Aa(t,o){if(t&1&&le(0,Da,20,9,"div",86,xe,!1,Oa,4,0,"div",87),t&2){let e=c();se(e.taskTodos())}}function Ma(t,o){t&1&&u(0,"span",117)}function za(t,o){if(t&1&&(s(0,"div",59)(1,"button",114),u(2,"fc-icon",115),s(3,"span"),m(4,"Submit Form"),a(),g(5,Ma,1,0,"span",116),a()()),t&2){let e=c();r(),p("pTooltip",e.assignmentViewForm.invalid?"Fill the form correctly":"Submit Form")("disabled",e.assignmentViewForm.invalid),r(),p("icon","plus"),r(3),p("ngIf",e.isLoading===!0)}}var vn=class t{assignmentService=b(Re);dialogRefService=b(Ue);fcConfirmService=b(tt);dialogService=b(de);toastService=b(Fe);authService=b(qe);config=b(Ae);ref=b(we);projectNames=H([]);taskTodos=H([]);assignmentViewForm;passedData={};isLoading=!1;task;userId=0;timelogResource=Ne({request:()=>({user_id:this.authService.userData().id}),loader:({request:o})=>{let e=new URLSearchParams({user_id:String(o.user_id)}).toString();return oe(this.assignmentService.getTaskTimelog(e))}});timelog=rt(()=>this.timelogResource.value());isPriorityLevelEditMode=!1;isDescriptionEditMode=!1;isProjectNameEditMode=!1;isDueDateEditMode=!1;isTitleEditMode=!1;delayTime=311;titleEditRef;dueDateEditRef;descriptionEditRef;projectNameEditRef;priorityLevelEditRef;dialogOverlay;choosedIndex=null;constructor(){this.initializeAssignmentViewForm(),this.initializeDynamicDialogConfig(),this.initializeVariable(),be(()=>{this.timelog(),console.log(this.timelog())})}ngOnInit(){this.handleOverlayClick(),this.assignmentService.getCommentCounts(this.config.data.taskId).subscribe({next:o=>{this.assignmentService.commentCount.set(o.data)}})}close(o,e=!1){this.passedData={data:o,isDelete:e},setTimeout(()=>{this.ref.close(this.passedData)},111)}handleClose(){let o=pe(j({},this.assignmentViewForm.value),{id:this.config.data?.taskId,status:this.task?.status,task_todos:this.taskTodos()});this.close(o)}levels=[{name:"urgent"},{name:"normal"},{name:"low"}];onKeydownHandler(o){this.close(pe(j({},this.assignmentViewForm.value),{id:this.config.data?.taskId,status:this.task?.status,task_todos:this.taskTodos()}))}initializeVariable(){return mt(this,null,function*(){this.userId=this.authService.userData().id,this.projectNames.set(yield oe(this.assignmentService.getProjects().pipe(_i(o=>o.project_groups.map(e=>({id:e.id,name:e.project_name})))))),console.log(this.projectNames())})}handleOverlayClick(){let o=document.querySelector(".p-dialog-mask");o&&o.addEventListener("click",e=>{e.target===o&&this.close(pe(j({},this.assignmentViewForm.value),{id:this.config.data?.taskId,status:this.task?.status,task_todos:this.taskTodos()}))})}isTaskTodoLoading=!0;initializeDynamicDialogConfig(){return mt(this,null,function*(){if(console.log(this.config.data?.taskId),this.config.data.taskId)try{let o=yield oe(this.assignmentService.getTask(this.config.data.taskId));this.task=o.task;let e=yield oe(this.assignmentService.findAllTaskTodo(this.task.id));console.log(this.task);let n=e.data.map(i=>({id:i.id,assignment:i.assignment,expected_minutes:i.expected_time,files:[],assigned_user:i.user,user:i.user,document_count:i.document_count,is_finish:i.is_finish}));console.log(n),this.taskTodos.set(n),this.isTaskTodoLoading=!1,console.log("Todos:",e),this.assignmentViewForm.patchValue({title:this.task.title,due_date:this.task.due_date,description:this.task.description,project_name:this.projectNames().find(i=>i.name===this.task?.project_name),priority_level:{name:this.task.priority_level}}),console.log(this.assignmentViewForm.value)}catch(o){console.error("Error fetching task or todos",o)}})}initializeAssignmentViewForm(){this.assignmentViewForm=new Ze({title:new ce("",ae.required),due_date:new ce("",ae.required),description:new ce("",ae.required),priority_level:new ce("",ae.required),project_name:new ce("",ae.required)})}onShowTodoDialog(o,e,n){this.choosedIndex=e,console.log(),console.log(e);let i=this.dialogService.open(Yt,{data:{taskId:this.config.data?.taskId,index:e??null,taskTodo:o!=null?j({},o):null,title:n},width:"30rem",baseZIndex:1e4,modal:!0,dismissableMask:!0,focusOnShow:!0,showHeader:!1,styleClass:"!p-0 m-4",contentStyle:{overflow:"visible"},closeOnEscape:!0,transitionOptions:"0ms cubic-bezier(0, 0, 0.2, 1)"});this.dialogRefService.dialogRef=i,i.onClose.subscribe(l=>{if(console.log(l),l)if(console.log(this.choosedIndex),console.log(l),l.user=l.assigned_user,this.choosedIndex!=null){let d=[...this.taskTodos()];d.splice(this.choosedIndex,1,l),this.taskTodos.set(d)}else this.taskTodos.set([...this.taskTodos(),l])})}onShowCommentDialog(){let o=this.dialogService.open(Jt,{data:{taskId:this.task.id},width:"35rem",baseZIndex:1e4,modal:!0,dismissableMask:!0,focusOnShow:!0,showHeader:!1,styleClass:"!p-0 m-4",contentStyle:{overflow:"visible"},closeOnEscape:!0,transitionOptions:"0ms cubic-bezier(0, 0, 0.2, 1)"});this.dialogRefService.dialogRef=o,o.onClose.subscribe(e=>{})}submit(){if(this.assignmentViewForm.invalid){this.assignmentViewForm.markAllAsTouched();return}this.isLoading=!0;let o={title:this.assignmentViewForm.value.title,description:this.assignmentViewForm.value.description,due_date:this.assignmentViewForm.value.due_date,project_name:this.assignmentViewForm.value.project_name,priority_level:this.assignmentViewForm.value.priority_level,status:"draft"};if(this.config.data?.taskId)console.log("update task");else{if(this.taskTodos().length===0)return this.isLoading=!1,this.toastService.displayToast({summary:"Please provide at least one assignment todo"},"fail");this.addTask(o)}}addTask(o){this.close(o),this.assignmentService.addTask(o).subscribe({next:e=>{console.log(e);let n=e.data.id;this.taskTodos().length>0?this.taskTodos().forEach(i=>{let l=new FormData;l.append("assignment",i.assignment),l.append("expected_time",i.expected_minutes),l.append("user_id",i.assigned_user.id),i.files.forEach(d=>{l.append("task_todo_documents",d.file)}),console.log(i.files),this.assignmentService.addTaskTodo(n,l).subscribe({next:d=>{console.log("TaskTodo added:",d),this.isLoading=!1,this.toastService.displayToast({summary:e.message},"success")},error:d=>{console.error("Failed to add TaskTodo:",d),this.isLoading=!1}})}):this.isLoading=!1},error:e=>{console.error("Failed to add assignment:",e),this.isLoading=!1}})}deleteTaskTodo(o,e){let n=!!this.config.data,i=this.config.data?.taskId;console.log(i),n&&i?this.fcConfirmService.open({message:`Are you sure you want to delete ${this.task?.title}?`,accept:()=>{this.assignmentService.deleteTaskTodo(i,e).subscribe({next:l=>{this.taskTodos().splice(o,1),this.toastService.displayToast({summary:l.message},"success")},error:l=>{this.toastService.displayToast({summary:l?.error?.message||"Failed to delete task"},"fail")}})}}):this.taskTodos().splice(o,1)}onSave(o){let e={title:this.assignmentViewForm.value.title,description:this.assignmentViewForm.value.description,due_date:this.assignmentViewForm.value.due_date,project_name:this.assignmentViewForm.value.project_name.name,priority_level:this.assignmentViewForm.value.priority_level.name,status:this.task.status};this.assignmentService.updateTask(this.task.id,e).subscribe({next:n=>{this.toastService.displayToast({summary:`${o} updated successfully`},"success"),this.task.title=n.data.title,this.task.description=n.data.description,this.task.due_date=n.data.due_date,this.task.project_name=n.data.project_name,this.task.priority_level=n.data.priority_level,this.isTitleEditMode=!1,this.isDescriptionEditMode=!1,this.isDueDateEditMode=!1,this.isProjectNameEditMode=!1,this.isPriorityLevelEditMode=!1},error:n=>{this.toastService.displayToast({summary:n.message,life:3e3},"fail")}})}onEnabledTitleEditMode(){this.isTitleEditMode=!0,setTimeout(()=>{this.titleEditRef.nativeElement.focus()},this.delayTime)}onEnabledDueDateEditMode(){this.isDueDateEditMode=!0,console.log(this.assignmentViewForm.value.due_date),this.assignmentViewForm.patchValue({due_date:new Date(this.task.due_date).toISOString().split("T")[0]}),setTimeout(()=>{let o=this.dueDateEditRef.nativeElement;o.focus(),typeof o.showPicker=="function"&&o.showPicker()},this.delayTime)}onEnabledDescriptionEditMode(){this.isDescriptionEditMode=!0,setTimeout(()=>{this.descriptionEditRef.nativeElement.focus()},this.delayTime)}onEnabledPriorityLevelEditMode(){this.isPriorityLevelEditMode=!0,setTimeout(()=>{this.priorityLevelEditRef.nativeElement.focus()},this.delayTime)}onEnabledProjectNameEditMode(){this.isProjectNameEditMode=!0,setTimeout(()=>{this.projectNameEditRef.nativeElement.focus()},this.delayTime)}onShowRecordDialog(o){let e=this.dialogService.open(ti,{data:{taskTodoId:o.id},width:"45rem",baseZIndex:1e4,modal:!0,dismissableMask:!0,focusOnShow:!0,showHeader:!1,styleClass:"!p-0 m-4",contentStyle:{overflow:"visible"},closeOnEscape:!0,transitionOptions:"0ms cubic-bezier(0, 0, 0.2, 1)"});this.dialogRefService.dialogRef=e}formatLocalDateTime(o=new Date){let e={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return new Intl.DateTimeFormat("sv-SE",e).format(o).replace(/\//g,"-").replace(",","")}startTimelog(o){return mt(this,null,function*(){if(this.task?.status!=="onProgress")return this.toastService.displayToast({summary:"Make task status to progress before start timelog",life:2e3},"fail");try{let e=new Audio("/sounds/timerStart.mp3");e.volume=1,yield e.play().catch(i=>{console.warn("Audio play blocked or failed:",i)});let n={user_id:this.userId,task_todo_id:o.id,start_time:this.formatLocalDateTime(),stop_time:null,note:null};this.assignmentService.addTaskTodoTimelog(this.task.id,o.id,n).subscribe({next:()=>{this.assignmentService.isReloadAssignmentService.set(!0),this.timelogResource.reload()},error:i=>{console.error("Failed to start timelog:",i)}})}catch(e){console.error("Error starting timelog:",e)}})}stopTimelog(){let o=this.dialogService.open(ei,{data:{timelog:this.timelog()},width:"30rem",baseZIndex:1e4,modal:!0,dismissableMask:!1,focusOnShow:!0,showHeader:!1,styleClass:"!p-0 m-4",contentStyle:{overflow:"hidden"},closeOnEscape:!1,transitionOptions:"0ms cubic-bezier(0, 0, 0.2, 1)"});this.dialogRefService.dialogRef=o,o.onClose.subscribe(()=>{this.timelogResource.reload(),this.assignmentService.isReloadAssignmentService.set(!0)})}deleteTask(o){this.fcConfirmService.open({message:`Are you sure you want to delete ${o.title} ?`,accept:()=>{this.close(o,!0)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=V({type:t,selectors:[["app-assignment-view-dialog"]],viewQuery:function(e,n){if(e&1&&(I(Pr,5),I(jr,5),I(Br,5),I(Nr,5),I(Qr,5),I(Hr,5)),e&2){let i;v(i=C())&&(n.titleEditRef=i.first),v(i=C())&&(n.dueDateEditRef=i.first),v(i=C())&&(n.descriptionEditRef=i.first),v(i=C())&&(n.projectNameEditRef=i.first),v(i=C())&&(n.priorityLevelEditRef=i.first),v(i=C())&&(n.dialogOverlay=i.first)}},hostBindings:function(e,n){e&1&&_("keydown.escape",function(l){return n.onKeydownHandler(l)},!1,Ft)},features:[N([de])],decls:107,vars:25,consts:[["more",""],["titleEdit",""],["selectedItem",""],["item",""],["dueDateEdit",""],["descriptionEdit",""],[1,"relative","flex","h-full","w-full","overflow-clip","rounded-xl"],[1,"top-0","left-0","z-50","hidden","h-full","min-w-50","flex-col","items-center","justify-between","gap-3","bg-slate-50/80","px-4","py-6","backdrop-blur-sm","md:flex","dark:bg-slate-900/70"],["type","button",1,"group","flex","w-full","items-center","justify-center","gap-2","rounded-lg","border","border-slate-200/80","bg-white/90","px-4","py-2","font-medium","text-slate-700","shadow-sm","backdrop-blur-sm","transition-all","duration-200","hover:border-slate-300","hover:bg-slate-50","hover:shadow-md","focus:outline-none","dark:border-slate-600/50","dark:bg-slate-800/80","dark:text-slate-200","dark:hover:border-slate-500","dark:hover:bg-slate-700/60","dark:hover:shadow-md",3,"click"],[1,"text-base","transition-transform","group-hover:scale-105",3,"icon"],[1,"text-sm"],["type","button",1,"group","flex","w-full","items-center","justify-center","gap-2","rounded-lg","bg-gradient-to-r","from-red-500","to-red-600","px-4","py-2","font-medium","text-white","shadow-lg","transition-all","duration-200","hover:-translate-y-0.5","hover:from-red-600","hover:to-red-700","hover:shadow-xl","focus:ring-2","focus:ring-red-500/40","focus:ring-offset-2","focus:outline-none","active:translate-y-0","dark:shadow-red-900/40","dark:hover:shadow-red-900/50",3,"click"],[1,"flex","h-full","min-h-0","w-full","flex-col",3,"ngSubmit","formGroup"],[1,"sticky","top-0","z-20","rounded-t-xl","border-b","border-slate-200","bg-white/90","backdrop-blur-sm","dark:border-slate-700/50","dark:bg-slate-900/95"],[1,"flex","items-center","justify-between","px-6","py-4"],[1,"flex","items-center","gap-3"],[1,"bg-primary","grid","size-9","place-items-center","rounded-lg","shadow-lg","dark:shadow-slate-900/20"],[1,"text-xl","text-white",3,"icon"],[1,"text-xl","font-bold","text-slate-800","dark:text-slate-100"],[1,"text-sm","text-slate-500","dark:text-slate-400"],["type","button",1,"group","grid","size-8","place-items-center","rounded-lg","transition-colors","hover:bg-slate-100","active:scale-95","dark:hover:bg-slate-800/50",3,"click","keydown.enter"],[1,"text-slate-600","transition-colors","group-hover:text-slate-800","dark:text-slate-300","dark:group-hover:text-slate-100",3,"icon"],[1,"flex","h-full","min-h-0","flex-col","gap-4","overflow-y-auto","p-5","dark:bg-slate-900"],[1,"space-y-6","rounded-xl"],[1,"flex","flex-row","justify-between","gap-4","sm:items-center"],[1,"text-sm","font-medium","text-slate-600","dark:text-slate-300"],[1,"flex","items-center","gap-2","rounded-full","bg-slate-100","px-3","py-1","dark:bg-slate-800/60"],["alt","Manager avatar",1,"h-6","w-6","rounded-full","object-cover","ring-2","ring-white","dark:ring-slate-700",3,"src"],["src","images/placeholders/placeholder-user.jpg","alt","Manager avatar",1,"h-6","w-6","rounded-full","object-cover","ring-2","ring-white","dark:ring-slate-700"],[1,"text-sm","font-medium","text-slate-700","dark:text-slate-200"],[1,"h-4","w-12"],["type","button",1,"small-button","block","text-xs","md:hidden",3,"click"],[1,"absolute"],[1,"flex","flex-col","gap-3","p-2"],["type","button",1,"group","flex","w-full","items-center","justify-center","gap-2","rounded-lg","border","border-slate-200/80","bg-white/90","px-4","py-2","font-medium","text-slate-700","shadow-sm","backdrop-blur-sm","transition-all","duration-200","hover:border-slate-300","hover:bg-slate-50","hover:shadow-md","focus:outline-none","dark:border-slate-600/50","dark:bg-slate-800/80","dark:text-slate-200","dark:hover:border-slate-500","dark:hover:bg-slate-700/60",3,"click"],["type","button",1,"group","flex","w-full","items-center","justify-center","gap-2","rounded-lg","bg-gradient-to-r","from-red-500","to-red-600","px-4","py-2","font-medium","text-white","shadow-lg","transition-all","duration-200","hover:-translate-y-0.5","hover:from-red-600","hover:to-red-700","hover:shadow-xl","focus:ring-2","focus:ring-red-500/40","focus:ring-offset-2","focus:outline-none","active:translate-y-0","dark:shadow-red-900/30",3,"click"],[1,"space-y-2"],[1,"space-y-3"],[1,"group","flex","items-center","gap-3"],[1,"flex","flex-col","gap-0.5","text-sm","text-slate-600","dark:text-slate-300"],[1,"flex","h-[2rem]","items-center","gap-1"],[1,"col-span-1","row-span-1","self-center",3,"icon"],[1,"flex","items-center","gap-2"],[1,"min-w-[6rem]","font-bold"],[1,"h-5","w-[10rem]"],[1,"text-slate-500","dark:text-slate-400",3,"icon"],[1,"group","flex","items-center","gap-2"],[1,"flex","items-center","gap-1"],[1,"text-sm","font-medium","text-slate-700","dark:text-slate-300"],[1,"group","relative","flex","items-center","justify-between","rounded-lg","border","border-slate-200","bg-slate-50","dark:border-slate-700/50","dark:bg-slate-800/30"],[1,"mt-6","flex","h-auto","flex-col"],[1,"flex","items-center","justify-between","gap-3"],[1,"text-lg","font-bold","dark:text-slate-100"],[1,"flex","size-5","items-center","justify-center","rounded-md","bg-slate-200","px-2","text-xs","font-semibold","text-slate-700","dark:bg-slate-700/50","dark:text-slate-300"],["type","button",1,"small-button","bg-information-600","hover:bg-information-700","text-white",3,"click"],[1,"text-xs","text-white","dark:text-gray-400",3,"icon"],[1,"text-nowrap","dark:text-slate-300"],[1,"relative","mt-5","flex","h-full","min-h-0","w-full","flex-col","gap-3","overflow-y-auto","rounded-xl","px-1","py-3"],[1,"h-[20rem]","w-full"],[1,"w-full","rounded-b-xl","bg-white"],[1,"relative"],["type","text","formControlName","title","placeholder","Enter task title...",1,"w-full","rounded-lg","border-2","border-blue-300","bg-blue-50/50","px-4","py-3","text-xl","font-bold","text-slate-900","placeholder-slate-400","focus:border-blue-500","focus:bg-white","focus:ring-2","focus:ring-blue-100","focus:outline-none","dark:border-blue-500/50","dark:bg-slate-800/50","dark:text-slate-100","dark:placeholder-slate-500","dark:focus:bg-slate-800","dark:focus:ring-blue-500/30",3,"keydown.enter"],[1,"flex","items-center","justify-end","gap-2"],["type","button",1,"rounded-md","border","border-slate-300","bg-white","px-3","py-1.5","text-sm","font-medium","text-slate-700","hover:bg-slate-50","focus:ring-2","focus:ring-slate-500","focus:ring-offset-1","focus:outline-none","dark:border-slate-600","dark:bg-slate-800/50","dark:text-slate-200","dark:hover:bg-slate-700/50","dark:focus:ring-offset-slate-900",3,"click"],["type","button",1,"rounded-md","bg-blue-500","px-3","py-1.5","text-sm","font-medium","text-white","hover:bg-blue-600","focus:ring-2","focus:ring-blue-500","focus:ring-offset-1","focus:outline-none","dark:focus:ring-offset-slate-900",3,"click"],[1,"text-xl","font-bold","text-slate-900","dark:text-slate-100"],[1,"h-6","w-[20rem]"],["type","button",1,"size-7","rounded-md","border","border-slate-300","bg-white","text-slate-400","opacity-0","transition-all","group-hover:opacity-100","hover:bg-slate-50","hover:text-slate-600","focus:opacity-100","focus:ring-2","focus:ring-blue-500","focus:ring-offset-1","focus:outline-none","dark:border-slate-600","dark:bg-slate-800/50","dark:text-slate-500","dark:hover:bg-slate-700/50","dark:hover:text-slate-300","dark:focus:ring-offset-slate-900",3,"click"],[1,"text-sm",3,"icon"],["formControlName","project_name","optionLabel","name","placeholder","Choose Project","inputId","project_name",1,"w-full","[&_.p-dropdown]:!rounded-lg","[&_.p-dropdown]:!border-slate-300","[&_.p-dropdown]:!bg-white","[&_.p-dropdown]:!shadow-sm","[&_.p-dropdown]:!transition-all","hover:[&_.p-dropdown]:!border-blue-400","focus:[&_.p-dropdown]:!border-blue-500","focus:[&_.p-dropdown]:!ring-2","focus:[&_.p-dropdown]:!ring-blue-100","dark:[&_.p-dropdown]:!border-slate-600","dark:[&_.p-dropdown]:!bg-slate-800/50","dark:hover:[&_.p-dropdown]:!border-blue-400","dark:focus:[&_.p-dropdown]:!ring-blue-500/30",3,"options","size"],["type","button",1,"rounded","border","border-slate-300","bg-white","px-2","py-1","text-xs","text-slate-700","hover:bg-slate-50","dark:border-slate-600","dark:bg-slate-800/50","dark:text-slate-200","dark:hover:bg-slate-700/50",3,"click"],["type","button",1,"rounded","bg-blue-500","px-2","py-1","text-xs","text-white","hover:bg-blue-600",3,"click"],[1,"capitalize"],[1,"text-xs",3,"icon"],["formControlName","priority_level","optionLabel","name","placeholder","Priority Level",1,"w-full","[&_.p-dropdown]:!rounded-lg","[&_.p-dropdown]:!border-slate-300","[&_.p-dropdown]:!bg-white","[&_.p-dropdown]:!shadow-sm","[&_.p-dropdown]:!transition-all","hover:[&_.p-dropdown]:!border-blue-400","focus:[&_.p-dropdown]:!border-blue-500","focus:[&_.p-dropdown]:!ring-2","focus:[&_.p-dropdown]:!ring-blue-100","dark:[&_.p-dropdown]:!border-slate-600","dark:[&_.p-dropdown]:!bg-slate-800/50","dark:hover:[&_.p-dropdown]:!border-blue-400","dark:focus:[&_.p-dropdown]:!ring-blue-500/30",3,"options","size"],["class","flex items-center gap-2",4,"ngIf"],[1,"h-2.5","w-2.5","rounded-full","shadow-sm",3,"ngClass"],[1,"font-medium","capitalize"],[1,"flex","items-center","gap-2","py-1"],[1,"flex","items-center","gap-1.5"],["type","date","formControlName","due_date",1,"rounded-md","border","border-slate-300","bg-white","px-2","py-1","text-xs","focus:border-blue-500","focus:ring-2","focus:ring-blue-100","focus:outline-none","dark:border-slate-600","dark:bg-slate-800/50","dark:text-slate-200","dark:focus:ring-blue-500/30",3,"keydown.enter"],["formControlName","description","rows","4","placeholder","Enter task description...",1,"w-full","rounded-lg","border-2","border-blue-300","bg-blue-50/50","px-4","py-3","text-sm","text-slate-900","placeholder-slate-400","focus:border-blue-500","focus:bg-white","focus:ring-2","focus:ring-blue-100","focus:outline-none","dark:border-blue-500/50","dark:bg-slate-800/50","dark:text-slate-100","dark:placeholder-slate-500","dark:focus:bg-slate-800","dark:focus:!text-white","dark:focus:ring-blue-500/30",3,"keydown.enter"],[1,"p-4"],[1,"h-16","w-full"],[1,"text-sm","leading-relaxed","text-slate-700","dark:text-slate-300"],["type","button",1,"mr-3","size-7","rounded-md","border","border-slate-300","bg-white","text-slate-400","opacity-0","transition-all","group-hover:opacity-100","hover:bg-slate-50","hover:text-slate-600","focus:opacity-100","focus:ring-2","focus:ring-blue-500","focus:ring-offset-1","focus:outline-none","dark:border-slate-600","dark:bg-slate-800/50","dark:text-slate-500","dark:hover:bg-slate-700/50","dark:hover:text-slate-300","dark:focus:ring-offset-slate-900",3,"click"],[1,"group","relative","flex","w-full","flex-col","items-start","gap-3","rounded-lg","border","border-gray-200","bg-white","p-3","text-sm","transition-all","hover:cursor-pointer","hover:border-blue-400","hover:bg-gray-50/50","sm:flex-row","sm:gap-4","sm:p-4","dark:border-slate-700/50","dark:bg-slate-800/30","dark:hover:border-blue-500/50","dark:hover:bg-slate-800/50"],[1,"absolute","top-1/2","left-1/2","mt-2","flex","-translate-x-1/2","-translate-y-1/2","flex-col","items-center","justify-center","gap-2","rounded-xl","border","border-gray-200","bg-gray-50","p-4","text-sm","text-gray-500"],[1,"group","relative","flex","w-full","flex-col","items-start","gap-3","rounded-lg","border","border-gray-200","bg-white","p-3","text-sm","transition-all","hover:cursor-pointer","hover:border-blue-400","hover:bg-gray-50/50","sm:flex-row","sm:gap-4","sm:p-4","dark:border-slate-700/50","dark:bg-slate-800/30","dark:hover:border-blue-500/50","dark:hover:bg-slate-800/50",3,"click"],[1,"mt-0.5","grid","size-6","min-w-6","place-items-center","rounded-full","bg-gray-100","text-xs","font-medium","text-gray-600","sm:size-7","sm:min-w-7","dark:bg-slate-700/50","dark:text-slate-300"],[1,"flex","w-full","min-w-0","flex-1","flex-col","gap-2","sm:gap-3"],[1,"text-sm","font-semibold","text-gray-900","sm:text-base","dark:text-slate-100"],[1,"flex","items-center"],[1,"text-primary","inline-flex","items-center","rounded-md","text-xs","font-bold","dark:text-blue-400"],[1,"ml-1","opacity-90"],[1,"flex","flex-wrap","items-center","gap-2"],[1,"flex","h-full","w-full","items-end","justify-between","gap-2","text-xs","sm:w-fit","sm:flex-col"],["type","button",1,"group/delete","flex","items-center","gap-1","rounded-md","p-1.5","text-gray-400","hover:bg-red-50","hover:text-red-500",3,"click"],[1,"flex","size-6","items-center","justify-center","rounded-full","border","border-green-600","bg-green-100"],["alt","User avatar",1,"size-5","rounded-full","object-cover",3,"src"],["src","images/placeholders/placeholder-user.jpg","alt","User avatar",1,"size-5","rounded-full","object-cover"],[1,"max-w-[5rem]","truncate","text-right","text-xs","text-gray-600","sm:max-w-[7rem]"],["type","button",1,"text-primary","flex","w-full","items-center","gap-1.5","rounded-md","border","border-gray-300","bg-white","px-2.5","py-1.5","text-xs","font-medium","hover:bg-gray-50","disabled:cursor-not-allowed","disabled:opacity-50","sm:w-fit","dark:border-slate-600","dark:bg-slate-800/50","dark:text-blue-400","dark:hover:bg-slate-700/50",3,"disabled"],["type","button",1,"text-primary","flex","w-full","items-center","gap-1.5","rounded-md","border","border-gray-300","bg-white","px-2.5","py-1.5","text-xs","font-medium","hover:bg-gray-50","sm:w-fit","dark:border-slate-600","dark:bg-slate-800/50","dark:text-blue-400","dark:hover:bg-slate-700/50",3,"click"],[1,"hidden","sm:inline"],[1,"sm:hidden"],["type","button",1,"text-primary","flex","w-full","items-center","gap-1.5","rounded-md","border","border-gray-300","bg-white","px-2.5","py-1.5","text-xs","font-medium","hover:bg-gray-50","disabled:cursor-not-allowed","disabled:opacity-50","sm:w-fit",3,"disabled"],["type","button",1,"text-primary","flex","items-center","gap-1.5","rounded-md","border","border-gray-300","bg-white","px-2.5","py-1.5","text-xs","font-medium","hover:bg-gray-50","dark:border-slate-600","dark:bg-slate-800/50","dark:text-blue-400","dark:hover:bg-slate-700/50"],[1,"text-xs","text-red-500","sm:text-sm","dark:text-red-400"],["type","button",1,"text-primary","flex","items-center","gap-1.5","rounded-md","border","border-gray-300","bg-white","px-2.5","py-1.5","text-xs","font-medium","hover:bg-gray-50","dark:border-slate-600","dark:bg-slate-800/50","dark:text-blue-400","dark:hover:bg-slate-700/50",3,"click"],["type","button",1,"text-primary","flex","w-full","items-center","gap-1.5","rounded-md","border","border-gray-300","bg-white","px-2.5","py-1.5","text-xs","font-medium","hover:bg-gray-50","disabled:cursor-not-allowed","disabled:opacity-50","sm:w-fit","dark:border-slate-600","dark:bg-slate-800/50","dark:text-blue-400","dark:hover:bg-slate-700/50",3,"click","disabled"],[1,"text-sm","text-green-600",3,"icon"],["src","images/placeholders/empty-todolist.svg","alt","comment placeholder svg",1,"size-30"],[1,"text-center"],["type","submit",1,"hover:bg-information-700","bg-information-600","z-10","m-5","ml-auto","flex","w-fit","items-center","gap-1.5","rounded-md","p-3","text-sm","text-white","duration-100","active:scale-95","disabled:scale-100","disabled:cursor-not-allowed","disabled:bg-gray-500",3,"pTooltip","disabled"],[1,"text-sm","text-white",3,"icon"],["class","loader",4,"ngIf"],[1,"loader"]],template:function(e,n){if(e&1){let i=y();s(0,"div",6)(1,"div",7)(2,"button",8),_("click",function(){return h(i),f(n.onShowCommentDialog())}),u(3,"fc-icon",9),s(4,"span",10),m(5,"Comments"),a(),s(6,"span",10),m(7),a()(),s(8,"button",11),_("click",function(){return h(i),f(n.deleteTask(n.task))}),u(9,"fc-icon",9),s(10,"span",10),m(11,"Delete"),a()()(),s(12,"form",12),_("ngSubmit",function(){return h(i),f(n.submit())}),s(13,"div",13)(14,"div",14)(15,"div",15)(16,"div",16),u(17,"fc-icon",17),a(),s(18,"div")(19,"h1",18),m(20," View Assignment "),a(),s(21,"p",19),m(22," Details of an assignment "),a()()(),s(23,"button",20),_("click",function(d){return h(i),n.handleClose(),f(d.preventDefault())})("keydown.enter",function(){return h(i),f(n.handleClose())}),u(24,"fc-icon",21),a()()(),s(25,"div",22)(26,"div",23)(27,"div",24)(28,"div",15)(29,"span",25),m(30,"Assigned by"),a(),s(31,"div",26),g(32,Ur,1,1,"img",27)(33,Wr,1,0,"img",28)(34,Gr,2,1,"span",29)(35,Kr,1,0,"fc-skeleton",30),a()(),s(36,"button",31),_("click",function(d){h(i);let x=q(39);return f(x.toggle(d))}),m(37," More Options "),a(),s(38,"p-popover",32,0)(40,"div",33)(41,"button",34),_("click",function(d){h(i);let x=q(39);return n.onShowCommentDialog(),f(x.toggle(d))}),u(42,"fc-icon",9),s(43,"span",10),m(44,"Comments"),a(),s(45,"span",10),m(46),a()(),s(47,"button",35),_("click",function(d){h(i);let x=q(39);return n.deleteTask(n.task),f(x.toggle(d))}),u(48,"fc-icon",9),s(49,"span",10),m(50,"Delete"),a()()()()(),s(51,"div",36),g(52,Zr,9,0,"div",37)(53,Jr,5,2,"div",38),a(),s(54,"div",39)(55,"div",40),u(56,"fc-icon",41),s(57,"div",42)(58,"span",43),m(59,"Created"),a(),s(60,"span"),m(61,":"),a(),g(62,ea,3,3,"span")(63,ta,1,0,"fc-skeleton",44),a()(),s(64,"div",40),u(65,"fc-icon",45),s(66,"div",46)(67,"span",43),m(68,"Project Name"),a(),s(69,"span"),m(70,":"),a(),g(71,ia,7,2,"div",47)(72,la,2,1),a()(),s(73,"div",40),u(74,"fc-icon",45),s(75,"div",46)(76,"span",43),m(77,"Priority Level"),a(),s(78,"span"),m(79,":"),a(),g(80,ca,11,2,"div",47)(81,ma,2,1),a()(),s(82,"div",40),u(83,"fc-icon",41),g(84,ua,12,0,"div",42)(85,ga,7,1,"div",46),a()(),s(86,"div",36)(87,"div",42)(88,"span",48),m(89,"Description"),a()(),g(90,_a,8,0,"div",37)(91,ba,3,1,"div",49),a()(),s(92,"div",50)(93,"div",51)(94,"div",42)(95,"span",52),m(96,"Assignment To Do"),a(),s(97,"span",53),m(98),a()(),s(99,"button",54),_("click",function(){return h(i),f(n.onShowTodoDialog(null,null,"Create Task Todo"))}),u(100,"fc-icon",55),s(101,"span",56),m(102,"Add To Do"),a()()(),s(103,"div",57),g(104,va,1,0,"fc-skeleton",58)(105,Aa,3,1),a()()(),g(106,za,6,4,"div",59),a()()}e&2&&(r(3),p("icon","doubleChat"),r(4),k("(",n.assignmentService.commentCount(),")"),r(2),p("icon","trash"),r(3),p("formGroup",n.assignmentViewForm),r(5),p("icon","noteMini"),r(7),p("icon","x"),r(8),w(!(n.task==null||n.task.manager==null)&&n.task.manager.file_url?32:33),r(2),w(!(n.task==null||n.task.manager==null)&&n.task.manager.name?34:35),r(8),p("icon","doubleChat"),r(4),k("(",n.assignmentService.commentCount(),")"),r(2),p("icon","trash"),r(4),w(n.isTitleEditMode===!0?52:53),r(4),p("icon","calendar"),r(6),w(n.task!=null&&n.task.created_at?62:63),r(3),p("icon","clipboard"),r(6),w(n.isProjectNameEditMode===!0?71:72),r(3),p("icon","star"),r(6),w(n.isPriorityLevelEditMode===!0?80:81),r(3),p("icon","time"),r(),w(n.isDueDateEditMode===!0?84:85),r(6),w(n.isDescriptionEditMode===!0?90:91),r(8),k(" ",n.taskTodos().length," "),r(2),p("icon","plus"),r(4),w(n.taskTodos().length===0&&n.isTaskTodoLoading===!0?104:105),r(2),w((n.config.data==null?null:n.config.data.taskId)===void 0?106:-1))},dependencies:[Ce,Ye,Bt,De,Ke,Xe,Je,Z,ee,Oe,et,Ci,zt,Me,ze,qt,gn,Wt,bn,$i],encapsulation:2})};export{tn as a,ei as b,mi as c,ui as d,Zt as e,Yt as f,Jt as g,ti as h,rn as i,pn as j,Wt as k,gn as l,bn as m,vn as n};
