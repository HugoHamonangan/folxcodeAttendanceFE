import{k as K}from"./chunk-ZYGI2F2J.js";import{Sa as Q,va as S}from"./chunk-ZAHCPB2U.js";import{Ab as T,Cb as D,Cc as z,Db as E,Eb as c,Fb as r,Gb as O,Kb as F,Mb as x,Nb as u,Sc as q,Ub as N,Vb as j,Wa as w,Xa as l,Xb as m,Yb as H,Zb as b,ab as M,ad as $,db as V,ga as _,ha as g,hb as B,hc as P,ic as I,id as k,jd as f,ld as d,ma as A,mb as C,nd as h,ua as s,ub as p,wa as y,zb as v}from"./chunk-24CHYTPN.js";var de=k("fadeInOut",[h(":enter",[d({opacity:0}),f("211ms ease-in",d({opacity:1}))]),h(":leave",[f("211ms ease-out",d({opacity:0}))])]),R=k("slideInOut",[h(":enter",[d({transform:"translateY(-10px)",opacity:0}),f("111ms ease-out",d({transform:"translateY(0)",opacity:1}))]),h(":leave",[f("111ms ease-in",d({transform:"translateY(-10px)",opacity:0}))])]),ue=k("scaleFade",[h(":enter",[d({transform:"scale(0.9)",opacity:0}),f("211ms ease-out",d({transform:"scale(1)",opacity:1}))]),h(":leave",[f("211ms ease-in",d({transform:"scale(0.9)",opacity:0}))])]);var U=["position"],L=["fcInput"],G=(i,e)=>({"outline-1 outline-blue-500":i,"py-3.5":e}),J=i=>({"rotate-180":i}),W=(i,e)=>({"top-full translate-y-2":i,"bottom-full":e}),X=(i,e)=>({"bg-blue-100 dark:bg-blue-900":i,"bg-tertiary-100 dark:bg-gray-800":e});function Z(i,e){i&1&&(c(0,"span",4),m(1,"*"),r())}function ee(i,e){if(i&1&&(c(0,"span",10),m(1),r()),i&2){let t=e.$implicit;l(),H(t.name)}}function te(i,e){if(i&1&&(c(0,"div",9),D(1,ee,2,1,"span",10,T),r()),i&2){let t=u(2);l(),E(t.value())}}function ie(i,e){if(i&1&&m(0),i&2){let t,n=u(2);b(" ",(t=n.value())==null?null:t.name," ")}}function ne(i,e){if(i&1&&C(0,te,3,0,"div",9)(1,ie,1,1),i&2){let t=u();v(t.isMultipleMode()===!0?0:1)}}function oe(i,e){if(i&1&&(c(0,"span",6),m(1),r()),i&2){let t=u();l(),b(" ",t.placeholder()," ")}}function ae(i,e){i&1&&(c(0,"div",14),O(1,"fc-icon",15),r()),i&2&&(l(),p("icon","check"))}function le(i,e){if(i&1){let t=F();c(0,"button",13),x("click",function(){let a=_(t).$implicit,o=u(2);return g(o.isMultipleMode()===!0?o.handleDataInMultipleMode(a):o.handleData(a))}),m(1),C(2,ae,2,1,"div",14),r()}if(i&2){let t,n=e.$implicit,a=e.$index,o=u(2);p("ngClass",I(3,X,((t=o.value())==null?null:t.id)===n.id&&o.isMultipleMode()===!1,o.selectedValue()===a)),l(),b(" ",n.name," "),l(),v(o.isDataExist(n)?2:-1)}}function re(i,e){if(i&1){let t=F();c(0,"div",11),x("mousedown",function(a){return _(t),g(a.preventDefault())}),D(1,le,3,6,"button",12,T),r()}if(i&2){let t=u();p("@slideInOut",void 0)("ngClass",I(2,W,t.isPosition()===!1,t.isPosition()===!0)),l(),E(t.datas())}}var Y=class i{constructor(e,t){this.ngControl=e;this._injector=t;this.ngControl&&(this.ngControl.valueAccessor=this),z(()=>{console.log(this.value())})}position=V("position");fcInput=V("fcInput");datas=s();size=s("small");iconName=s("user");placeholder=s("");id=s("");title=s("");required=s(!1);isMultipleMode=s(!1);multipleDatas=s([]);isFocused=y(!1);isPosition=y(!1);value=y(null);count=y(0);selectedValue=y(-1);ngOnInit(){let e=this._injector.get(S,null)}onChange=()=>{};onTouch=()=>{};writeValue(e){this.value.set(e),e&&this.fcInput()&&this.fcInput()?.writeValue(e.name||e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouch=e}handleFocus(){this.isFocused.set(!0)}handleBlur(){this.isFocused.set(!1)}ngAfterViewInit(){let e=Math.ceil(screen.height/2);Math.ceil(this.position()?.nativeElement.getBoundingClientRect().y)>e?this.isPosition.set(!0):this.isPosition.set(!1),this.multipleDatas().length>0&&this.isMultipleMode()===!0&&(console.log(this.multipleDatas()),this.value.set(this.multipleDatas()),this.onChange(this.multipleDatas()))}handleData(e){if(!e)return;this.value.set(e),this.isFocused.set(!1),this.onChange(e),this.onTouch();let t=this.datas()?.findIndex(n=>n?.id===e.id);t!==void 0&&t>=0&&this.selectedValue.set(t)}handleDataInMultipleMode(e){console.log(e);let t=[...this.value()],n=t.findIndex(a=>a.id===e.id);n===-1?t.push(e):t.splice(n,1),this.value.set(t),this.onChange(t),console.log(t)}isDataExist(e){if(this.value()?.length>0)return this.value()?.some(t=>t.id===e.id)}isValueEmpty(){let e=this.value();return e===""||Array.isArray(e)&&e.length===0||e===null||e===void 0}onClickSelect(){this.isFocused()===!0?this.handleBlur():this.handleFocus()}handleArrowDown(e){this.isFocused()&&(this.datas()&&this.selectedValue()<this.datas().length-1?this.selectedValue.set(this.selectedValue()+1):this.selectedValue.set(0),e.preventDefault())}handleArrowUp(e){this.isFocused()&&(this.datas()&&this.selectedValue()>0?this.selectedValue.set(this.selectedValue()-1):this.selectedValue.set(this.datas().length-1),e.preventDefault())}handleEnter(e){e.preventDefault();let t=this.datas()?.[this.selectedValue()];t&&(this.isMultipleMode()?this.isFocused()||(this.isFocused.set(!0),this.handleDataInMultipleMode(t)):this.isFocused()||this.handleData(t))}static \u0275fac=function(t){return new(t||i)(M(S,10),M(A))};static \u0275cmp=B({type:i,selectors:[["fc-select"]],viewQuery:function(t,n){t&1&&(N(n.position,U,5),N(n.fcInput,L,5)),t&2&&j(2)},hostBindings:function(t,n){t&1&&x("keydown.arrowdown",function(o){return n.handleArrowDown(o)},!1,w)("keydown.arrowup",function(o){return n.handleArrowUp(o)},!1,w)("keydown.enter",function(o){return n.handleEnter(o)},!1,w)},inputs:{datas:[1,"datas"],size:[1,"size"],iconName:[1,"iconName"],placeholder:[1,"placeholder"],id:[1,"id"],title:[1,"title"],required:[1,"required"],isMultipleMode:[1,"isMultipleMode"],multipleDatas:[1,"multipleDatas"]},decls:11,vars:14,consts:[["position",""],[1,"relative"],[1,"flex","flex-col","gap-1","select-none"],[1,"text-sm",3,"for"],[1,"text-red-500"],["tabindex","0","role","textbox",1,"bg-tertiary-50","relative","cursor-pointer","rounded-lg","border-1","border-none","px-4","text-sm","select-none","dark:bg-gray-800",3,"blur","click","keydown.enter","id","ngClass"],[1,"text-tertiary-400"],[1,"text-primary","absolute","top-1/2","right-3","-translate-y-1/2","text-sm","duration-200","dark:text-white",3,"icon","ngClass"],[1,"border-tertiary-300","absolute","z-50","h-fit","max-h-[17rem]","w-full","overflow-auto","rounded-lg","border-1","bg-white","p-2","shadow-sm","dark:border-gray-700","dark:bg-gray-900",3,"ngClass"],[1,"w-full","overflow-x-auto","py-3.5","pr-2"],[1,"bg-primary","mx-1","rounded-lg","p-1","text-xs","text-nowrap","text-white"],[1,"border-tertiary-300","absolute","z-50","h-fit","max-h-[17rem]","w-full","overflow-auto","rounded-lg","border-1","bg-white","p-2","shadow-sm","dark:border-gray-700","dark:bg-gray-900",3,"mousedown","ngClass"],["type","button",1,"hover:bg-tertiary-100","flex","min-h-[3rem]","w-full","items-center","justify-between","gap-2","rounded-md","px-4","text-left","text-sm","text-gray-800","duration-100","active:scale-95","dark:text-gray-200","dark:hover:bg-gray-800",3,"ngClass"],["type","button",1,"hover:bg-tertiary-100","flex","min-h-[3rem]","w-full","items-center","justify-between","gap-2","rounded-md","px-4","text-left","text-sm","text-gray-800","duration-100","active:scale-95","dark:text-gray-200","dark:hover:bg-gray-800",3,"click","ngClass"],[1,"bg-tertiary-100","grid","size-6","place-items-center","rounded-full","border","border-blue-500","dark:border-blue-400","dark:bg-gray-800"],[1,"text-base","text-blue-500","dark:text-blue-400",3,"icon"]],template:function(t,n){if(t&1){let a=F();c(0,"div",1,0)(2,"div",2)(3,"label",3),m(4),C(5,Z,2,0,"span",4),r(),c(6,"div",5),x("blur",function(){return _(a),g(n.handleBlur())})("click",function(){return _(a),g(n.onClickSelect())})("keydown.enter",function(){return _(a),g(n.onClickSelect())}),C(7,ne,2,1)(8,oe,2,1,"span",6),O(9,"fc-icon",7),r()(),C(10,re,3,5,"div",8),r()}t&2&&(l(3),p("for",n.id()),l(),b("",n.title()," "),l(),v(n.required()===!0&&n.title()?5:-1),l(),p("id",n.id())("ngClass",I(9,G,n.isFocused(),n.isMultipleMode()===!1||n.isMultipleMode()===!0&&n.isValueEmpty()===!0)),l(),v(n.isValueEmpty()===!1?7:8),l(2),p("icon","chevronDown")("ngClass",P(12,J,n.isFocused())),l(),v(n.isFocused()===!0?10:-1))},dependencies:[$,q,K,Q],styles:[".p-popover:after,   .p-popover:before{border:0 solid!important}  ::-webkit-scrollbar{width:0px;height:0px}"],data:{animation:[R]}})};export{de as a,Y as b};
