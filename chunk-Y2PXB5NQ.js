import{a as L}from"./chunk-JEWDWJGV.js";import{a as _,b as A}from"./chunk-ZAHCPB2U.js";import{$ as g,Ac as x,Bc as $,Cc as M,T as h,V as O,_ as S,ea as y,h as U,ma as D,na as m,q as f,wa as w}from"./chunk-24CHYTPN.js";import{e as F,f as B}from"./chunk-TSRGIXR5.js";var T=F((j,E)=>{"use strict";(function(u,e){typeof define=="function"&&define.amd?define([],e):typeof j<"u"?e():(e(),u.FileSaver={})})(j,function(){"use strict";function u(t,n){return typeof n>"u"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\uFEFF",t],{type:t.type}):t}function e(t,n,l){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){d(o.response,n,l)},o.onerror=function(){console.error("could not download file")},o.send()}function r(t){var n=new XMLHttpRequest;n.open("HEAD",t,!1);try{n.send()}catch{}return 200<=n.status&&299>=n.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,n,l){var o=s.URL||s.webkitURL,c=document.createElement("a");n=n||t.name||"download",c.download=n,c.rel="noopener",typeof t=="string"?(c.href=t,c.origin===location.origin?i(c):r(c.href)?e(t,n,l):i(c,c.target="_blank")):(c.href=o.createObjectURL(t),setTimeout(function(){o.revokeObjectURL(c.href)},4e4),setTimeout(function(){i(c)},0))}:"msSaveOrOpenBlob"in navigator?function(t,n,l){if(n=n||t.name||"download",typeof t!="string")navigator.msSaveOrOpenBlob(u(t,l),n);else if(r(t))e(t,n,l);else{var o=document.createElement("a");o.href=t,o.target="_blank",setTimeout(function(){i(o)})}}:function(t,n,l,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof t=="string")return e(t,n,l);var c=t.type==="application/octet-stream",I=/constructor/i.test(s.HTMLElement)||s.safari,R=/CriOS\/[\d]+/.test(navigator.userAgent);if((R||c&&I||a)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var p=b.result;p=R?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=p:location=p,o=null},b.readAsDataURL(t)}else{var k=s.URL||s.webkitURL,v=k.createObjectURL(t);o?o.location=v:location.href=v,o=null,setTimeout(function(){k.revokeObjectURL(v)},4e4)}});s.saveAs=d.saveAs=d,typeof E<"u"&&(E.exports=d)})});function H(u,e){!e?.injector&&y(H);let r=e?.injector??g(D),i=new U(1),s=M(()=>{let a;try{a=u()}catch(d){x(()=>i.error(d));return}x(()=>i.next(a))},{injector:r,manualCleanup:!0});return r.get(m).onDestroy(()=>{s.destroy(),i.complete()}),i.asObservable()}function P(u,e){let r=!e?.manualCleanup;r&&!e?.injector&&y(P);let i=r?e?.injector?.get(m)??g(m):null,s=N(e?.equal),a;e?.requireSync?a=w({kind:0},{equal:s}):a=w({kind:1,value:e?.initialValue},{equal:s});let d=u.subscribe({next:t=>a.set({kind:1,value:t}),error:t=>{if(e?.rejectErrors)throw t;a.set({kind:2,error:t})}});if(e?.requireSync&&a().kind===0)throw new h(601,!1);return i?.onDestroy(d.unsubscribe.bind(d)),$(()=>{let t=a();switch(t.kind){case 1:return t.value;case 2:throw t.error;case 0:throw new h(601,!1)}},{equal:e?.equal})}function N(u=Object.is){return(e,r)=>e.kind===1&&r.kind===1&&u(e.value,r.value)}var q=B(T());var C=class u{constructor(e){this.http=e}api_url=L.API_URL;getUsers(e){return this.http.get(`${this.api_url}/users?${e}`).pipe(f(r=>r.data))}getUser(e){return this.http.get(`${this.api_url}/users/${e}`).pipe(f(r=>r.data))}addUser(e){return this.http.post(`${this.api_url}/users`,e)}updateUser(e,r){return this.http.put(`${this.api_url}/users/${e}`,r)}deleteUser(e){return this.http.delete(`${this.api_url}/users/${e}`)}getRoles(){return this.http.get(`${this.api_url}/roles`).pipe(f(e=>e.data))}getPerformances(e,r){return this.http.get(`${this.api_url}/performances/${e}?${r}`)}downloadExcelReport(e,r,i){let s=new _().set("start_date",r).set("end_date",i);return this.http.get(`${this.api_url}/performances/${e}/export`,{params:s,responseType:"blob"})}triggerExcelDownload(e,r,i){this.downloadExcelReport(e,r,i).subscribe({next:s=>{console.log("\u2705 Blob received:",s.size,"bytes");let a=`Performance_Report_${r}_to_${i}.xlsx`;(0,q.saveAs)(s,a)},error:s=>{console.error("Failed to download Excel report:",s)}})}static \u0275fac=function(r){return new(r||u)(S(A))};static \u0275prov=O({token:u,factory:u.\u0275fac,providedIn:"root"})};export{H as a,P as b,C as c};
